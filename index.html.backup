<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Bhuban Creator Studio</title>
    <script src="/shared/config.js?v=13.0"></script>
    <script src="/shared/pathway-manager.js?v=13.0"></script>
    <script src="/shared/pathway-monitor.js?v=13.0"></script>
    <script src="/shared/unified-auth-system.js?v=14.0"></script>
    <script src="/shared/auth-ui-components.js?v=14.0"></script>
    <script src="advanced-creator-features.js?v=14.0"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1e1e1e;
            --bg-card: #252525;
            --bg-hover: #2a2a2a;
            --accent-orange: #FF4500;
            --accent-orange-light: #ff6b35;
            --accent-gradient: linear-gradient(135deg, #FF4500 0%, #ff6b35 100%);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: rgba(255, 69, 0, 0.2);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glow-orange: rgba(255, 69, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* ==========================================
           LAYOUT
           ========================================== */
        .app-container {
            display: flex;
            min-height: 100vh;
            opacity: 1; /* Always visible */
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-logo {
            width: 40px;
            height: 40px;
            background: var(--accent-gradient);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            animation: logoPulse 3s ease-in-out infinite;
        }

        .brand-text h1 {
            font-size: 20px;
            font-weight: 900;
            letter-spacing: -0.5px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .brand-text p {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            margin-bottom: 4px;
            border-radius: 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(255, 69, 0, 0.15);
            color: var(--accent-orange);
            border-right: 3px solid var(--accent-orange);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            background: var(--bg-hover);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .user-subs {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            height: 70px;
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-title {
            font-size: 20px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 10px 16px;
            width: 280px;
        }

        .search-box i {
            color: var(--text-muted);
        }

        .search-box input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .upload-btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 69, 0, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 69, 0, 0.5);
        }

        .header-btn {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .header-btn:hover {
            border-color: var(--accent-orange);
            color: var(--accent-orange);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-color);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-growth {
            font-size: 12px;
            font-weight: 700;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .stat-subtext {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Chart Section */
        .chart-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
        }

        .chart-filters {
            display: flex;
            gap: 8px;
        }

        .chart-filter {
            padding: 8px 16px;
            border-radius: 50px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-filter:hover,
        .chart-filter.active {
            background: var(--accent-gradient);
            color: white;
        }

        .chart-container {
            height: 280px;
            position: relative;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 220px;
            gap: 12px;
            padding-top: 20px;
        }

        .chart-bar-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .chart-bar {
            width: 100%;
            background: var(--accent-gradient);
            border-radius: 8px 8px 0 0;
            min-height: 20px;
            position: relative;
            transition: all 0.4s ease;
            animation: barGrow 1s ease-out;
        }

        .chart-bar:hover {
            filter: brightness(1.2);
            transform: scaleY(1.05);
        }

        @keyframes barGrow {
            from {
                transform: scaleY(0);
            }

            to {
                transform: scaleY(1);
            }
        }

        .chart-label {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Content Table */
        .content-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            overflow: hidden;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .content-title {
            font-size: 18px;
            font-weight: 700;
        }

        .content-filter {
            display: flex;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: transparent;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--accent-gradient);
            border-color: transparent;
            color: white;
        }

        .video-table {
            width: 100%;
        }

        .table-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 0.5fr;
            padding: 16px 24px;
            background: var(--bg-card);
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
        }

        .video-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 0.5fr;
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            align-items: center;
            transition: all 0.3s ease;
        }

        .video-row:hover {
            background: var(--bg-hover);
        }

        .video-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .video-thumb {
            width: 120px;
            height: 68px;
            background: var(--bg-card);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .video-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-thumb-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .video-row:hover .video-thumb-overlay {
            opacity: 1;
        }

        .video-thumb-overlay i {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-thumb-overlay i:hover {
            background: var(--accent-orange);
        }

        .video-details h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .video-details p {
            font-size: 12px;
            color: var(--text-muted);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-badge.public {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .status-badge.draft {
            background: rgba(100, 100, 100, 0.15);
            color: var(--text-muted);
        }

        .video-stats {
            font-size: 13px;
            font-weight: 600;
        }

        .video-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: var(--accent-orange);
            color: white;
        }

        /* Upload Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .upload-modal {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--error);
            color: white;
        }

        .modal-body {
            padding: 32px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .upload-dropzone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 60px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-dropzone:hover,
        .upload-dropzone.dragover {
            border-color: var(--accent-orange);
            background: rgba(255, 69, 0, 0.05);
        }

        .upload-dropzone i {
            font-size: 48px;
            color: var(--accent-orange);
            margin-bottom: 16px;
        }

        .upload-dropzone h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .upload-dropzone p {
            font-size: 13px;
            color: var(--text-muted);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
        }

        .form-input,
        .form-textarea {
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 14px 16px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(255, 69, 0, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .upload-preview {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .preview-box {
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--text-muted);
        }

        .upload-progress {
            margin-top: auto;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--glow-orange);
        }

        .modal-footer {
            padding: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 20px rgba(255, 69, 0, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 69, 0, 0.5);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 26px;
            flex-shrink: 0;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: 0.3s;
            border-radius: 26px;
            border: 1px solid var(--border-color);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: var(--accent-gradient);
            border-color: var(--accent-orange);
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(22px);
        }

        .toggle-switch input:disabled+.toggle-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-body {
                grid-template-columns: 1fr;
            }

            .upload-dropzone {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .table-header,
            .video-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 69, 0, 0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-orange);
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        /* Analytics Specific */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--accent-orange);
            margin: 8px 0;
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Earn Page */
        .earnings-hero {
            background: linear-gradient(135deg, rgba(255, 69, 0, 0.2), rgba(255, 107, 53, 0.1));
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }

        .earnings-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 69, 0, 0.3), transparent 70%);
            pointer-events: none;
        }

        .earnings-title {
            font-size: 14px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        .earnings-amount {
            font-size: 56px;
            font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .payout-btn {
            margin-top: 24px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .payout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 69, 0, 0.4);
        }

        .goals-section {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
        }

        .goals-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .goals-header i {
            color: var(--accent-orange);
            font-size: 24px;
        }

        .goal-item {
            margin-bottom: 24px;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .goal-label {
            font-size: 14px;
            font-weight: 600;
        }

        .goal-value {
            font-size: 13px;
            color: var(--text-muted);
        }

        .goal-bar {
            height: 10px;
            background: var(--bg-card);
            border-radius: 5px;
            overflow: hidden;
        }

        .goal-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 5px;
            transition: width 1s ease;
            box-shadow: 0 0 10px var(--glow-orange);
        }

        .goal-status {
            font-size: 12px;
            color: var(--success);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>

<body>
    <script>console.log('âœ… BODY SCRIPT RUNNING - JavaScript is working!');</script>
    
    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand">
                    <div class="brand-logo">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="brand-text">
                        <h1>BHUBAN</h1>
                        <p>Creator Studio</p>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-page="dashboard">
                    <i class="fas fa-chart-pie"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-page="content">
                    <i class="fas fa-video"></i>
                    <span>Content</span>
                </button>
                <button class="nav-item" data-page="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-item" data-page="comments">
                    <i class="fas fa-comments"></i>
                    <span>Comments</span>
                </button>
                <button class="nav-item" data-page="earn">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Earn</span>
                </button>
                <button class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </button>

                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.05);">
                    <div
                        style="padding: 0 16px 8px; font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">
                        Advanced Tools
                    </div>
                    <button class="nav-item" data-page="ai-studio">
                        <i class="fas fa-robot"></i>
                        <span>AI Studio</span>
                        <span
                            style="margin-left: auto; padding: 2px 8px; background: var(--accent-gradient); border-radius: 12px; font-size: 10px; font-weight: 700;">PRO</span>
                    </button>
                    <button class="nav-item" data-page="scheduler">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Smart Scheduler</span>
                    </button>
                    <button class="nav-item" data-page="collaboration">
                        <i class="fas fa-users"></i>
                        <span>Collaboration</span>
                    </button>
                    <button class="nav-item" data-page="library">
                        <i class="fas fa-folder-open"></i>
                        <span>Content Library</span>
                    </button>
                    <button class="nav-item" data-page="ab-testing">
                        <i class="fas fa-flask"></i>
                        <span>A/B Testing</span>
                    </button>
                    <button class="nav-item" data-page="monetization">
                        <i class="fas fa-chart-line"></i>
                        <span>Monetization Pro</span>
                    </button>
                </div>

                <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.05);">
                    <a href="/Bhuban%20developer%20app/index.html" class="nav-item" style="color: #00d4ff;">
                        <i class="fas fa-code"></i>
                        <span>Developer Dashboard</span>
                    </a>
                    <a href="/Bhuban%20video%20stream%20app/index.html" class="nav-item">
                        <i class="fas fa-play-circle"></i>
                        <span>View App</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card" id="userCard">
                    <div class="user-avatar" id="userAvatar">B</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Bhuban Official</div>
                        <div class="user-email" id="userEmail" style="display: none; font-size: 11px; color: var(--text-muted); margin-top: 2px;">email@example.com</div>
                        <div class="user-subs" id="userStatus">14.2K Subscribers</div>
                    </div>
                    <div id="logoutOption" style="display:none; margin-left: auto;" onclick="handleGlobalLogout(event)">
                        <i class="fas fa-sign-out-alt" style="color: var(--error); cursor: pointer;" title="Logout"></i>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 class="header-title" id="pageTitle">Dashboard</h2>
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search videos...">
                    </div>
                    <a href="/Bhuban%20developer%20app/index.html" class="header-btn" title="Developer Dashboard">
                        <i class="fas fa-code"></i>
                    </a>
                    <button class="header-btn">
                        <i class="fas fa-bell"></i>
                    </button>
                    <button class="upload-btn" onclick="openUploadModal()">
                        <i class="fas fa-plus"></i>
                        CREATE
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Page -->
                <div class="page-section active" id="dashboard-page">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Total Subscribers</span>
                                <span class="stat-growth">
                                    <i class="fas fa-arrow-up"></i> +12%
                                </span>
                            </div>
                            <div class="stat-value" id="subCount">--</div>
                            <div class="stat-subtext">Loading...</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Views (28 Days)</span>
                                <span class="stat-growth">
                                    <i class="fas fa-arrow-up"></i> +5.4%
                                </span>
                            </div>
                            <div class="stat-value" id="viewCount">--</div>
                            <div class="stat-subtext">Loading...</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Estimated Revenue</span>
                                <span class="stat-growth">
                                    <i class="fas fa-arrow-up"></i> +8%
                                </span>
                            </div>
                            <div class="stat-value" id="revenueAmount">$--</div>
                            <div class="stat-subtext">Loading...</div>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Viewership Overview</h3>
                            <div class="chart-filters">
                                <button class="chart-filter active">7 Days</button>
                                <button class="chart-filter">28 Days</button>
                                <button class="chart-filter">90 Days</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-bars" id="chartBars">
                                <!-- Bars generated by JS -->
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">Latest Content Performance</h3>
                            <div class="content-filter">
                                <button class="filter-btn active">All</button>
                                <button class="filter-btn">Public</button>
                                <button class="filter-btn">Draft</button>
                            </div>
                        </div>
                        <div class="video-table">
                            <div class="table-header">
                                <span>Video</span>
                                <span>Visibility</span>
                                <span>Views</span>
                                <span>Revenue</span>
                                <span></span>
                            </div>
                            <div id="videoList">
                                <!-- Video rows generated by JS -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Page -->
                <div class="page-section" id="content-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">Channel Content</h3>
                            <div class="content-filter">
                                <input type="text" placeholder="Filter videos..."
                                    style="background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 8px 16px; color: var(--text-primary); width: 200px;">
                            </div>
                        </div>
                        <div class="video-table">
                            <div class="table-header">
                                <span>Video</span>
                                <span>Visibility</span>
                                <span>Date</span>
                                <span>Views</span>
                                <span>Comments</span>
                            </div>
                            <div id="fullVideoList">
                                <!-- Full video list -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Page -->
                <div class="page-section" id="analytics-page">
                    <div class="analytics-grid">
                        <div class="metric-card">
                            <div class="metric-label">Avg View Duration</div>
                            <div class="metric-value">4:32</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Click-Through Rate</div>
                            <div class="metric-value">8.4%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Unique Viewers</div>
                            <div class="metric-value">128K</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Returning Viewers</div>
                            <div class="metric-value">42%</div>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Audience Retention</h3>
                        </div>
                        <div class="chart-container">
                            <div class="chart-bars" id="retentionBars"></div>
                        </div>
                    </div>
                </div>

                <!-- Earn Page -->
                <div class="page-section" id="earn-page">
                    <div class="earnings-hero">
                        <div class="earnings-title">Estimated Balance</div>
                        <div class="earnings-amount">$0.00</div>
                        <button class="payout-btn">
                            <i class="fas fa-university"></i>
                            Set Up Payouts
                        </button>
                    </div>

                    <div class="goals-section">
                        <div class="goals-header">
                            <i class="fas fa-trophy"></i>
                            <h3>Join the Bhuban Partner Program</h3>
                        </div>

                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Subscribers</span>
                                <span class="goal-value">750 / 1,000</span>
                            </div>
                            <div class="goal-bar">
                                <div class="goal-fill" style="width: 75%"></div>
                            </div>
                            <div class="goal-status">
                                <i class="fas fa-check-circle"></i>
                                75% toward next milestone
                            </div>
                        </div>

                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Public Watch Hours</span>
                                <span class="goal-value">2,800 / 4,000</span>
                            </div>
                            <div class="goal-bar">
                                <div class="goal-fill" style="width: 70%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comments Page -->
                <div class="page-section" id="comments-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">Recent Comments</h3>
                        </div>
                        <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                            <i class="fas fa-comments" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p>Comments management coming soon...</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div class="page-section" id="settings-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">Channel Settings</h3>
                            <button class="btn-primary" onclick="saveChannelSettings()" style="padding: 10px 20px;">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>

                        <!-- Channel Information -->
                        <div style="padding: 24px;">
                            <div style="margin-bottom: 32px;">
                                <h4
                                    style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                    <i class="fas fa-info-circle"></i> Channel Information
                                </h4>

                                <div style="display: grid; gap: 20px;">
                                    <div>
                                        <label
                                            style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                            Name</label>
                                        <input type="text" id="channelName" placeholder="Enter your channel name"
                                            style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                    </div>

                                    <div>
                                        <label
                                            style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                            Description</label>
                                        <textarea id="channelDescription" placeholder="Tell viewers about your channel"
                                            rows="4"
                                            style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px; resize: vertical;"></textarea>
                                    </div>

                                    <div>
                                        <label
                                            style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                            Email</label>
                                        <input type="email" id="channelEmail" placeholder="contact@example.com"
                                            style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                    </div>
                                </div>
                            </div>

                            <!-- Privacy Settings -->
                            <div style="margin-bottom: 32px;">
                                <h4
                                    style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                    <i class="fas fa-lock"></i> Privacy Settings
                                </h4>

                                <div style="display: grid; gap: 16px;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Make
                                                Channel Public</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Allow anyone to view
                                                your channel and videos</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="channelPublic" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Allow
                                                Comments</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Let viewers comment
                                                on your videos</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="allowComments" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Show
                                                Subscriber Count</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Display your
                                                subscriber count publicly</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="showSubscribers" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Notification Settings -->
                            <div style="margin-bottom: 32px;">
                                <h4
                                    style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                    <i class="fas fa-bell"></i> Notification Settings
                                </h4>

                                <div style="display: grid; gap: 16px;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Email
                                                Notifications</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Receive email
                                                updates about your channel</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="emailNotifications" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">New
                                                Comment Alerts</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Get notified when
                                                someone comments</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="commentAlerts" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">New
                                                Subscriber Alerts</div>
                                            <div style="font-size: 12px; color: var(--text-muted);">Get notified about
                                                new subscribers</div>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="subscriberAlerts" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Default Upload Settings -->
                            <div>
                                <h4
                                    style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                    <i class="fas fa-upload"></i> Default Upload Settings
                                </h4>

                                <div style="display: grid; gap: 20px;">
                                    <div>
                                        <label
                                            style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Default
                                            Video Privacy</label>
                                        <select id="defaultPrivacy"
                                            style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                            <option value="public">Public</option>
                                            <option value="unlisted">Unlisted</option>
                                            <option value="private">Private</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label
                                            style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Default
                                            Category</label>
                                        <select id="defaultCategory"
                                            style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                            <option value="">Select category...</option>
                                            <option value="gaming">Gaming</option>
                                            <option value="music">Music</option>
                                            <option value="education">Education</option>
                                            <option value="entertainment">Entertainment</option>
                                            <option value="tech">Technology</option>
                                            <option value="sports">Sports</option>
                                            <option value="vlog">Vlog</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Studio Page -->
                <div class="page-section" id="ai-studio-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-robot" style="color: var(--accent-orange);"></i> AI Studio
                                <span
                                    style="margin-left: 12px; padding: 4px 12px; background: var(--accent-gradient); border-radius: 16px; font-size: 12px; font-weight: 700;">PRO</span>
                            </h3>
                        </div>

                        <div style="padding: 24px;">
                            <!-- AI Tools Grid -->
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 32px;">
                                <!-- Title Generator -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: var(--accent-gradient); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            âœ¨
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Title Generator</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">AI-powered titles</p>
                                        </div>
                                    </div>
                                    <textarea id="aiTitleInput" placeholder="Describe your video..."
                                        style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px; resize: vertical;"
                                        rows="3"></textarea>
                                    <button onclick="generateAITitles()" class="btn-primary"
                                        style="width: 100%; padding: 12px;">
                                        <i class="fas fa-magic"></i> Generate Titles
                                    </button>
                                    <div id="aiTitleResults" style="margin-top: 16px;"></div>
                                </div>

                                <!-- Tag Generator -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: linear-gradient(135deg, #10b981 0%, #34d399 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            ðŸ·ï¸
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Smart Tags</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">SEO-optimized tags</p>
                                        </div>
                                    </div>
                                    <input type="text" id="aiTagInput" placeholder="Video title..."
                                        style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px;">
                                    <button onclick="generateAITags()" class="btn-primary"
                                        style="width: 100%; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #34d399 100%);">
                                        <i class="fas fa-tags"></i> Generate Tags
                                    </button>
                                    <div id="aiTagResults" style="margin-top: 16px;"></div>
                                </div>

                                <!-- Performance Predictor -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            ðŸ“Š
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Performance Predictor</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">Predict video success
                                            </p>
                                        </div>
                                    </div>
                                    <button onclick="predictPerformance()" class="btn-primary"
                                        style="width: 100%; padding: 12px; background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);">
                                        <i class="fas fa-chart-line"></i> Predict Performance
                                    </button>
                                    <div id="aiPredictionResults" style="margin-top: 16px;"></div>
                                </div>

                                <!-- Thumbnail Analyzer -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            ðŸ–¼ï¸
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Thumbnail Analyzer</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">Optimize thumbnails
                                            </p>
                                        </div>
                                    </div>
                                    <input type="file" id="thumbnailInput" accept="image/*"
                                        style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px;">
                                    <button onclick="analyzeThumbnail()" class="btn-primary"
                                        style="width: 100%; padding: 12px; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);">
                                        <i class="fas fa-search"></i> Analyze Thumbnail
                                    </button>
                                    <div id="thumbnailAnalysisResults" style="margin-top: 16px;"></div>
                                </div>

                                <!-- Trend Analyzer -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            ðŸ”¥
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Trend Analyzer</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">Discover trending
                                                topics</p>
                                        </div>
                                    </div>
                                    <button onclick="analyzeTrends()" class="btn-primary"
                                        style="width: 100%; padding: 12px; background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);">
                                        <i class="fas fa-fire"></i> Analyze Trends
                                    </button>
                                    <div id="trendAnalysisResults" style="margin-top: 16px;"></div>
                                </div>

                                <!-- Description Optimizer -->
                                <div class="ai-tool-card"
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                        <div
                                            style="width: 48px; height: 48px; background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                            ðŸ“
                                        </div>
                                        <div>
                                            <h4 style="font-size: 16px; font-weight: 600;">Description Optimizer</h4>
                                            <p style="font-size: 12px; color: var(--text-muted);">SEO-friendly
                                                descriptions</p>
                                        </div>
                                    </div>
                                    <textarea id="descriptionInput" placeholder="Enter your description..."
                                        style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px; resize: vertical;"
                                        rows="3"></textarea>
                                    <button onclick="optimizeDescription()" class="btn-primary"
                                        style="width: 100%; padding: 12px; background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%);">
                                        <i class="fas fa-magic"></i> Optimize Description
                                    </button>
                                    <div id="descriptionOptimizationResults" style="margin-top: 16px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Smart Scheduler Page -->
                <div class="page-section" id="scheduler-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-calendar-alt" style="color: var(--accent-orange);"></i> Smart Scheduler
                            </h3>
                            <button class="btn-primary" onclick="showScheduleModal()">
                                <i class="fas fa-plus"></i> Schedule Video
                            </button>
                        </div>

                        <div style="padding: 24px;">
                            <!-- Optimal Times -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-clock" style="color: var(--accent-orange);"></i> Optimal Upload
                                    Times
                                </h4>
                                <div id="optimalTimesGrid"
                                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Scheduled Videos -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-list" style="color: var(--accent-orange);"></i> Scheduled Videos
                                </h4>
                                <div id="scheduledVideosList">
                                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                                        <i class="fas fa-calendar-check"
                                            style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                                        <p>No scheduled videos yet</p>
                                        <p style="font-size: 13px; margin-top: 8px;">Schedule your first video to see it
                                            here</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Collaboration Page -->
                <div class="page-section" id="collaboration-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-users" style="color: var(--accent-orange);"></i> Collaboration
                            </h3>
                            <button class="btn-primary" onclick="showInviteModal()">
                                <i class="fas fa-user-plus"></i> Invite Collaborator
                            </button>
                        </div>

                        <div style="padding: 24px;">
                            <!-- Team Members -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-users-cog" style="color: var(--accent-orange);"></i> Team Members
                                </h4>
                                <div id="collaboratorsList">
                                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                                        <i class="fas fa-user-friends"
                                            style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                                        <p>No collaborators yet</p>
                                        <p style="font-size: 13px; margin-top: 8px;">Invite team members to collaborate
                                            on your content</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Pending Invitations -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-envelope" style="color: var(--accent-orange);"></i> Pending
                                    Invitations
                                </h4>
                                <div id="pendingInvitationsList">
                                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                                        <i class="fas fa-paper-plane"
                                            style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                                        <p>No pending invitations</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Library Page -->
                <div class="page-section" id="library-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-folder-open" style="color: var(--accent-orange);"></i> Content Library
                            </h3>
                            <div style="display: flex; gap: 12px;">
                                <button class="btn-primary" onclick="showCreateFolderModal()">
                                    <i class="fas fa-folder-plus"></i> New Folder
                                </button>
                                <button class="btn-primary" onclick="showUploadAssetModal()">
                                    <i class="fas fa-upload"></i> Upload Asset
                                </button>
                            </div>
                        </div>

                        <div style="padding: 24px;">
                            <div id="libraryGrid"
                                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
                                <div
                                    style="text-align: center; padding: 60px 20px; color: var(--text-muted); grid-column: 1 / -1;">
                                    <i class="fas fa-folder"
                                        style="font-size: 64px; margin-bottom: 16px; opacity: 0.3;"></i>
                                    <p>Your content library is empty</p>
                                    <p style="font-size: 13px; margin-top: 8px;">Upload images, videos, and other assets
                                        to organize your content</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- A/B Testing Page -->
                <div class="page-section" id="ab-testing-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-flask" style="color: var(--accent-orange);"></i> A/B Testing
                            </h3>
                            <button class="btn-primary" onclick="showCreateTestModal()">
                                <i class="fas fa-plus"></i> Create Test
                            </button>
                        </div>

                        <div style="padding: 24px;">
                            <div id="abTestsList">
                                <div style="text-align: center; padding: 60px 20px; color: var(--text-muted);">
                                    <i class="fas fa-vial"
                                        style="font-size: 64px; margin-bottom: 16px; opacity: 0.3;"></i>
                                    <p>No A/B tests running</p>
                                    <p style="font-size: 13px; margin-top: 8px;">Test different titles, thumbnails, and
                                        descriptions to optimize performance</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Monetization Pro Page -->
                <div class="page-section" id="monetization-page">
                    <div class="content-card">
                        <div class="content-header">
                            <h3 class="content-title">
                                <i class="fas fa-chart-line" style="color: var(--accent-orange);"></i> Monetization Pro
                            </h3>
                        </div>

                        <div style="padding: 24px;">
                            <!-- Revenue Opportunities -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-lightbulb" style="color: var(--accent-orange);"></i> Revenue
                                    Opportunities
                                </h4>
                                <div id="revenueOpportunities">
                                    <button onclick="analyzeRevenueOpportunities()" class="btn-primary"
                                        style="width: 100%; padding: 16px;">
                                        <i class="fas fa-search-dollar"></i> Analyze Opportunities
                                    </button>
                                </div>
                            </div>

                            <!-- Sponsorship Matches -->
                            <div
                                style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                                    <i class="fas fa-handshake" style="color: var(--accent-orange);"></i> Sponsorship
                                    Matches
                                </h4>
                                <div id="sponsorshipMatches">
                                    <button onclick="findSponsorships()" class="btn-primary"
                                        style="width: 100%; padding: 16px;">
                                        <i class="fas fa-search"></i> Find Sponsorships
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Upload Modal -->
    <!-- Upload Modal - Simplified Working Version -->
    <div class="modal-overlay" id="uploadModal">
        <div class="upload-modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-cloud-upload-alt" style="color: var(--accent-orange); margin-right: 12px;"></i>
                    Upload Video
                </h2>
                <button class="modal-close" onclick="closeUploadModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body" style="display: block; padding: 32px;">
                <!-- Step 1: File Selection -->
                <div id="fileSelectStep" style="display: block;">
                    <div class="upload-dropzone" id="dropzone"
                        onclick="document.getElementById('videoFileInput').click()">
                        <div class="dropzone-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h3 style="font-size: 20px; margin-bottom: 8px;">Click to select video</h3>
                        <p style="color: var(--text-muted); font-size: 14px; margin-top: 16px;">
                            Supported: MP4, WebM, MOV â€¢ Max size: 100MB
                        </p>
                    </div>
                    <input type="file" id="videoFileInput" accept="video/*" style="display: none;">
                </div>

                <!-- Step 2: Video Details (Hidden by default) -->
                <div id="videoDetailsStep"
                    style="display: none; visibility: hidden; opacity: 0; transition: opacity 0.3s ease;">
                    <!-- Selected File Info -->
                    <div
                        style="background: rgba(16, 185, 129, 0.1); border: 2px solid #10b981; border-radius: 12px; padding: 16px; margin-bottom: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <i class="fas fa-check-circle" style="font-size: 32px; color: #10b981;"></i>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 4px;" id="selectedFileName">File selected
                                </div>
                                <div style="font-size: 13px; color: var(--text-muted);" id="selectedFileSize">0 MB</div>
                            </div>
                            <button onclick="changeVideoFile()"
                                style="padding: 8px 16px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; cursor: pointer;">
                                <i class="fas fa-exchange-alt"></i> Change
                            </button>
                        </div>
                    </div>

                    <!-- Title Input -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">
                            <i class="fas fa-heading" style="color: var(--accent-orange); margin-right: 8px;"></i>
                            Title (required)
                        </label>
                        <input type="text" id="uploadVideoTitle" placeholder="Enter a catchy title" maxlength="100"
                            style="width: 100%; padding: 14px; background: var(--bg-card); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-size: 14px;">
                        <div style="text-align: right; font-size: 11px; color: var(--text-muted); margin-top: 4px;"
                            id="uploadTitleCount">0/100</div>
                    </div>

                    <!-- Description Input -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px;">
                            <i class="fas fa-align-left" style="color: var(--accent-orange); margin-right: 8px;"></i>
                            Description
                        </label>
                        <textarea id="uploadVideoDesc" placeholder="Tell viewers about your video..." rows="4"
                            maxlength="500"
                            style="width: 100%; padding: 14px; background: var(--bg-card); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-size: 14px; resize: vertical;"></textarea>
                        <div style="text-align: right; font-size: 11px; color: var(--text-muted); margin-top: 4px;"
                            id="uploadDescCount">0/500</div>
                    </div>

                    <!-- Upload Progress -->
                    <div id="uploadProgressSection"
                        style="display: none; background: var(--bg-card); border-radius: 12px; padding: 20px; margin-top: 20px;">
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: rgba(255,107,53,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: var(--accent-orange);"
                                    id="uploadProgressIcon"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 4px;" id="uploadProgressStatus">
                                    Uploading...</div>
                                <div style="font-size: 24px; font-weight: 800; color: var(--accent-orange);"
                                    id="uploadProgressPercent">0%</div>
                            </div>
                        </div>
                        <div
                            style="height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                            <div id="uploadProgressBar"
                                style="height: 100%; background: linear-gradient(90deg, #ff6b35, #ff006e); width: 0%; transition: width 0.3s;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer" style="display: flex !important;">
                <button class="btn-cancel" onclick="closeUploadModal()" style="display: block !important;">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn-publish" id="uploadPublishBtn" onclick="startVideoUpload()" disabled
                    style="display: block !important;">
                    <i class="fas fa-rocket"></i> Publish Video
                </button>
            </div>
        </div>
    </div>

    <script>
        // Upload Modal - Simple Working Version
        let uploadSelectedFile = null;

        // Initialize upload modal when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            const videoFileInput = document.getElementById('videoFileInput');
            const uploadVideoTitle = document.getElementById('uploadVideoTitle');
            const uploadVideoDesc = document.getElementById('uploadVideoDesc');

            if (videoFileInput) {
                videoFileInput.addEventListener('change', function (e) {
                    console.log('File input changed');
                    const file = e.target.files[0];
                    if (!file) {
                        console.log('No file selected');
                        return;
                    }

                    console.log('File selected:', {
                        name: file.name,
                        size: file.size,
                        type: file.type
                    });

                    if (!file.type.startsWith('video/')) {
                        alert('Please select a video file');
                        return;
                    }

                    if (file.size > 100 * 1024 * 1024) {
                        alert('File must be less than 100MB');
                        return;
                    }

                    uploadSelectedFile = file;

                    console.log('File selected:', file.name, file.size);

                    // Hide file select, show details with forced display
                    const fileSelectStep = document.getElementById('fileSelectStep');
                    const videoDetailsStep = document.getElementById('videoDetailsStep');
                    const publishBtn = document.getElementById('uploadPublishBtn');

                    fileSelectStep.style.display = 'none';
                    videoDetailsStep.style.display = 'block';
                    videoDetailsStep.style.visibility = 'visible';
                    videoDetailsStep.style.opacity = '1';

                    console.log('Steps toggled - fileSelect hidden, videoDetails shown');

                    // Update file info
                    document.getElementById('selectedFileName').textContent = file.name;
                    document.getElementById('selectedFileSize').textContent = (file.size / (1024 * 1024)).toFixed(2) + ' MB';

                    // Auto-fill title
                    const fileName = file.name.replace(/\.[^/.]+$/, "").replace(/[-_]/g, ' ');
                    uploadVideoTitle.value = fileName.charAt(0).toUpperCase() + fileName.slice(1);
                    document.getElementById('uploadTitleCount').textContent = uploadVideoTitle.value.length + '/100';

                    // Enable publish button with forced display
                    publishBtn.disabled = false;
                    publishBtn.style.display = 'block';
                    publishBtn.style.visibility = 'visible';
                    publishBtn.style.opacity = '1';

                    console.log('Publish button enabled:', !publishBtn.disabled);
                });
            }

            // Character counters
            if (uploadVideoTitle) {
                uploadVideoTitle.addEventListener('input', function (e) {
                    document.getElementById('uploadTitleCount').textContent = e.target.value.length + '/100';
                });
            }

            if (uploadVideoDesc) {
                uploadVideoDesc.addEventListener('input', function (e) {
                    document.getElementById('uploadDescCount').textContent = e.target.value.length + '/500';
                });
            }
        });

        function changeVideoFile() {
            document.getElementById('videoFileInput').click();
        }

        function closeUploadModal() {
            const modal = document.getElementById('uploadModal');
            const fileSelectStep = document.getElementById('fileSelectStep');
            const videoDetailsStep = document.getElementById('videoDetailsStep');
            const publishBtn = document.getElementById('uploadPublishBtn');

            modal.classList.remove('active');

            // Reset
            uploadSelectedFile = null;
            fileSelectStep.style.display = 'block';
            videoDetailsStep.style.display = 'none';
            videoDetailsStep.style.visibility = 'hidden';
            videoDetailsStep.style.opacity = '0';

            document.getElementById('uploadVideoTitle').value = '';
            document.getElementById('uploadVideoDesc').value = '';
            document.getElementById('uploadTitleCount').textContent = '0/100';
            document.getElementById('uploadDescCount').textContent = '0/500';

            publishBtn.disabled = true;
            publishBtn.style.display = 'block';

            document.getElementById('uploadProgressSection').style.display = 'none';
            document.getElementById('videoFileInput').value = '';
        }

        async function startVideoUpload() {
            // Validate file using centralized validation
            const validation = BhubanValidate.videoFile(uploadSelectedFile);
            if (!validation.valid) {
                alert(validation.error);
                return;
            }

            const title = document.getElementById('uploadVideoTitle').value.trim();
            if (!title) {
                alert('Please enter a title');
                document.getElementById('uploadVideoTitle').focus();
                return;
            }

            const description = document.getElementById('uploadVideoDesc').value.trim() || 'No description provided';
            const publishBtn = document.getElementById('uploadPublishBtn');
            const progressSection = document.getElementById('uploadProgressSection');
            const progressBar = document.getElementById('uploadProgressBar');
            const progressPercent = document.getElementById('uploadProgressPercent');
            const progressStatus = document.getElementById('uploadProgressStatus');
            const progressIcon = document.getElementById('uploadProgressIcon');

            publishBtn.disabled = true;
            publishBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
            progressSection.style.display = 'block';

            const formData = new FormData();
            formData.append('video', uploadSelectedFile);
            formData.append('title', title);
            formData.append('description', description);

            const xhr = new XMLHttpRequest();

            xhr.upload.addEventListener('progress', (e) => {
                if (e.lengthComputable) {
                    const percent = Math.round((e.loaded / e.total) * 100);
                    progressBar.style.width = percent + '%';
                    progressPercent.textContent = percent + '%';

                    if (percent < 100) {
                        progressStatus.textContent = 'Uploading your video...';
                    } else {
                        progressStatus.textContent = 'Processing...';
                        progressIcon.className = 'fas fa-cog fa-spin';
                    }
                }
            });

            xhr.addEventListener('load', () => {
                console.log('Upload response status:', xhr.status);
                console.log('Upload response:', xhr.responseText);

                if (xhr.status === 201) {
                    progressIcon.className = 'fas fa-check-circle';
                    progressStatus.textContent = 'Upload Complete!';
                    progressBar.style.background = '#10b981';

                    try {
                        const response = JSON.parse(xhr.responseText);
                        console.log('Video created:', response.data);
                    } catch (e) {
                        console.error('Failed to parse response:', e);
                    }

                    alert('âœ… Video uploaded successfully!');
                    setTimeout(() => {
                        closeUploadModal();
                        location.reload();
                    }, 1500);
                } else {
                    let errorMsg = 'Upload failed. Please try again.';
                    try {
                        const response = JSON.parse(xhr.responseText);
                        errorMsg = response.error || response.message || errorMsg;
                        console.error('Upload error response:', response);
                    } catch (e) {
                        console.error('Upload error (raw):', xhr.responseText);
                    }
                    alert('âŒ ' + errorMsg);
                    publishBtn.disabled = false;
                    publishBtn.innerHTML = '<i class="fas fa-rocket"></i> Publish Video';
                    progressSection.style.display = 'none';
                }
            });

            xhr.addEventListener('error', () => {
                alert('âŒ Upload failed. Check your connection and ensure backend is running.');
                publishBtn.disabled = false;
                publishBtn.innerHTML = '<i class="fas fa-rocket"></i> Publish Video';
                progressSection.style.display = 'none';
            });

            // Use centralized API configuration
            xhr.open('POST', BhubanAPI.url(BhubanConfig.api.endpoints.upload));
            // Note: Backend doesn't require auth for video upload currently
            // xhr.setRequestHeader('Authorization', `Bearer ${token}`);
            xhr.send(formData);
        }
    </script>

    <style>
        /* Modern Upload Modal Styles */
        .upload-dropzone {
            border: 3px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            background: var(--bg-card);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 24px;
        }

        .upload-dropzone:hover {
            border-color: var(--accent-orange);
            background: rgba(255, 107, 53, 0.05);
            transform: translateY(-2px);
        }

        .upload-dropzone.has-file {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .dropzone-icon {
            font-size: 64px;
            color: var(--accent-orange);
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .browse-btn {
            padding: 12px 32px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .browse-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .form-section {
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-label i {
            color: var(--accent-orange);
            margin-right: 8px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
        }

        .char-count {
            position: absolute;
            right: 12px;
            bottom: -20px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .upload-progress-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .progress-icon {
            width: 48px;
            height: 48px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--accent-orange);
        }

        .progress-details {
            flex: 1;
        }

        .progress-status {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .progress-percent {
            font-size: 24px;
            font-weight: 800;
            color: var(--accent-orange);
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--accent-gradient);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            padding: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn-cancel {
            flex: 1;
            padding: 14px 24px;
            background: var(--bg-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-publish {
            flex: 2;
            padding: 14px 32px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-publish:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.5);
        }

        .btn-publish:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-publish:active:not(:disabled) {
            transform: translateY(0);
        }
    </style>

    <script>
        console.log('ðŸ”§ Main script loading...');
        
        // ==========================================
        // OPENING ANIMATION
        // ==========================================
        async function playOpeningAnimation() {
            console.log('ðŸŽ¬ Starting opening animation...');
            
            // Safety timeout - force hide overlay after 3 seconds
            const safetyTimeout = setTimeout(() => {
                console.warn('âš ï¸ Animation timeout - forcing overlay hide');
                const overlay = document.getElementById('openingOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }, 3000);

            try {
                const logo = document.getElementById('openingLogo');
                const title = document.getElementById('openingTitle');
                const subtitle = document.getElementById('openingSubtitle');
                const progress = document.getElementById('openingProgress');
                const progressBar = document.getElementById('openingProgressBar');
                const bootText = document.getElementById('bootText');
                const overlay = document.getElementById('openingOverlay');
                const orbitRings = document.querySelectorAll('.orbit-ring');

                // If overlay doesn't exist, skip animation
                if (!overlay) {
                    console.log('âœ… No opening overlay found, skipping animation');
                    clearTimeout(safetyTimeout);
                    return;
                }

                console.log('ðŸŽ¨ Animating logo...');
                const bootMessages = [
                    'Initializing creative engine...',
                    'Loading studio modules...',
                    'Ready to create!'
                ];

                // Activate logo (faster)
                await new Promise(r => setTimeout(r, 200));
                if (logo) logo.classList.add('active');
                orbitRings.forEach((ring, i) => {
                    setTimeout(() => ring.classList.add('active'), i * 100);
                });

                // Activate title (faster)
                await new Promise(r => setTimeout(r, 400));
                if (title) title.classList.add('active');
                if (subtitle) subtitle.classList.add('active');
                if (progress) progress.classList.add('active');
                if (bootText) bootText.classList.add('active');

                console.log('â³ Running progress animation...');
                // Progress animation (much faster)
                for (let i = 0; i <= 100; i += 20) {
                    await new Promise(r => setTimeout(r, 30));
                    if (progressBar) progressBar.style.width = i + '%';
                    const msgIndex = Math.min(Math.floor(i / 40), bootMessages.length - 1);
                    if (bootText) bootText.textContent = bootMessages[msgIndex];
                }

                // Exit animation (faster)
                console.log('âœ¨ Completing animation...');
                await new Promise(r => setTimeout(r, 200));
                overlay.classList.add('hidden');
                await new Promise(r => setTimeout(r, 600));
                overlay.style.display = 'none';
                
                clearTimeout(safetyTimeout);
                console.log('âœ… Opening animation complete!');
            } catch (error) {
                console.error('âŒ Opening animation error:', error);
                clearTimeout(safetyTimeout);
                // Hide overlay immediately if there's an error
                const overlay = document.getElementById('openingOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
        }

        // ==========================================
        // NAVIGATION
        // ==========================================
        function initNavigation() {
            console.log('ðŸ“ Initializing navigation...');
            const navItems = document.querySelectorAll('.nav-item[data-page]');
            const pageSections = document.querySelectorAll('.page-section');
            const pageTitle = document.getElementById('pageTitle');

            console.log(`Found ${navItems.length} nav items, ${pageSections.length} page sections`);
            console.log('Nav items:', Array.from(navItems).map(n => n.dataset.page));
            console.log('Page sections:', Array.from(pageSections).map(p => p.id));

            if (navItems.length === 0) {
                console.error('âŒ No navigation items found! Check HTML structure.');
                return;
            }

            navItems.forEach((item, index) => {
                console.log(`Adding click listener to nav item ${index}: ${item.dataset.page}`);
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    const page = item.dataset.page;
                    console.log(`ðŸ“„ Navigating to: ${page}`);

                    // Update nav active state
                    navItems.forEach(n => n.classList.remove('active'));
                    item.classList.add('active');

                    // Show corresponding page
                    pageSections.forEach(section => {
                        section.classList.remove('active');
                        console.log(`Hiding: ${section.id}`);
                    });
                    
                    const targetPage = document.getElementById(page + '-page');
                    if (targetPage) {
                        targetPage.classList.add('active');
                        console.log(`âœ… Activated page: ${page}-page`);
                    } else {
                        console.error(`âŒ Page not found: ${page}-page`);
                    }

                    // Update title
                    if (pageTitle) {
                        const titleSpan = item.querySelector('span');
                        if (titleSpan) {
                            pageTitle.textContent = titleSpan.textContent;
                        }
                    }
                });
            });
            
            console.log('âœ… Navigation initialized');
        }

        // ==========================================
        // CHART DATA - REAL DATA ONLY
        // ==========================================
        function initCharts() {
            // NO FAKE DATA - Charts will be populated by loadCreatorAnalytics()
            // This function is called on page load but data comes from backend

            // Initialize empty chart containers
            const chartBars = document.getElementById('chartBars');
            const retentionBars = document.getElementById('retentionBars');

            if (chartBars) chartBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Loading chart data...</div>';
            if (retentionBars) retentionBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Loading retention data...</div>';
        }

        // ==========================================
        // VIDEO LIST
        // ==========================================
        // VIDEO LIST - Will be loaded from API
        // ==========================================
        function renderVideoList() {
            const videoList = document.getElementById('videoList');
            const fullVideoList = document.getElementById('fullVideoList');

            // Clear existing content
            if (videoList) videoList.innerHTML = '';
            if (fullVideoList) fullVideoList.innerHTML = '';

            // Use videos from CreatorState (loaded from API)
            const videos = CreatorState.videos;

            if (videos.length === 0) {
                // Show empty state
                if (videoList) {
                    videoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                }
                if (fullVideoList) {
                    fullVideoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                }
                return;
            }

            videos.slice(0, 3).forEach(video => {
                if (videoList) videoList.appendChild(createVideoRow(video));
            });

            videos.forEach(video => {
                if (fullVideoList) fullVideoList.appendChild(createVideoRow(video, true));
            });
        }

        function refreshVideoLists() {
            renderVideoList();
        }

        function createVideoRow(video, full = false) {
            const row = document.createElement('div');
            row.className = 'video-row';
            row.innerHTML = `
                <div class="video-info">
                    <div class="video-thumb">
                        <img src="${video.thumbnail}" alt="${video.title}">
                        <div class="video-thumb-overlay">
                            <i class="fas fa-edit" onclick="editVideo(${video.id})"></i>
                            <i class="fas fa-chart-bar" onclick="videoStats(${video.id})"></i>
                        </div>
                    </div>
                    <div class="video-details">
                        <h4>${video.title}</h4>
                        <p>${full ? video.date : 'Uploaded ' + video.date}</p>
                    </div>
                </div>
                <div>
                    <span class="status-badge ${video.status.toLowerCase()}">
                        <i class="fas fa-${video.status === 'Public' ? 'globe' : 'lock'}"></i>
                        ${video.status}
                    </span>
                </div>
                <div class="video-stats">${video.views}</div>
                <div class="video-stats" style="color: var(--success);">${video.revenue}</div>
                <div class="video-actions">
                    <button class="action-btn" onclick="editVideo(${video.id})" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    ${full ? `<button class="action-btn" onclick="videoStats(${video.id})" title="Stats">
                        <i class="fas fa-chart-bar"></i>
                    </button>` : ''}
                    <button class="action-btn" onclick="deleteVideo(${video.id})" title="Delete" style="color: var(--error);">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            return row;
        }

        // ==========================================
        // UPLOAD MODAL - WORKING VERSION (Keep this one only)
        // ==========================================
        function openUploadModal() {
            const modal = document.getElementById('uploadModal');
            if (modal) {
                modal.classList.add('active');
                console.log('Modal opened');

                // Check if button exists
                const btn = document.getElementById('uploadPublishBtn');
                console.log('Publish button exists:', !!btn);
                if (btn) {
                    console.log('Button disabled:', btn.disabled);
                    console.log('Button display:', window.getComputedStyle(btn).display);
                    console.log('Button visibility:', window.getComputedStyle(btn).visibility);
                }
            }
        }

        // ==========================================
        // GLOBAL STATE
        // ==========================================
        const CreatorState = {
            videos: [], // Will be loaded from API
            stats: {
                subscribers: 0,
                views28Days: 0,
                revenue: 0,
                earnings: 0,
                subGoal: 1000,
                watchHours: 0,
                watchGoal: 4000
            }
        };

        // ==========================================
        // VIDEO ACTIONS - FULLY FUNCTIONAL
        // ==========================================
        function editVideo(id) {
            const video = CreatorState.videos.find(v => v.id === id);
            if (!video) return;

            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px;';
            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 500px; width: 100%; animation: slideUp 0.3s ease;">
                    <h2 style="font-size: 20px; margin-bottom: 20px;"><i class="fas fa-edit" style="color: var(--accent-orange);"></i> Edit Video</h2>
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Title</label>
                        <input type="text" id="editTitle" value="${video.title}" style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: var(--text-primary); font-size: 14px;">
                    </div>
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Visibility</label>
                        <select id="editStatus" style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: var(--text-primary); font-size: 14px;">
                            <option value="Public" ${video.status === 'Public' ? 'selected' : ''}>Public</option>
                            <option value="Draft" ${video.status === 'Draft' ? 'selected' : ''}>Draft</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 12px; margin-top: 24px;">
                        <button onclick="saveVideoEdit(${id})" style="flex: 1; padding: 14px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-weight: 700; cursor: pointer;">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                        <button onclick="this.closest('.modal').remove()" style="padding: 14px 24px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                            Cancel
                        </button>
                    </div>
                </div>
            `;
            modal.className = 'modal';
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
        }

        function saveVideoEdit(id) {
            const title = document.getElementById('editTitle').value;
            const status = document.getElementById('editStatus').value;

            const video = CreatorState.videos.find(v => v.id === id);
            if (video) {
                video.title = title;
                video.status = status;
                saveVideos();
                refreshVideoLists();
                document.querySelector('.modal').remove();
                showNotification('Video updated successfully!', 'success');
            }
        }

        function videoStats(id) {
            const video = CreatorState.videos.find(v => v.id === id);
            if (!video) return;

            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px;';
            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 600px; width: 100%; animation: slideUp 0.3s ease;">
                    <h2 style="font-size: 20px; margin-bottom: 24px;"><i class="fas fa-chart-bar" style="color: var(--accent-orange);"></i> Video Analytics</h2>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--accent-orange);">${video.views.toLocaleString()}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Views</div>
                        </div>
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--success);">$${video.revenue.toFixed(2)}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Revenue</div>
                        </div>
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--accent-cyan);">${video.comments}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Comments</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Audience Retention</h4>
                        <div style="display: flex; align-items: flex-end; gap: 8px; height: 100px;">
                            ${[100, 85, 72, 68, 65, 62, 58, 55, 52, 48].map((h, i) => `
                                <div style="flex: 1; background: linear-gradient(to top, var(--accent-orange), var(--accent-orange-light)); height: ${h}%; border-radius: 4px; opacity: ${0.3 + (i * 0.07)};"></div>
                            `).join('')}
                        </div>
                    </div>
                    <button onclick="this.closest('.modal').remove()" style="width: 100%; padding: 14px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
            modal.className = 'modal';
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
        }

        function deleteVideo(id) {
            if (confirm('Are you sure you want to delete this video? This action cannot be undone.')) {
                CreatorState.videos = CreatorState.videos.filter(v => v.id !== id);
                saveVideos();
                refreshVideoLists();
                showNotification('Video deleted successfully', 'success');
            }
        }

        // ==========================================
        // SEARCH & FILTER - FUNCTIONAL
        // ==========================================
        function initSearch() {
            const searchInputs = document.querySelectorAll('.search-box input, .content-filter input');
            searchInputs.forEach(input => {
                input.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    filterVideos(query);
                });
            });
        }

        function filterVideos(query) {
            const videoRows = document.querySelectorAll('#fullVideoList .video-row, #videoList .video-row');
            videoRows.forEach(row => {
                const title = row.querySelector('.video-details h4')?.textContent.toLowerCase() || '';
                row.style.display = title.includes(query) ? 'grid' : 'none';
            });
        }

        // ==========================================
        // FILTER BUTTONS - FUNCTIONAL
        // ==========================================
        function initFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn, .content-filter .filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const filter = btn.textContent.toLowerCase();

                    // Update active state
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // Filter videos
                    const videoRows = document.querySelectorAll('#fullVideoList .video-row, #videoList .video-row');
                    videoRows.forEach(row => {
                        const statusBadge = row.querySelector('.status-badge');
                        const status = statusBadge?.textContent.toLowerCase() || '';

                        if (filter === 'all') {
                            row.style.display = 'grid';
                        } else {
                            row.style.display = status.includes(filter) ? 'grid' : 'none';
                        }
                    });
                });
            });
        }

        // ==========================================
        // CHART FILTERS - DISABLED (needs backend support for different periods)
        // ==========================================
        function initChartFilters() {
            const chartFilters = document.querySelectorAll('.chart-filter');
            chartFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    chartFilters.forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');

                    const period = filter.textContent;
                    // Show message that this feature needs backend implementation
                    const chartBars = document.getElementById('chartBars');
                    if (chartBars) {
                        chartBars.innerHTML = `
                            <div style="text-align:center; padding:40px; color:var(--text-muted);">
                                <i class="fas fa-info-circle" style="font-size:24px; margin-bottom:12px;"></i>
                                <div>Period filter "${period}" requires backend API support</div>
                                <div style="font-size:12px; margin-top:8px;">Currently showing last 7 days of real data</div>
                            </div>
                        `;
                    }
                });
            });
        }

        // ==========================================
        // EARN PAGE - EDITABLE GOALS
        // ==========================================
        function initEarnPage() {
            // Make earnings editable
            const earningsHero = document.querySelector('.earnings-amount');
            if (earningsHero) {
                earningsHero.style.cursor = 'pointer';
                earningsHero.title = 'Click to update';
                earningsHero.addEventListener('click', () => {
                    const newAmount = prompt('Update estimated balance:', CreatorState.stats.earnings);
                    if (newAmount && !isNaN(newAmount)) {
                        CreatorState.stats.earnings = parseFloat(newAmount);
                        earningsHero.textContent = '$' + CreatorState.stats.earnings.toLocaleString('en-US', { minimumFractionDigits: 2 });
                        saveStats();
                        showNotification('Earnings updated!', 'success');
                    }
                });
            }

            // Make goals editable
            const goalItems = document.querySelectorAll('.goal-item');
            goalItems.forEach((item, index) => {
                item.style.cursor = 'pointer';
                item.addEventListener('click', () => {
                    const isSubGoal = index === 0;
                    const current = isSubGoal ? CreatorState.stats.subscribers : CreatorState.stats.watchHours;
                    const goal = isSubGoal ? CreatorState.stats.subGoal : CreatorState.stats.watchGoal;

                    const newCurrent = prompt(`Update current ${isSubGoal ? 'subscribers' : 'watch hours'}:`, current);
                    if (newCurrent && !isNaN(newCurrent)) {
                        if (isSubGoal) {
                            CreatorState.stats.subscribers = parseInt(newCurrent);
                        } else {
                            CreatorState.stats.watchHours = parseInt(newCurrent);
                        }
                        updateGoalDisplay();
                        saveStats();
                        showNotification('Goal updated!', 'success');
                    }
                });
            });
        }

        function updateGoalDisplay() {
            const subPercentage = (CreatorState.stats.subscribers / CreatorState.stats.subGoal) * 100;
            const watchPercentage = (CreatorState.stats.watchHours / CreatorState.stats.watchGoal) * 100;

            const goalFills = document.querySelectorAll('.goal-fill');
            if (goalFills[0]) goalFills[0].style.width = Math.min(subPercentage, 100) + '%';
            if (goalFills[1]) goalFills[1].style.width = Math.min(watchPercentage, 100) + '%';

            const goalValues = document.querySelectorAll('.goal-value');
            if (goalValues[0]) goalValues[0].textContent = `${CreatorState.stats.subscribers} / ${CreatorState.stats.subGoal}`;
            if (goalValues[1]) goalValues[1].textContent = `${CreatorState.stats.watchHours} / ${CreatorState.stats.watchGoal}`;
        }

        // ==========================================
        // DRAG & DROP UPLOAD
        // ==========================================
        function initDragDrop() {
            const dropzone = document.getElementById('dropzone');
            if (!dropzone) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropzone.addEventListener(eventName, () => dropzone.classList.add('dragover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, () => dropzone.classList.remove('dragover'), false);
            });

            dropzone.addEventListener('drop', handleDrop, false);
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length) {
                handleFileSelect({ target: { files: files } });
            }
        }

        // ==========================================
        // NOTIFICATION SYSTEM
        // ==========================================
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--error)' : 'var(--accent-orange)'};
                color: white;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.4s ease;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'}-circle"></i> ${message}`;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        // ==========================================
        // STORAGE HELPERS
        // ==========================================
        function saveVideos() {
            localStorage.setItem('creator_videos', JSON.stringify(CreatorState.videos));
        }

        function saveStats() {
            localStorage.setItem('creator_stats', JSON.stringify(CreatorState.stats));
        }

        // Global Logout for SSO parity
        function handleGlobalLogout(e) {
            if (e) e.stopPropagation();
            localStorage.clear();
            window.location.href = '/Bhuban%20video%20stream%20app/login.html?logout=true';
        }

        async function loadCreatorProfile() {
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            const userStatus = document.getElementById('userStatus');
            const logoutOption = document.getElementById('logoutOption');

            console.log('ðŸ” Loading creator profile with Unified Auth...');

            // Use Unified Auth System
            const authState = window.UnifiedAuth?.getAuthState() || { isAuthenticated: false };
            console.log('Auth state:', authState);
            
            // Update UI using UnifiedAuth with enhanced elements
            if (window.UnifiedAuth) {
                window.UnifiedAuth.updateUI({
                    userName: userName,
                    userAvatar: userAvatar,
                    authButton: logoutOption
                });
            }
            
            // Enhanced user info display
            if (authState.isAuthenticated && !authState.isGuest) {
                // Display email if available
                if (authState.email && userEmail) {
                    userEmail.textContent = authState.email;
                    userEmail.style.display = 'block';
                }
                
                // Update status with user info
                if (userStatus) {
                    userStatus.textContent = `Creator Account â€¢ ${authState.displayName}`;
                }
                
                // Enhanced avatar display with Google profile photo
                if (authState.profilePhoto && userAvatar) {
                    userAvatar.innerHTML = `<img src="${authState.profilePhoto}" style="width:100%;height:100%;object-fit:cover;border-radius:50%;" alt="${authState.displayName}">`;
                }
            } else {
                // Guest mode setup
                console.log('â„¹ï¸ Setting up guest mode');
                const guestName = 'Guest Creator';
                
                if (userEmail) {
                    userEmail.style.display = 'none';
                }
                
                if (userStatus) {
                    userStatus.textContent = 'Guest Mode â€¢ Sign in to unlock features';
                }
                
                if (window.UnifiedAuth) {
                if (window.UnifiedAuth) {
                    window.UnifiedAuth.setAuthState({
                        token: 'guest-token-' + Date.now(),
                        userId: 'guest-user-id',
                        displayName: guestName,
                        user: {
                            id: 'guest-user-id',
                            name: guestName,
                            displayName: guestName
                        }
                    });
                    
                    // Update UI again
                    window.UnifiedAuth.updateUI({
                        userName: userName,
                        userAvatar: userAvatar,
                        authButton: logoutOption
                    });
                }
            }
            
            // Listen for auth changes
            if (window.UnifiedAuth && window.UnifiedAuth.addEventListener) {
                window.UnifiedAuth.addEventListener((event, data) => {
                    console.log('ðŸ” Auth event:', event, data);
                    if (event === 'login' || event === 'storage-change') {
                        if (window.UnifiedAuth) {
                            window.UnifiedAuth.updateUI({
                                userName: userName,
                                userAvatar: userAvatar,
                                authButton: logoutOption
                            });
                        }
                    }
                });
            }
        }

        function refreshVideoLists() {
            document.getElementById('videoList').innerHTML = '';
            document.getElementById('fullVideoList').innerHTML = '';
            renderVideoList();
        }

        // ==========================================
        // LOAD REAL ANALYTICS FROM BACKEND
        // ==========================================
        async function loadCreatorAnalytics() {
            try {
                // Get user ID from localStorage or use default
                const userId = localStorage.getItem('userId') || '507f1f77bcf86cd799439011';

                const response = await fetch(`http://localhost:5000/api/creator-analytics/dashboard/${userId}?period=30d`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success && result.data) {
                    const data = result.data;

                    // Update overview stats
                    const subscribers = data.overview.subscribers || 0;
                    const totalViews = data.overview.totalViews || 0;
                    const revenue = parseFloat(data.revenue.total) || 0;

                    document.getElementById('subCount').textContent = subscribers > 0 ? subscribers.toLocaleString() : 'No Data';
                    document.getElementById('viewCount').textContent = totalViews > 0 ? (totalViews / 1000).toFixed(1) + 'K' : 'No Data';
                    document.getElementById('revenueAmount').textContent = revenue > 0 ? '$' + revenue.toFixed(2) : '$0.00';

                    // Update CreatorState
                    CreatorState.stats.subscribers = subscribers;
                    CreatorState.stats.views = totalViews;
                    CreatorState.stats.revenue = revenue;

                    // Update charts with real data
                    if (data.recentPerformance && data.recentPerformance.length > 0) {
                        updateChartsWithRealData(data.recentPerformance);
                    } else {
                        // Show "No Data" in charts
                        const chartBars = document.getElementById('chartBars');
                        if (chartBars) {
                            chartBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No performance data available yet</div>';
                        }
                    }

                    // Update video list
                    if (data.topVideos && data.topVideos.length > 0) {
                        CreatorState.videos = data.topVideos;
                        renderVideoList();
                    } else {
                        // Show "No videos" message
                        const videoList = document.getElementById('videoList');
                        const fullVideoList = document.getElementById('fullVideoList');
                        if (videoList) {
                            videoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                        }
                        if (fullVideoList) {
                            fullVideoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                        }
                    }
                } else {
                    throw new Error('Invalid response format');
                }
            } catch (error) {
                console.error('Failed to load creator analytics:', error);
                // Show No Data state when backend is unavailable
                document.getElementById('subCount').textContent = 'No Data';
                document.getElementById('viewCount').textContent = 'No Data';
                document.getElementById('revenueAmount').textContent = '$0.00';

                // Show "Backend Offline" in charts
                const chartBars = document.getElementById('chartBars');
                if (chartBars) {
                    chartBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Backend offline. Start the server to see data.</div>';
                }

                // Show "Backend Offline" in video list
                const videoList = document.getElementById('videoList');
                const fullVideoList = document.getElementById('fullVideoList');
                if (videoList) {
                    videoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Backend offline. Start the server to see videos.</div>';
                }
                if (fullVideoList) {
                    fullVideoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Backend offline. Start the server to see videos.</div>';
                }
            }
        }

        function updateChartsWithRealData(performanceData) {
            if (!performanceData || performanceData.length === 0) {
                return;
            }

            // Update views chart
            const chartBars = document.getElementById('chartBars');
            if (chartBars) {
                chartBars.innerHTML = '';
                const maxViews = Math.max(...performanceData.map(d => d.views));

                performanceData.slice(-7).forEach(day => {
                    const height = maxViews > 0 ? (day.views / maxViews) * 100 : 0;
                    const date = new Date(day.date);
                    const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });

                    const barWrapper = document.createElement('div');
                    barWrapper.className = 'chart-bar-wrapper';
                    barWrapper.innerHTML = `
                        <div class="chart-bar" style="height: ${height}%"></div>
                        <span class="chart-label">${dayName}</span>
                    `;
                    chartBars.appendChild(barWrapper);
                });
            }
        }

        // ==========================================
        // REAL-TIME STATS - REAL DATA ONLY
        // ==========================================
        function initLiveStats() {
            // NO FAKE DATA - All stats come from backend
            // Initial load
            loadCreatorAnalytics();

            // Auto-refresh every 60 seconds
            setInterval(() => {
                loadCreatorAnalytics();
            }, 60000);
        }

        // ==========================================
        // HEALTH MONITORING
        // ==========================================
        function updateHealthStatus() {
            const healthData = {
                status: 'healthy',
                lastPing: Date.now(),
                activeUsers: 1,
                uploadsInProgress: CreatorState.videos.filter(v => v.status === 'Processing').length,
                totalVideos: CreatorState.videos.length
            };
            localStorage.setItem('bhuban_creator_health', JSON.stringify(healthData));
        }

        setInterval(updateHealthStatus, 10000);
        updateHealthStatus();

        // ==========================================
        // INITIALIZATION
        // ==========================================
        // ADVANCED FEATURES - AI STUDIO
        // ==========================================
        async function generateAITitles() {
            const input = document.getElementById('aiTitleInput').value;
            if (!input) {
                showNotification('Please enter a video description', 'error');
                return;
            }

            const resultsDiv = document.getElementById('aiTitleResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Generating titles...</div>';

            const titles = await aiAssistant.generateTitleSuggestions(input);

            resultsDiv.innerHTML = titles.map((title, i) => `
                <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;">
                    <span style="font-size: 13px;">${title}</span>
                    <button onclick="copyToClipboard('${title.replace(/'/g, "\\'")}')" style="padding: 6px 12px; background: var(--accent-gradient); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 12px;">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            `).join('');
        }

        async function generateAITags() {
            const input = document.getElementById('aiTagInput').value;
            if (!input) {
                showNotification('Please enter a video title', 'error');
                return;
            }

            const resultsDiv = document.getElementById('aiTagResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Generating tags...</div>';

            const tags = await aiAssistant.generateTags(input, '');

            resultsDiv.innerHTML = `
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;">
                    ${tags.map(tag => `
                        <span style="padding: 6px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; font-size: 12px;">
                            ${tag}
                        </span>
                    `).join('')}
                </div>
            `;
        }

        async function predictPerformance() {
            const resultsDiv = document.getElementById('aiPredictionResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing...</div>';

            const prediction = await aiAssistant.predictPerformance({});

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Estimated Views</div>
                        <div style="font-size: 18px; font-weight: 600; color: var(--accent-orange);">${prediction.estimatedViews.toLocaleString()}</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Engagement Rate</div>
                        <div style="font-size: 18px; font-weight: 600; color: #10b981;">${prediction.estimatedEngagement}%</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Confidence</div>
                        <div style="font-size: 18px; font-weight: 600;">${prediction.confidence}%</div>
                    </div>
                </div>
            `;
        }

        async function analyzeThumbnail() {
            const input = document.getElementById('thumbnailInput');
            if (!input.files || !input.files[0]) {
                showNotification('Please select a thumbnail image', 'error');
                return;
            }

            const resultsDiv = document.getElementById('thumbnailAnalysisResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing thumbnail...</div>';

            const analysis = await performanceOptimizer.analyzeThumbnail(input.files[0]);

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 12px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">Thumbnail Score</div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: ${analysis.score}%; height: 100%; background: var(--accent-gradient);"></div>
                            </div>
                            <span style="font-size: 18px; font-weight: 600;">${analysis.score}/100</span>
                        </div>
                    </div>
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Suggestions:</div>
                        ${analysis.suggestions.map(s => `
                            <div style="padding: 8px 0; font-size: 12px; color: var(--text-secondary);">
                                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-right: 8px;"></i>${s}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        async function analyzeTrends() {
            const resultsDiv = document.getElementById('trendAnalysisResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing trends...</div>';

            const trends = await aiAssistant.analyzeTrends();

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px;">ðŸ”¥ Trending Topics</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            â€¢ AI & Machine Learning<br>
                            â€¢ Gaming Tutorials<br>
                            â€¢ Tech Reviews<br>
                            â€¢ Productivity Tips
                        </div>
                    </div>
                </div>
            `;
        }

        async function optimizeDescription() {
            const input = document.getElementById('descriptionInput').value;
            if (!input) {
                showNotification('Please enter a description', 'error');
                return;
            }

            const resultsDiv = document.getElementById('descriptionOptimizationResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Optimizing...</div>';

            const result = await aiAssistant.optimizeDescription(input);

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 12px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">SEO Score</div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: ${result.score}%; height: 100%; background: linear-gradient(135deg, #10b981 0%, #34d399 100%);"></div>
                            </div>
                            <span style="font-size: 18px; font-weight: 600;">${result.score}/100</span>
                        </div>
                    </div>
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Suggestions:</div>
                        ${result.suggestions.map(s => `
                            <div style="padding: 8px 0; font-size: 12px; color: var(--text-secondary);">
                                <i class="fas fa-lightbulb" style="color: #f59e0b; margin-right: 8px;"></i>${s}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copied to clipboard!', 'success');
            });
        }

        // ==========================================
        // SMART SCHEDULER
        // ==========================================
        async function loadOptimalTimes() {
            if (!window.smartScheduler) {
                console.warn('âš ï¸ Smart Scheduler not loaded yet');
                return;
            }
            
            const times = await window.smartScheduler.getOptimalUploadTimes();
            const grid = document.getElementById('optimalTimesGrid');

            grid.innerHTML = times.map(time => {
                const date = new Date(time.date);
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                return `
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${dayName}</div>
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">${timeStr}</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="flex: 1; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                                <div style="width: ${time.score}%; height: 100%; background: var(--accent-gradient);"></div>
                            </div>
                            <span style="font-size: 11px; font-weight: 600;">${time.score}%</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showScheduleModal() {
            showNotification('Schedule feature coming soon!', 'info');
        }

        // ==========================================
        // MONETIZATION PRO
        // ==========================================
        async function analyzeRevenueOpportunities() {
            const div = document.getElementById('revenueOpportunities');
            div.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing...</div>';

            const opportunities = await window.monetizationOptimizer.analyzeRevenueOpportunities();

            div.innerHTML = opportunities.recommendations.map(opp => `
                <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px; text-transform: capitalize;">${opp.type}</h5>
                            <p style="font-size: 12px; color: var(--text-muted);">${opp.description}</p>
                        </div>
                        <span style="padding: 4px 12px; background: var(--accent-gradient); border-radius: 12px; font-size: 11px; font-weight: 700; white-space: nowrap;">${opp.potential}</span>
                    </div>
                    <div style="display: flex; gap: 16px; font-size: 12px;">
                        <div>
                            <span style="color: var(--text-muted);">Effort:</span>
                            <span style="font-weight: 600; margin-left: 4px;">${opp.effort}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function findSponsorships() {
            const div = document.getElementById('sponsorshipMatches');
            div.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Finding matches...</div>';

            const matches = await window.monetizationOptimizer.getSponsorshipMatches();

            div.innerHTML = matches.map(match => `
                <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">${match.brand}</h5>
                            <p style="font-size: 12px; color: var(--text-muted);">${match.category}</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--accent-orange);">${match.budget}</div>
                            <div style="font-size: 11px; color: var(--text-muted);">Match: ${match.match}%</div>
                        </div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 12px;">${match.requirements}</div>
                    <button class="btn-primary" style="width: 100%; padding: 10px; font-size: 13px;">
                        <i class="fas fa-handshake"></i> Apply Now
                    </button>
                </div>
            `).join('');
        }

        // ==========================================
        // COLLABORATION & LIBRARY PLACEHOLDERS
        // ==========================================
        function showInviteModal() {
            showNotification('Collaboration feature coming soon!', 'info');
        }

        function showCreateFolderModal() {
            showNotification('Folder creation coming soon!', 'info');
        }

        function showUploadAssetModal() {
            showNotification('Asset upload coming soon!', 'info');
        }

        function showCreateTestModal() {
            showNotification('A/B testing feature coming soon!', 'info');
        }

        // ==========================================
        // CHANNEL SETTINGS FUNCTIONS
        // ==========================================
        function saveChannelSettings() {
            console.log('ðŸ’¾ Saving channel settings...');

            try {
                const settings = {
                    channelName: document.getElementById('channelName').value,
                    channelDescription: document.getElementById('channelDescription').value,
                    channelEmail: document.getElementById('channelEmail').value,
                    channelPublic: document.getElementById('channelPublic').checked,
                    allowComments: document.getElementById('allowComments').checked,
                    showSubscribers: document.getElementById('showSubscribers').checked,
                    emailNotifications: document.getElementById('emailNotifications').checked,
                    commentAlerts: document.getElementById('commentAlerts').checked,
                    subscriberAlerts: document.getElementById('subscriberAlerts').checked,
                    defaultPrivacy: document.getElementById('defaultPrivacy').value,
                    defaultCategory: document.getElementById('defaultCategory').value
                };

                // Save to localStorage
                localStorage.setItem('bhuban_channel_settings', JSON.stringify(settings));

                // Show success message
                showNotification('Settings saved successfully!', 'success');

                console.log('âœ… Channel settings saved:', settings);
            } catch (error) {
                console.error('âŒ Error saving settings:', error);
                showNotification('Failed to save settings', 'error');
            }
        }

        function loadChannelSettings() {
            console.log('ðŸ“¥ Loading channel settings...');

            try {
                const savedSettings = localStorage.getItem('bhuban_channel_settings');

                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);

                    // Load text inputs
                    if (settings.channelName) document.getElementById('channelName').value = settings.channelName;
                    if (settings.channelDescription) document.getElementById('channelDescription').value = settings.channelDescription;
                    if (settings.channelEmail) document.getElementById('channelEmail').value = settings.channelEmail;

                    // Load checkboxes
                    document.getElementById('channelPublic').checked = settings.channelPublic !== false;
                    document.getElementById('allowComments').checked = settings.allowComments !== false;
                    document.getElementById('showSubscribers').checked = settings.showSubscribers !== false;
                    document.getElementById('emailNotifications').checked = settings.emailNotifications !== false;
                    document.getElementById('commentAlerts').checked = settings.commentAlerts !== false;
                    document.getElementById('subscriberAlerts').checked = settings.subscriberAlerts !== false;

                    // Load selects
                    if (settings.defaultPrivacy) document.getElementById('defaultPrivacy').value = settings.defaultPrivacy;
                    if (settings.defaultCategory) document.getElementById('defaultCategory').value = settings.defaultCategory;

                    console.log('âœ… Channel settings loaded:', settings);
                } else {
                    console.log('â„¹ï¸ No saved settings found, checking Google Account fallback...');
                    const userJson = localStorage.getItem('user');
                    if (userJson) {
                        const user = JSON.parse(userJson);
                        if (user.name || user.displayName) document.getElementById('channelName').value = user.name || user.displayName;
                        if (user.email) document.getElementById('channelEmail').value = user.email;
                    }
                }
            } catch (error) {
                console.error('âŒ Error loading settings:', error);
            }
        }

        // ==========================================
        // INITIALIZATION
        // ==========================================
        console.log('ðŸ“¦ Defining initializeApp function...');
        
        function initializeApp() {
            console.log('ðŸš€ Creator Studio initializing...');
            
            try {
                loadCreatorProfile(); // SSO Automatic Login
                initNavigation();
                initCharts();
                initChartFilters();
                renderVideoList();
                initSearch();
                initFilters();
                initEarnPage();
                initDragDrop();
                initLiveStats();
                updateGoalDisplay();
                loadChannelSettings(); // Load saved channel settings
                
                // Load optimal times with delay to ensure advanced features are loaded
                setTimeout(() => {
                    try {
                        loadOptimalTimes();
                    } catch (err) {
                        console.warn('âš ï¸ Could not load optimal times:', err);
                    }
                }, 500);
            } catch (error) {
                console.error('âŒ Initialization error:', error);
            }
        }

        // Try both DOMContentLoaded and immediate execution
        console.log('ðŸ” Checking document.readyState:', document.readyState);
        
        if (document.readyState === 'loading') {
            console.log('â³ Document still loading, waiting for DOMContentLoaded...');
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            // DOM already loaded, run immediately
            console.log('âš¡ DOM already loaded, initializing immediately...');
            initializeApp();
        }

        // Close modals on backdrop click
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.remove();
            }
        });

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    }
    </script>
</body>

</html>