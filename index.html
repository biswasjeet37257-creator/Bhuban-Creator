<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Bhuban Creator Studio v2.1</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="/shared/config.js?v=13.0"></script>
    <script src="/shared/pathway-manager.js?v=13.0"></script>
    <script src="/shared/pathway-monitor.js?v=13.0"></script>
    <script src="/shared/unified-auth-system.js?v=15.0"></script>
    <script src="/shared/auth-service.js"></script>
    <script src="http://localhost:5000/api-service.js"></script>
    <script src="creator-studio-main.js?v=2.0"></script>
    <script>
        // Wait for AuthService to be ready before checking auth
        window.addEventListener('load', () => {
            // Check if user is logged in after all scripts have loaded
            if (typeof AuthService !== 'undefined' && !AuthService.isAuthenticated()) {
                const currentUrl = window.location.href;
                console.log('⚠️ Not authenticated, redirecting to login...');
                // Use absolute path from root
                const loginUrl = window.location.origin + '/Bhuban%20video%20stream%20app/login.html?redirect=' + encodeURIComponent(currentUrl);
                window.location.href = loginUrl;
            }
        });

        // Initialize UI
        document.addEventListener('DOMContentLoaded', () => {
            const user = AuthService.getUser();
            if (user) {
                console.log('✅ User loaded in Creator Studio:', user);

                // Update workspace name
                const workspaceName = document.querySelector('.workspace-name');
                if (workspaceName) workspaceName.textContent = user.name + "'s Studio";

                // Update channel link with user ID
                const channelLink = document.getElementById('viewChannelLink');
                if (channelLink && user._id) {
                    const baseUrl = (window.BHUBAN_CONFIG && window.BHUBAN_CONFIG.app && window.BHUBAN_CONFIG.app.frontend)
                        ? window.BHUBAN_CONFIG.app.frontend
                        : 'http://localhost:5000';
                    channelLink.href = `${baseUrl}/channel.html?id=${user._id}`;
                    console.log('✅ Channel link updated:', channelLink.href);
                }

                // Update avatar
                const userAvatar = document.querySelector('.user-avatar');
                if (userAvatar) {
                    const avatarUrl = user.avatar || user.picture;
                    if (avatarUrl && avatarUrl !== 'undefined' && avatarUrl !== 'null') {
                        const img = document.createElement('img');
                        img.src = avatarUrl;
                        img.style.cssText = 'width:100%;height:100%;object-fit:cover;border-radius:50%;';
                        img.onerror = function () {
                            // Remove image and show initials
                            userAvatar.innerHTML = '';
                            userAvatar.textContent = user.name ? user.name.charAt(0).toUpperCase() : 'B';
                            userAvatar.style.display = 'flex';
                            userAvatar.style.alignItems = 'center';
                            userAvatar.style.justifyContent = 'center';
                            userAvatar.style.background = 'var(--accent-gradient)';
                            userAvatar.style.color = 'white';
                            userAvatar.style.fontWeight = 'bold';
                        };
                        userAvatar.innerHTML = '';
                        userAvatar.appendChild(img);
                    } else {
                        userAvatar.textContent = user.name ? user.name.charAt(0).toUpperCase() : 'B';
                        userAvatar.style.display = 'flex';
                        userAvatar.style.alignItems = 'center';
                        userAvatar.style.justifyContent = 'center';
                        userAvatar.style.background = 'var(--accent-gradient)';
                        userAvatar.style.color = 'white';
                        userAvatar.style.fontWeight = 'bold';
                    }
                }
            }
        });

        // Global logout
        function logout() {
            AuthService.logout();
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1e1e1e;
            --bg-card: #252525;
            --bg-hover: #2a2a2a;
            --accent-orange: #FF4500;
            --accent-orange-light: #ff6b35;
            --accent-gradient: linear-gradient(135deg, #FF4500 0%, #ff6b35 100%);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: rgba(255, 69, 0, 0.2);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glow-orange: rgba(255, 69, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* ==========================================
           LAYOUT
           ========================================== */
        .app-container {
            display: flex;
            min-height: 100vh;
            opacity: 1;
            /* Always visible */
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-logo {
            width: 40px;
            height: 40px;
            background: var(--accent-gradient);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            animation: logoPulse 3s ease-in-out infinite;
        }

        .brand-text h1 {
            font-size: 20px;
            font-weight: 900;
            letter-spacing: -0.5px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .brand-text p {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            margin-bottom: 4px;
            border-radius: 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(255, 69, 0, 0.15);
            color: var(--accent-orange);
            border-right: 3px solid var(--accent-orange);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            background: var(--bg-hover);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .user-subs {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            height: 70px;
            background: rgba(15, 15, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-title {
            font-size: 20px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 10px 16px;
            width: 280px;
        }

        .search-box i {
            color: var(--text-muted);
        }

        .search-box input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .upload-btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 69, 0, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 69, 0, 0.5);
        }

        .header-btn {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .header-btn:hover {
            border-color: var(--accent-orange);
            color: var(--accent-orange);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-color);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-growth {
            font-size: 12px;
            font-weight: 700;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .stat-subtext {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Chart Section */
        .chart-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
        }

        .chart-filters {
            display: flex;
            gap: 8px;
        }

        .chart-filter {
            padding: 8px 16px;
            border-radius: 50px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-filter:hover,
        .chart-filter.active {
            background: var(--accent-gradient);
            color: white;
        }

        .chart-container {
            height: 280px;
            position: relative;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 220px;
            gap: 12px;
            padding-top: 20px;
        }

        .chart-bar-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .chart-bar {
            width: 100%;
            background: var(--accent-gradient);
            border-radius: 8px 8px 0 0;
            min-height: 20px;
            position: relative;
            transition: all 0.4s ease;
            animation: barGrow 1s ease-out;
        }

        .chart-bar:hover {
            filter: brightness(1.2);
            transform: scaleY(1.05);
        }

        @keyframes barGrow {
            from {
                transform: scaleY(0);
            }

            to {
                transform: scaleY(1);
            }
        }

        .chart-label {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Content Table */
        .content-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            overflow: hidden;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .content-title {
            font-size: 18px;
            font-weight: 700;
        }

        .content-filter {
            display: flex;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: transparent;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--accent-gradient);
            border-color: transparent;
            color: white;
        }

        .video-table {
            width: 100%;
        }

        .table-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 0.5fr;
            padding: 16px 24px;
            background: var(--bg-card);
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
        }

        .video-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 0.5fr;
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            align-items: center;
            transition: all 0.3s ease;
        }

        .video-row:hover {
            background: var(--bg-hover);
        }

        .video-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .video-thumb {
            width: 120px;
            height: 68px;
            background: var(--bg-card);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .video-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-thumb-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .video-row:hover .video-thumb-overlay {
            opacity: 1;
        }

        .video-thumb-overlay i {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-thumb-overlay i:hover {
            background: var(--accent-orange);
        }

        .video-details h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .video-details p {
            font-size: 12px;
            color: var(--text-muted);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-badge.public {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .status-badge.draft {
            background: rgba(100, 100, 100, 0.15);
            color: var(--text-muted);
        }

        .video-stats {
            font-size: 13px;
            font-weight: 600;
        }

        .video-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: var(--accent-orange);
            color: white;
        }

        /* Content Tabs & Checkboxes */
        .content-tabs {
            display: flex;
            gap: 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin: 20px 0 24px;
            padding: 0 8px;
        }

        .content-tab {
            padding: 12px 0;
            background: none;
            border: none;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .content-tab:hover {
            color: var(--text-primary);
        }

        .content-tab.active {
            color: var(--text-primary);
        }

        .content-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 3px 3px 0 0;
        }

        .video-checkbox-col {
            width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .custom-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--text-muted);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .custom-checkbox.checked {
            background: var(--accent-orange);
            border-color: var(--accent-orange);
        }

        .custom-checkbox.checked::after {
            content: '\f00c';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: white;
            font-size: 10px;
        }

        /* Update video-table layout for checkbox column */
        .table-header,
        .video-row {
            grid-template-columns: 40px 2.5fr 1fr 1fr 1fr 1fr 1fr 1fr !important;
            align-items: center;
        }

        /* Analytics Tabs & Audience Styles */
        .analytics-tabs {
            display: flex;
            gap: 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 32px;
            padding: 0 8px;
        }

        .analytics-tab {
            padding: 16px 0;
            background: none;
            border: none;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            text-transform: capitalize;
        }

        .analytics-tab:hover {
            color: var(--text-primary);
        }

        .analytics-tab.active {
            color: var(--accent-orange);
        }

        .analytics-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 3px 3px 0 0;
        }

        .audience-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .audience-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
        }

        .audience-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .audience-card-title {
            font-size: 16px;
            font-weight: 700;
        }

        .audience-card-subtitle {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        /* Heatmap Styles */
        .heatmap-container {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 12px;
        }

        .heatmap-labels {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-muted);
            padding: 20px 0;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .heatmap-col {
            display: grid;
            grid-template-rows: repeat(24, 1fr);
            gap: 2px;
        }

        .heatmap-cell {
            height: 12px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.05);
        }

        .heatmap-cell.level-1 {
            background: rgba(255, 69, 0, 0.1);
        }

        .heatmap-cell.level-2 {
            background: rgba(255, 69, 0, 0.3);
        }

        .heatmap-cell.level-3 {
            background: rgba(255, 69, 0, 0.5);
        }

        .heatmap-cell.level-4 {
            background: rgba(255, 69, 0, 0.8);
        }

        .heatmap-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 8px;
            text-align: center;
            font-size: 10px;
            color: var(--text-muted);
        }

        /* Progress List Styles */
        .progress-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .progress-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .progress-label-row {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
        }

        .progress-bar-bg {
            height: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 4px;
        }

        .age-gender-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .age-label {
            width: 80px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .gender-bar-wrapper {
            flex: 1;
            display: flex;
            gap: 1px;
            height: 24px;
            border-radius: 4px;
            overflow: hidden;
        }

        /* Audience Behavior & Content Engagement Styles */
        .behavior-bar {
            height: 12px;
            display: flex;
            border-radius: 6px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            margin: 20px 0;
        }

        .behavior-segment {
            height: 100%;
            transition: width 0.3s ease;
        }

        .segment-new {
            background: #667eea;
        }

        .segment-casual {
            background: #764ba2;
        }

        .segment-regular {
            background: var(--accent-orange);
        }

        .behavior-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        /* Analytics Realtime & Content Sub-tabs */
        .analytics-main-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 24px;
            align-items: start;
        }

        .realtime-sidebar {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
        }

        .realtime-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .realtime-live-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--success);
            font-size: 13px;
            font-weight: 600;
        }

        .realtime-views {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .realtime-stat-label {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .realtime-chart {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 48px;
            margin-bottom: 24px;
        }

        .realtime-bar {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1px;
            min-width: 4px;
        }

        .realtime-bar.active {
            background: #60a5fa;
        }

        .realtime-content-item {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .realtime-thumb {
            width: 48px;
            height: 27px;
            border-radius: 2px;
            object-fit: cover;
        }

        .realtime-info {
            flex: 1;
            min-width: 0;
        }

        .realtime-title {
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .realtime-count {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Content Sub-tabs (Inside Analytics) */
        .content-sub-nav {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            padding-bottom: 12px;
        }

        .content-sub-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .content-sub-btn.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .content-sub-btn:hover {
            color: var(--text-primary);
        }

        /* Metric Detail Cards (Image 1 style) */
        .metric-detail-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .metric-detail-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .metric-detail-card:hover,
        .metric-detail-card.active {
            border-color: #60a5fa;
        }

        .metric-detail-label {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .metric-detail-value {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .metric-detail-growth {
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            margin-top: 4px;
        }

        /* Customization Page Styles */
        .customization-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .customization-tabs {
            display: flex;
            gap: 24px;
        }

        .customization-tab {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            padding-bottom: 12px;
            position: relative;
        }

        .customization-tab.active {
            color: var(--accent-orange);
        }

        .customization-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 2px;
        }

        .customization-section {
            margin-bottom: 40px;
        }

        .customization-section-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .customization-section-desc {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .customization-input-group {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            position: relative;
        }

        .customization-input-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .customization-input {
            width: 100%;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            padding: 4px 0;
            outline: none;
        }

        .customization-links-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .customization-link-row {
            display: grid;
            grid-template-columns: 40px 1fr 1.5fr 40px;
            gap: 12px;
            align-items: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }

        .drag-handle {
            color: var(--text-muted);
            cursor: grab;
            text-align: center;
        }

        .add-link-btn {
            background: none;
            border: none;
            color: var(--accent-orange);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
            padding: 8px 0;
        }

        .watermark-upload-area {
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }

        .watermark-preview {
            width: 150px;
            height: 150px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .watermark-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .watermark-controls {
            flex: 1;
        }

        .watermark-hint {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .publish-actions {
            display: flex;
            gap: 12px;
        }

        .channel-url-box {
            display: flex;
            align-items: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 24px;
        }

        .channel-url-text {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .copy-url-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            transition: color 0.2s;
        }

        .copy-url-btn:hover {
            color: var(--text-primary);
        }

        .source-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .source-percent {
            font-size: 13px;
            font-weight: 600;
            text-align: right;
        }

        .popular-video-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .popular-video-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .pop-video-thumb {
            width: 48px;
            height: 27px;
            border-radius: 4px;
            object-fit: cover;
        }

        .pop-video-info {
            flex: 1;
            min-width: 0;
        }

        .pop-video-title {
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .pop-video-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            overflow: hidden;
        }

        .pop-video-fill {
            height: 100%;
            background: rgba(118, 75, 162, 0.5);
            border-radius: 2px;
        }

        /* Upload Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Create Dropdown Styles */
        .create-dropdown {
            position: absolute;
            top: 60px;
            right: 150px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            width: 200px;
            z-index: 1001;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            display: none;
            overflow: hidden;
        }

        .create-dropdown.active {
            display: block;
            animation: fadeIn 0.2s ease;
        }

        .create-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .create-dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .create-dropdown-item i {
            width: 20px;
            text-align: center;
            color: var(--text-muted);
        }

        /* Stepper Styles */
        .upload-stepper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            margin-bottom: 32px;
            position: relative;
        }

        .stepper-track {
            position: absolute;
            top: 12px;
            left: 60px;
            right: 60px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }

        .stepper-item {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .stepper-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .stepper-item.active .stepper-circle {
            background: var(--text-primary);
            border-color: var(--text-primary);
            color: var(--bg-secondary);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1);
        }

        .stepper-item.completed .stepper-circle {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .stepper-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stepper-item.active .stepper-label {
            color: var(--text-primary);
        }

        /* Upload Modal Layout */
        .upload-grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 32px;
        }

        .upload-preview-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .preview-video-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: black;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
        }

        .preview-info {
            padding: 16px;
            background: rgba(255, 255, 255, 0.02);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .preview-link-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-secondary);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .upload-radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .upload-radio-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
        }

        .upload-radio-item input {
            margin-top: 4px;
        }

        .upload-radio-label {
            font-size: 14px;
            line-height: 1.5;
        }

        .modal-body {
            padding: 24px 32px;
            max-height: 75vh;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .upload-modal {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--bg-card);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--error);
            color: white;
        }

        .modal-body {
            padding: 32px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .upload-dropzone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 60px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-dropzone:hover,
        .upload-dropzone.dragover {
            border-color: var(--accent-orange);
            background: rgba(255, 69, 0, 0.05);
        }

        .upload-dropzone i {
            font-size: 48px;
            color: var(--accent-orange);
            margin-bottom: 16px;
        }

        .upload-dropzone h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .upload-dropzone p {
            font-size: 13px;
            color: var(--text-muted);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
        }

        .form-input,
        .form-textarea {
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 14px 16px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(255, 69, 0, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .upload-preview {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .preview-box {
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--text-muted);
        }

        .upload-progress {
            margin-top: auto;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--glow-orange);
        }

        .modal-footer {
            padding: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 20px rgba(255, 69, 0, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 69, 0, 0.5);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 26px;
            flex-shrink: 0;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: 0.3s;
            border-radius: 26px;
            border: 1px solid var(--border-color);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: var(--accent-gradient);
            border-color: var(--accent-orange);
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(22px);
        }

        .toggle-switch input:disabled+.toggle-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-body {
                grid-template-columns: 1fr;
            }

            .upload-dropzone {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .table-header,
            .video-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 69, 0, 0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-orange);
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        /* Analytics Specific */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--accent-orange);
            margin: 8px 0;
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Earn Page */
        .earnings-hero {
            background: linear-gradient(135deg, rgba(255, 69, 0, 0.2), rgba(255, 107, 53, 0.1));
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }

        .earnings-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 69, 0, 0.3), transparent 70%);
            pointer-events: none;
        }

        .earnings-title {
            font-size: 14px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        .earnings-amount {
            font-size: 56px;
            font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .payout-btn {
            margin-top: 24px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .payout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 69, 0, 0.4);
        }

        .goals-section {
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
        }

        .goals-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .goals-header i {
            color: var(--accent-orange);
            font-size: 24px;
        }

        .goal-item {
            margin-bottom: 24px;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .goal-label {
            font-size: 14px;
            font-weight: 600;
        }

        .goal-value {
            font-size: 13px;
            color: var(--text-muted);
        }

        .goal-bar {
            height: 10px;
            background: var(--bg-card);
            border-radius: 5px;
            overflow: hidden;
        }

        .goal-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 5px;
            transition: width 1s ease;
            box-shadow: 0 0 10px var(--glow-orange);
        }

        .goal-status {
            font-size: 12px;
            color: var(--success);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>

<body>
    <script>console.log('✅ BODY SCRIPT RUNNING - JavaScript is working!');</script>

    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand">
                    <div class="brand-logo">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="brand-text">
                        <h1>BHUBAN</h1>
                        <p>Creator Studio</p>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-page="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-page="content">
                    <i class="fas fa-play-circle"></i>
                    <span>Content</span>
                </button>
                <button class="nav-item" data-page="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-item" data-page="comments">
                    <i class="fas fa-comment-alt"></i>
                    <span>Comments</span>
                </button>
                <button class="nav-item" data-page="subtitles">
                    <i class="far fa-closed-captioning"></i>
                    <span>Subtitles</span>
                </button>
                <button class="nav-item" data-page="copyright">
                    <i class="far fa-copyright"></i>
                    <span>Copyright</span>
                </button>
                <button class="nav-item" data-page="earn">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Earn</span>
                </button>
                <button class="nav-item" data-page="customization">
                    <i class="fas fa-magic"></i>
                    <span>Customization</span>
                </button>
                <button class="nav-item" data-page="audio">
                    <i class="fas fa-music"></i>
                    <span>Audio Library</span>
                </button>
                <div style="margin: 10px 0; border-top: 1px solid rgba(255,255,255,0.05);"></div>
                <button class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </button>
                <a href="/Bhuban%20video%20stream%20app/channel.html" class="nav-item" id="viewChannelLink"
                    target="_blank">
                    <i class="fas fa-tv"></i>
                    <span>View Channel</span>
                    <i class="fas fa-external-link-alt" style="margin-left: auto; font-size: 10px; opacity: 0.5;"></i>
                </a>

                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.05);">
                    <div
                        style="padding: 0 16px 8px; font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">
                        Advanced Tools
                    </div>
                    <button class="nav-item" data-page="ai-studio">
                        <i class="fas fa-robot"></i>
                        <span>AI Studio</span>
                        <span
                            style="margin-left: auto; padding: 2px 8px; background: var(--accent-gradient); border-radius: 12px; font-size: 10px; font-weight: 700;">PRO</span>
                    </button>
                    <button class="nav-item" data-page="scheduler">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Smart Scheduler</span>
                    </button>
                    <button class="nav-item" data-page="collaboration">
                        <i class="fas fa-users"></i>
                        <span>Collaboration</span>
                    </button>
                    <button class="nav-item" data-page="library">
                        <i class="fas fa-folder-open"></i>
                        <span>Content Library</span>
                    </button>
                    <button class="nav-item" data-page="ab-testing">
                        <i class="fas fa-flask"></i>
                        <span>A/B Testing</span>
                    </button>
                    <button class="nav-item" data-page="monetization">
                        <i class="fas fa-chart-line"></i>
                        <span>Monetization Pro</span>
                    </button>
                </div>

                <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.05);">
                    <a href="/Bhuban%20developer%20app/index.html" class="nav-item" style="color: #00d4ff;">
                        <i class="fas fa-code"></i>
                        <span>Developer Dashboard</span>
                    </a>
                    <a href="/Bhuban%20video%20stream%20app/index.html" class="nav-item">
                        <i class="fas fa-play-circle"></i>
                        <span>View App</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card" id="userCard">
                    <div class="user-avatar" id="userAvatar">B</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Bhuban Official</div>
                        <div class="user-email" id="userEmail"
                            style="display: none; font-size: 11px; color: var(--text-muted); margin-top: 2px;">
                            email@example.com</div>
                        <div class="user-subs" id="userStatus">14.2K Subscribers</div>
                    </div>
                    <div id="logoutOption" style="margin-left: auto; cursor: pointer;" onclick="logout()"
                        title="Sign Out">
                        <i class="fas fa-sign-out-alt" style="color: var(--error); font-size: 18px;"></i>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 class="header-title" id="pageTitle">Dashboard</h2>
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search" aria-hidden="true"></i>
                        <label for="creatorSearch"
                            style="position:absolute;width:1px;height:1px;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);">Search
                            videos</label>
                        <input type="text" id="creatorSearch" name="creatorSearch" placeholder="Search videos..."
                            autocomplete="off">
                    </div>
                    <a href="/Bhuban%20developer%20app/index.html" class="header-btn" title="Developer Dashboard">
                        <i class="fas fa-code"></i>
                    </a>
                    <button class="header-btn">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div style="position: relative;">
                        <button class="upload-btn" id="createBtn" onclick="toggleCreateDropdown(event)">
                            <i class="fas fa-plus"></i>
                            <span>CREATE</span>
                        </button>
                        <div class="create-dropdown" id="createDropdown">
                            <div class="create-dropdown-item" onclick="openUploadModal()">
                                <i class="fas fa-arrow-up"></i>
                                <span>Upload videos</span>
                            </div>
                            <div class="create-dropdown-item" onclick="openUploadModal('short')">
                                <i class="fas fa-bolt"></i>
                                <span>Create Short</span>
                            </div>
                            <div class="create-dropdown-item">
                                <i class="fas fa-broadcast-tower"></i>
                                <span>Go live</span>
                            </div>
                            <div class="create-dropdown-item">
                                <i class="fas fa-pen-square"></i>
                                <span>Create post</span>
                            </div>
                            <div class="create-dropdown-item">
                                <i class="fas fa-list-ul"></i>
                                <span>New playlist</span>
                            </div>
                            <div class="create-dropdown-item">
                                <i class="fas fa-microphone"></i>
                                <span>New podcast</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Page -->
                <div class="page-section active" id="dashboard-page">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Total Subscribers</span>
                                <span class="stat-growth">
                                    <i class="fas fa-arrow-up"></i> +12%
                                </span>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <span class="stat-label">Subscribers</span>
                                    <span class="stat-growth" id="subGrowth">
                                        <i class="fas fa-arrow-up"></i> --%
                                    </span>
                                </div>
                                <div class="stat-value" id="subCount">--</div>
                                <div class="stat-subtext">Loading...</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <span class="stat-label">Views (28 Days)</span>
                                    <span class="stat-growth" id="viewGrowth">
                                        <i class="fas fa-arrow-up"></i> --%
                                    </span>
                                </div>
                                <div class="stat-value" id="viewCount">--</div>
                                <div class="stat-subtext">Loading...</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <span class="stat-label">Estimated Revenue</span>
                                    <span class="stat-growth" id="revenueGrowth">
                                        <i class="fas fa-arrow-up"></i> --%
                                    </span>
                                </div>
                                <div class="stat-value" id="revenueAmount">$--</div>
                                <div class="stat-subtext">Loading...</div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Viewership Overview</h3>
                                <div class="chart-filters">
                                    <button class="chart-filter active">7 Days</button>
                                    <button class="chart-filter">28 Days</button>
                                    <button class="chart-filter">90 Days</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-bars" id="chartBars">
                                    <!-- Bars generated by JS -->
                                </div>
                            </div>
                        </div>

                        <div class="content-card">
                            <div class="content-header">
                                <h3 class="content-title">Latest Content Performance</h3>
                                <div class="content-filter">
                                    <button class="filter-btn active">All</button>
                                    <button class="filter-btn">Public</button>
                                    <button class="filter-btn">Draft</button>
                                </div>
                            </div>
                            <div class="video-table">
                                <div class="table-header">
                                    <div class="video-checkbox-col">
                                        <div class="custom-checkbox" onclick="this.classList.toggle('checked')"></div>
                                    </div>
                                    <span>Video</span>
                                    <span>Visibility</span>
                                    <span>Views</span>
                                    <span>Revenue</span>
                                    <span></span>
                                </div>
                                <div id="videoList">
                                    <!-- Video rows generated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Content Page -->
                        <div class="page-section" id="content-page">
                            <div class="content-card">
                                <div class="content-header" style="border-bottom: none; padding-bottom: 0;">
                                    <h3 class="content-title">Channel Content</h3>
                                </div>

                                <!-- Content Tabs (Updated) -->
                                <div class="content-tabs">
                                    <button class="content-tab" data-type="inspiration">Inspiration</button>
                                    <button class="content-tab active" data-type="videos">Videos</button>
                                    <button class="content-tab" data-type="shorts">Shorts</button>
                                    <button class="content-tab" data-type="live">Live</button>
                                    <button class="content-tab" data-type="posts">Posts</button>
                                    <button class="content-tab" data-type="playlists">Playlists</button>
                                    <button class="content-tab" data-type="podcasts">Podcasts</button>
                                    <button class="content-tab" data-type="promotions">Promotions</button>
                                    <button class="content-tab" data-type="collaborations">Collaborations</button>
                                </div>

                                <div class="video-table">
                                    <div class="table-header">
                                        <div class="video-checkbox-col">
                                            <div class="custom-checkbox" id="masterVideoCheckbox"
                                                onclick="toggleAllVideoSelection()"></div>
                                        </div>
                                        <span style="flex: 2.5;">Video</span>
                                        <span>Visibility</span>
                                        <span>Restrictions</span>
                                        <span>Date</span>
                                        <span>Views</span>
                                        <span>Comments</span>
                                        <span>Likes (vs. dislikes)</span>
                                    </div>
                                    <div id="fullVideoList">
                                        <!-- Full video list -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Analytics Page -->
                        <div class="page-section" id="analytics-page">
                            <!-- Analytics Header -->
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                                <h2 style="font-size: 24px; font-weight: 800;">Channel analytics</h2>
                                <div
                                    style="display: flex; align-items: center; gap: 12px; background: var(--bg-secondary); padding: 8px 16px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05); cursor: pointer;">
                                    <i class="far fa-calendar-alt"></i>
                                    <span style="font-size: 13px; font-weight: 600;">Jan 23 – Feb 20, 2026</span>
                                    <span
                                        style="font-size: 11px; color: var(--text-muted); padding-left: 8px; border-left: 1px solid rgba(255,255,255,0.1);">Last
                                        28 days</span>
                                    <i class="fas fa-chevron-down" style="font-size: 10px; margin-left: 4px;"></i>
                                </div>
                            </div>

                            <!-- Analytics Sub-Tabs -->
                            <div class="analytics-tabs">
                                <button class="analytics-tab active" data-analytics-tab="overview">Overview</button>
                                <button class="analytics-tab" data-analytics-tab="content">Content</button>
                                <button class="analytics-tab" data-analytics-tab="audience">Audience</button>
                                <button class="analytics-tab" data-analytics-tab="trends">Trends</button>
                            </div>

                            <!-- Overview Section (Updated) -->
                            <div class="analytics-sub-section active" id="analytics-overview">
                                <div class="analytics-main-layout">
                                    <!-- Main Stats -->
                                    <div class="analytics-left-col">
                                        <div class="metric-detail-grid">
                                            <div class="metric-detail-card active">
                                                <div class="metric-detail-label">Views</div>
                                                <div class="metric-detail-value" id="analyticsOverviewViews">-- <i
                                                        class="fas fa-arrow-circle-up"
                                                        style="font-size: 14px; color: var(--success);"></i></div>
                                                <div class="metric-detail-growth" style="color: var(--text-muted);"
                                                    id="analyticsOverviewViewsGrowth">-- more
                                                    than usual</div>
                                            </div>
                                            <div class="metric-detail-card">
                                                <div class="metric-detail-label">Watch time (hours)</div>
                                                <div class="metric-detail-value" id="analyticsOverviewWatchTime">-- <i
                                                        class="fas fa-arrow-circle-up"
                                                        style="font-size: 14px; color: var(--success);"></i></div>
                                                <div class="metric-detail-growth" style="color: var(--text-muted);"
                                                    id="analyticsOverviewWatchTimeGrowth">-- more
                                                    than usual</div>
                                            </div>
                                            <div class="metric-detail-card">
                                                <div class="metric-detail-label">Subscribers</div>
                                                <div class="metric-detail-value" id="analyticsOverviewSubs">-- <i
                                                        class="fas fa-arrow-circle-up"
                                                        style="font-size: 14px; color: var(--success);"></i></div>
                                                <div class="metric-detail-growth" style="color: var(--text-muted);"
                                                    id="analyticsOverviewSubsGrowth">-- more
                                                    than usual</div>
                                            </div>
                                            <div class="metric-detail-card">
                                                <div class="metric-detail-label">Estimated revenue</div>
                                                <div class="metric-detail-value" id="analyticsOverviewRevenue">$ -- <i
                                                        class="fas fa-arrow-circle-up"
                                                        style="font-size: 14px; color: var(--success);"></i></div>
                                                <div class="metric-detail-growth" style="color: var(--text-muted);"
                                                    id="analyticsOverviewRevenueGrowth">--% more
                                                    than usual</div>
                                            </div>
                                        </div>

                                        <div class="chart-card" style="margin-bottom: 24px;">
                                            <div class="chart-header">
                                                <h3 class="chart-title">Views over time</h3>
                                            </div>
                                            <div class="chart-container" style="height: 300px;">
                                                <div class="chart-bars" id="overviewMainChart">
                                                    <!-- Bars generated by JS -->
                                                    <div
                                                        style="display: flex; align-items: flex-end; gap: 4px; height: 100%; width: 100%;">
                                                        <div class="chart-bar" style="height: 30%; flex: 1;"></div>
                                                        <div class="chart-bar" style="height: 50%; flex: 1;"></div>
                                                        <div class="chart-bar" style="height: 40%; flex: 1;"></div>
                                                        <div class="chart-bar" style="height: 70%; flex: 1;"></div>
                                                        <div class="chart-bar" style="height: 60%; flex: 1;"></div>
                                                        <div class="chart-bar" style="height: 85%; flex: 1;"></div>
                                                        <div class="chart-bar active" style="height: 95%; flex: 1;">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary btn-sm"
                                                style="margin-top: 16px; width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05);">SEE
                                                MORE</button>
                                        </div>

                                        <div class="content-card">
                                            <h3 class="content-title" style="font-size: 16px; margin-bottom: 20px;">Your
                                                top
                                                content in this period</h3>
                                            <div id="topContentList">
                                                <div
                                                    style="padding: 20px; text-align: center; color: var(--text-muted); font-size: 13px;">
                                                    <i class="fas fa-spinner fa-spin"></i> Loading your top content...
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Realtime Sidebar -->
                                    <div class="realtime-sidebar">
                                        <div class="realtime-header">
                                            <span style="font-size: 16px; font-weight: 700;">Realtime</span>
                                            <div class="realtime-live-badge">
                                                <span
                                                    style="width: 8px; height: 8px; background: var(--success); border-radius: 50%; display: inline-block;"></span>
                                                Updating live
                                            </div>
                                        </div>
                                        <div class="realtime-views">67</div>
                                        <div class="realtime-stat-label">Views • Last 48 hours</div>

                                        <div class="realtime-chart">
                                            <div class="realtime-bar" style="height: 30%"></div>
                                            <div class="realtime-bar" style="height: 50%"></div>
                                            <div class="realtime-bar" style="height: 40%"></div>
                                            <div class="realtime-bar" style="height: 20%"></div>
                                            <div class="realtime-bar active" style="height: 90%"></div>
                                            <div class="realtime-bar active" style="height: 85%"></div>
                                            <div class="realtime-bar" style="height: 40%"></div>
                                            <div class="realtime-bar" style="height: 10%"></div>
                                            <div class="realtime-bar" style="height: 30%"></div>
                                            <div class="realtime-bar active" style="height: 60%"></div>
                                        </div>

                                        <div
                                            style="font-size: 14px; font-weight: 700; margin-bottom: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.05);">
                                            Top content</div>
                                        <div class="realtime-content-list" id="realtimeContentList">
                                            <div
                                                style="padding: 12px; text-align: center; color: var(--text-muted); font-size: 12px;">
                                                <i class="fas fa-spinner fa-spin"></i> Loading...
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05); margin-top: 12px;">SEE
                                            MORE</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Audience Section (New) -->
                            <div class="analytics-sub-section" id="analytics-audience" style="display: none;">
                                <!-- Audience Summary Cards -->
                                <div class="analytics-grid" style="margin-bottom: 24px;">
                                    <div class="metric-card">
                                        <div class="metric-label">Monthly audience <i
                                                class="far fa-question-circle"></i>
                                        </div>
                                        <div class="metric-value">6.4K</div>
                                        <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">Updated
                                            Feb
                                            19,
                                            2026</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-label">Subscribers</div>
                                        <div class="metric-value">+30 <i class="fas fa-arrow-circle-up"
                                                style="font-size: 14px; color: var(--success);"></i></div>
                                        <div style="font-size: 11px; color: var(--success); margin-top: 4px;">400% more
                                            than
                                            previous 28 days</div>
                                    </div>
                                </div>

                                <!-- Audience Growth Chart -->
                                <div class="chart-card" style="margin-bottom: 24px;">
                                    <div class="chart-header">
                                        <h3 class="chart-title">Monthly audience growth</h3>
                                    </div>
                                    <div class="chart-container">
                                        <div class="chart-bars" id="audienceBars">
                                            <!-- Bars generated by JS -->
                                            <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                                                Loading
                                                audience trends...</div>
                                        </div>
                                    </div>
                                    <div
                                        style="margin-top: 16px; display: flex; justify-content: space-between; align-items: center;">
                                        <div style="font-size: 12px; color: var(--text-muted);">Views • Jan 23 – Feb 20,
                                            2026
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="font-size: 11px; color: var(--accent-orange); background: none; border: none; padding: 0;">SEE
                                            MORE</button>
                                    </div>
                                </div>

                                <div class="audience-grid" style="margin-bottom: 24px;">
                                    <!-- Audience by watch behavior -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Audience by watch behavior <i
                                                class="far fa-question-circle"></i></div>
                                        <div class="audience-card-subtitle">Monthly audience • Feb 19, 2026</div>
                                        <div class="behavior-bar">
                                            <div class="behavior-segment segment-new" style="width: 98.5%;"></div>
                                            <div class="behavior-segment segment-casual" style="width: 1.5%;"></div>
                                            <div class="behavior-segment segment-regular" style="width: 0.1%;"></div>
                                        </div>
                                        <div class="behavior-legend">
                                            <div class="legend-item">
                                                <div class="legend-dot segment-new"></div>
                                                <span>New viewers</span>
                                                <span style="margin-left: auto; font-weight: 700;">98.5%</span>
                                            </div>
                                            <div class="legend-item">
                                                <div class="legend-dot segment-casual"></div>
                                                <span>Casual viewers</span>
                                                <span style="margin-left: auto; font-weight: 700;">1.5%</span>
                                            </div>
                                            <div class="legend-item">
                                                <div class="legend-dot segment-regular"></div>
                                                <span>Regular viewers</span>
                                                <span style="margin-left: auto; font-weight: 700;">&lt; 0.1%</span>
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="margin-top: 24px; width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05);">See
                                            more</button>
                                    </div>

                                    <!-- Popular with different audiences -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Popular with different audiences</div>
                                        <div class="audience-card-subtitle">Views • Last 28 days</div>
                                        <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                                            <button class="btn btn-primary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px;">New</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px; background: rgba(255,255,255,0.05);">Casual</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px; background: rgba(255,255,255,0.05);">Regular</button>
                                        </div>
                                        <div class="popular-videos-list" id="popularVideosList">
                                            <div
                                                style="padding: 20px; text-align: center; color: var(--text-muted); font-size: 13px;">
                                                <i class="fas fa-spinner fa-spin"></i> Loading...
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="margin-top: 20px; width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05);">See
                                            more</button>
                                    </div>

                                    <!-- When viewers are on YouTube -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">When your viewers are on Bhuban</div>
                                        <div class="audience-card-subtitle">Your local time (GMT +0600) • Last 28 days
                                        </div>
                                        <div class="heatmap-container">
                                            <div class="heatmap-labels">
                                                <span>12:00 AM</span>
                                                <span>6:00 AM</span>
                                                <span>12:00 PM</span>
                                                <span>6:00 PM</span>
                                            </div>
                                            <div>
                                                <div class="heatmap-grid" id="audienceHeatmap">
                                                    <!-- Heatmap cells generated via JS or CSS grid -->
                                                    <script>
                                                        // Generate 7 columns (days) with 24 cells (hours)
                                                        const heatmap = document.getElementById('audienceHeatmap');
                                                        if (heatmap) {
                                                            for (let i = 0; i < 7; i++) {
                                                                const col = document.createElement('div');
                                                                col.className = 'heatmap-col';
                                                                for (let j = 0; j < 24; j++) {
                                                                    const cell = document.createElement('div');
                                                                    const level = Math.floor(Math.random() * 5);
                                                                    cell.className = `heatmap-cell ${level > 0 ? 'level-' + level : ''}`;
                                                                    col.appendChild(cell);
                                                                }
                                                                heatmap.appendChild(col);
                                                            }
                                                        }
                                                    </script>
                                                </div>
                                                <div class="heatmap-days">
                                                    <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Formats viewers watch -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Formats your viewers watch on Bhuban</div>
                                        <div class="audience-card-subtitle">Last 28 days</div>
                                        <div class="progress-list">
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Videos</span>
                                                    <span>Everybody watches</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 95%;"></div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Shorts</span>
                                                    <span>Everybody watches</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 80%;"></div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Live</span>
                                                    <span>Somebody watches</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 40%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Watch time from subscribers -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Watch time from subscribers</div>
                                        <div class="audience-card-subtitle">Watch time • Last 28 days</div>
                                        <div class="progress-list">
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Not subscribed</span>
                                                    <span>75.0%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 75%; opacity: 0.7;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Subscribed</span>
                                                    <span>25.0%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 25%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Age and gender -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Age and gender</div>
                                        <div class="audience-card-subtitle">Views • Last 28 days</div>
                                        <div class="progress-list">
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Female</span>
                                                    <span>34.3%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 34.3%; opacity: 0.7;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Male</span>
                                                    <span>65.7%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 65.7%;"></div>
                                                </div>
                                            </div>
                                            <div
                                                style="margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px;">
                                                <div class="progress-item" style="margin-bottom: 8px;">
                                                    <div class="progress-label-row">
                                                        <span style="font-size: 11px; color: var(--text-muted);">18–24
                                                            years</span>
                                                        <span
                                                            style="font-size: 11px; color: var(--text-muted);">25.8%</span>
                                                    </div>
                                                    <div class="progress-bar-bg" style="height: 4px;">
                                                        <div class="progress-bar-fill" style="width: 25.8%;"></div>
                                                    </div>
                                                </div>
                                                <div class="progress-item">
                                                    <div class="progress-label-row">
                                                        <span style="font-size: 11px; color: var(--text-muted);">25–34
                                                            years</span>
                                                        <span
                                                            style="font-size: 11px; color: var(--text-muted);">44.7%</span>
                                                    </div>
                                                    <div class="progress-bar-bg" style="height: 4px;">
                                                        <div class="progress-bar-fill" style="width: 44.7%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Top Geographies -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">Top geographies</div>
                                        <div class="audience-card-subtitle">Views • Last 28 days</div>
                                        <div class="progress-list">
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Bangladesh</span>
                                                    <span>61.4%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 61.4%;"></div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>India</span>
                                                    <span>28.9%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 28.9%;"></div>
                                                </div>
                                            </div>
                                            <div class="progress-item">
                                                <div class="progress-label-row">
                                                    <span>Pakistan</span>
                                                    <span>0.7%</span>
                                                </div>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 0.7%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Content Section (Updated) -->
                            <div class="analytics-sub-section" id="analytics-content" style="display: none;">
                                <!-- Content Sub-tabs -->
                                <div class="content-sub-nav">
                                    <button class="content-sub-btn active">All</button>
                                    <button class="content-sub-btn">Videos</button>
                                    <button class="content-sub-btn">Shorts</button>
                                    <button class="content-sub-btn">Posts</button>
                                    <button class="content-sub-btn">Playlists</button>
                                </div>

                                <!-- Metrics Grid (Image 1 style) -->
                                <div class="metric-detail-grid">
                                    <div class="metric-detail-card active">
                                        <div class="metric-detail-label">Views</div>
                                        <div class="metric-detail-value">12.1K <i class="fas fa-arrow-circle-up"
                                                style="font-size: 14px; color: var(--success);"></i></div>
                                        <div class="metric-detail-growth" style="color: var(--text-muted);">11.7K more
                                            than
                                            usual</div>
                                    </div>
                                    <div class="metric-detail-card">
                                        <div class="metric-detail-label">Engaged views</div>
                                        <div class="metric-detail-value">6.2K <i class="fas fa-arrow-circle-up"
                                                style="font-size: 14px; color: var(--success);"></i></div>
                                        <div class="metric-detail-growth" style="color: var(--success);">750% more than
                                            usual
                                        </div>
                                    </div>
                                    <div class="metric-detail-card">
                                        <div class="metric-detail-label">Likes</div>
                                        <div class="metric-detail-value">341 <i class="fas fa-arrow-circle-up"
                                                style="font-size: 14px; color: var(--success);"></i></div>
                                        <div class="metric-detail-growth" style="color: var(--success);">498% more than
                                            usual
                                        </div>
                                    </div>
                                    <div class="metric-detail-card">
                                        <div class="metric-detail-label">Subscribers</div>
                                        <div class="metric-detail-value">+26 <i class="fas fa-arrow-circle-up"
                                                style="font-size: 14px; color: var(--success);"></i></div>
                                        <div class="metric-detail-growth" style="color: var(--success);">767% more than
                                            usual
                                        </div>
                                    </div>
                                </div>

                                <!-- Main Content Performance Chart -->
                                <div class="chart-card" style="margin-bottom: 24px;">
                                    <div class="chart-header">
                                        <h3 class="chart-title">Views over time (Shorts)</h3>
                                    </div>
                                    <div class="chart-container" style="height: 300px;">
                                        <div class="chart-bars" id="contentPerformanceChart">
                                            <!-- Bars generated by JS -->
                                            <div
                                                style="display: flex; align-items: flex-end; gap: 6px; height: 100%; width: 100%;">
                                                <div class="chart-bar" style="height: 20%; flex: 1;"></div>
                                                <div class="chart-bar" style="height: 45%; flex: 1;"></div>
                                                <div class="chart-bar" style="height: 35%; flex: 1;"></div>
                                                <div class="chart-bar active" style="height: 60%; flex: 1;"></div>
                                                <div class="chart-bar" style="height: 55%; flex: 1;"></div>
                                                <div class="chart-bar" style="height: 75%; flex: 1;"></div>
                                                <div class="chart-bar active" style="height: 85%; flex: 1;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="audience-grid">
                                    <!-- How viewers find your videos -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">How viewers find your videos</div>
                                        <div class="audience-card-subtitle">Views • Last 28 days</div>
                                        <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                                            <button class="btn btn-primary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px;">Overall</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px; background: rgba(255,255,255,0.05);">External</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px; background: rgba(255,255,255,0.05);">Search</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="border-radius: 20px; font-size: 11px; padding: 4px 12px; background: rgba(255,255,255,0.05);">Suggested</button>
                                        </div>
                                        <div class="progress-list">
                                            <div class="content-source-row">
                                                <span class="source-label">Shorts feed</span>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 91.7%;"></div>
                                                </div>
                                                <span class="source-percent">91.7%</span>
                                            </div>
                                            <div class="content-source-row">
                                                <span class="source-label">Channel pages</span>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 3.5%;"></div>
                                                </div>
                                                <span class="source-percent">3.5%</span>
                                            </div>
                                            <div class="content-source-row">
                                                <span class="source-label">Bhuban search</span>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 3.0%;"></div>
                                                </div>
                                                <span class="source-percent">3.0%</span>
                                            </div>
                                            <div class="content-source-row">
                                                <span class="source-label">Direct or unknown</span>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 0.9%;"></div>
                                                </div>
                                                <span class="source-percent">0.9%</span>
                                            </div>
                                            <div class="content-source-row">
                                                <span class="source-label">Others</span>
                                                <div class="progress-bar-bg">
                                                    <div class="progress-bar-fill" style="width: 0.9%;"></div>
                                                </div>
                                                <span class="source-percent">0.9%</span>
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="margin-top: 24px; width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05);">See
                                            more</button>
                                    </div>

                                    <!-- How viewers engaged -->
                                    <div class="audience-card">
                                        <div class="audience-card-title">How viewers engaged</div>
                                        <div class="audience-card-subtitle">Last 28 days</div>
                                        <div style="margin-top: 32px;">
                                            <div style="font-size: 32px; font-weight: 800; margin-bottom: 8px;">55.5%
                                            </div>
                                            <div
                                                style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">
                                                Stayed to watch</div>
                                            <div class="progress-bar-bg" style="height: 12px;">
                                                <div class="progress-bar-fill"
                                                    style="width: 55.5%; background: var(--accent-gradient);"></div>
                                            </div>
                                            <div
                                                style="display: flex; justify-content: space-between; margin-top: 12px; font-size: 11px; color: var(--text-muted);">
                                                <span>0:00</span>
                                                <span>3:45</span>
                                            </div>
                                        </div>
                                        <div
                                            style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px;">
                                            <div style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Top
                                                Shorts
                                            </div>
                                            <div class="popular-video-item" style="padding: 0; margin-bottom: 12px;"
                                                id="topShortItem">
                                                <div
                                                    style="width: 100px; height: 60px; background: var(--bg-card); border-radius: 6px; display:flex; align-items:center; justify-content:center; color: var(--text-muted); font-size:11px; flex-shrink:0;">
                                                    No data</div>
                                                <div class="pop-video-info">
                                                    <div class="pop-video-title" style="color: var(--text-muted);">No
                                                        shorts yet</div>
                                                    <div style="font-size: 11px; color: var(--text-muted);">Upload a
                                                        short to see data</div>
                                                </div>
                                            </div>
                                            <button class="btn btn-secondary btn-sm"
                                                style="width: 100%; border-radius: 20px; background: rgba(255,255,255,0.05);">See
                                                more</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="analytics-sub-section" id="analytics-trends"
                                style="display: none; padding: 40px; text-align: center;">
                                <i class="fas fa-bolt"
                                    style="font-size: 48px; color: var(--text-muted); margin-bottom: 20px;"></i>
                                <h3>Topic Trends</h3>
                                <p style="color: var(--text-muted);">Trending topics and keyword research coming soon.
                                </p>
                            </div>
                        </div>

                        <!-- Earn Page -->
                        <div class="page-section" id="earn-page">
                            <div class="earnings-hero">
                                <div class="earnings-title">Estimated Balance</div>
                                <div class="earnings-amount">$0.00</div>
                                <button class="payout-btn">
                                    <i class="fas fa-university"></i>
                                    Set Up Payouts
                                </button>
                            </div>

                            <div class="goals-section">
                                <div class="goals-header">
                                    <i class="fas fa-trophy"></i>
                                    <h3>Join the Bhuban Partner Program</h3>
                                </div>

                                <div class="goal-item">
                                    <div class="goal-header">
                                        <span class="goal-label">Subscribers</span>
                                        <span class="goal-value">750 / 1,000</span>
                                    </div>
                                    <div class="goal-bar">
                                        <div class="goal-fill" style="width: 75%"></div>
                                    </div>
                                    <div class="goal-status">
                                        <i class="fas fa-check-circle"></i>
                                        75% toward next milestone
                                    </div>
                                </div>

                                <div class="goal-item">
                                    <div class="goal-header">
                                        <span class="goal-label">Public Watch Hours</span>
                                        <span class="goal-value">2,800 / 4,000</span>
                                    </div>
                                    <div class="goal-bar">
                                        <div class="goal-fill" style="width: 70%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Comments Page -->
                        <div class="page-section" id="comments-page">
                            <div class="content-card">
                                <div class="content-header">
                                    <h3 class="content-title">Recent Comments</h3>
                                </div>
                                <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                                    <i class="fas fa-comments"
                                        style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                                    <p>Comments management coming soon...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Settings Page -->
                        <div class="page-section" id="settings-page">
                            <div class="content-card">
                                <div class="content-header">
                                    <h3 class="content-title">Channel Settings</h3>
                                    <button class="btn-primary" onclick="saveChannelSettings()"
                                        style="padding: 10px 20px;">
                                        <i class="fas fa-save"></i> Save Changes
                                    </button>
                                </div>

                                <!-- Channel Information -->
                                <div style="padding: 24px;">
                                    <div style="margin-bottom: 32px;">
                                        <h4
                                            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                            <i class="fas fa-info-circle"></i> Channel Information
                                        </h4>

                                        <div style="display: grid; gap: 20px;">
                                            <div>
                                                <label for="channelName"
                                                    style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                                    Name</label>
                                                <input type="text" id="channelName"
                                                    placeholder="Enter your channel name" autocomplete="off"
                                                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                            </div>

                                            <div>
                                                <label for="channelDescription"
                                                    style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                                    Description</label>
                                                <textarea id="channelDescription"
                                                    placeholder="Tell viewers about your channel" rows="4"
                                                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px; resize: vertical;"></textarea>
                                            </div>

                                            <div>
                                                <label for="channelEmail"
                                                    style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Channel
                                                    Email</label>
                                                <input type="email" id="channelEmail" placeholder="contact@example.com"
                                                    autocomplete="email"
                                                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Privacy Settings -->
                                    <div style="margin-bottom: 32px;">
                                        <h4
                                            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                            <i class="fas fa-lock"></i> Privacy Settings
                                        </h4>

                                        <div style="display: grid; gap: 16px;">
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                                <div>
                                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                                        Make
                                                        Channel Public</div>
                                                    <div style="font-size: 12px; color: var(--text-muted);">Allow anyone
                                                        to
                                                        view
                                                        your channel and videos</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="channelPublic" checked
                                                        aria-label="Make Channel Public">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>

                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                                <div>
                                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                                        Allow
                                                        Comments</div>
                                                    <div style="font-size: 12px; color: var(--text-muted);">Let viewers
                                                        comment
                                                        on your videos</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="allowComments" checked
                                                        aria-label="Allow Comments">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>

                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                                <div>
                                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                                        Show
                                                        Subscriber Count</div>
                                                    <div style="font-size: 12px; color: var(--text-muted);">Display your
                                                        subscriber count publicly</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="showSubscribers" checked
                                                        aria-label="Show Subscriber Count">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Notification Settings -->
                                    <div style="margin-bottom: 32px;">
                                        <h4
                                            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                                            <i class="fas fa-bell"></i> Notification Settings
                                        </h4>
                                        <div style="display: grid; gap: 16px;">
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                                <div>
                                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                                        Email
                                                        Notifications</div>
                                                    <div style="font-size: 12px; color: var(--text-muted);">Receive
                                                        email
                                                        updates about your channel</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="emailNotifications" checked
                                                        aria-label="Email Notifications">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                                <div>
                                                    <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                                        New
                                                        Comment Alerts</div>
                                                    <div style="font-size: 12px; color: var(--text-muted);">Get notified
                                                        when
                                                        someone comments</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="commentAlerts" checked>
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Customization Page -->
                        <div class="page-section" id="customization-page">
                            <div class="content-card">
                                <div class="customization-header">
                                    <div class="customization-tabs">
                                        <button class="customization-tab active" data-tab="profile">Profile</button>
                                        <button class="customization-tab" data-tab="home">Home tab</button>
                                    </div>
                                    <div class="publish-actions">
                                        <button class="btn btn-secondary btn-sm"
                                            style="background: none; color: var(--text-muted);">View channel</button>
                                        <button class="btn btn-secondary btn-sm"
                                            style="background: rgba(255,255,255,0.05);">Cancel</button>
                                        <button class="btn btn-primary btn-sm"
                                            style="padding: 6px 16px; border-radius: 4px;">Publish</button>
                                    </div>
                                </div>

                                <!-- Profile Tab -->
                                <div class="customization-tab-content" id="customization-profile">
                                    <div class="customization-section">
                                        <div class="customization-section-title">Channel URL</div>
                                        <div class="customization-section-desc">This is the standard web address for
                                            your
                                            channel. It includes your unique channel ID, which is the numbers and
                                            letters at
                                            the
                                            end of the URL. <i class="far fa-question-circle"></i></div>
                                        <div class="channel-url-box">
                                            <div class="channel-url-text" id="customChannelUrl">
                                                https://www.bhuban.com/channel/UCUehYwzo73qzAUpTxeevqrQ</div>
                                            <button class="copy-url-btn"
                                                onclick="copyToClipboard('https://www.bhuban.com/channel/UCUehYwzo73qzAUpTxeevqrQ'); showNotification('URL copied to clipboard')">
                                                <i class="far fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="customization-section">
                                        <div class="customization-section-title">Links</div>
                                        <div class="customization-section-desc">Share external links with your viewers.
                                            They'll
                                            be visible on your channel profile and about page.</div>
                                        <div class="customization-links-list" id="customizationLinks">
                                            <div class="customization-link-row">
                                                <div class="drag-handle"><i class="fas fa-equals"></i></div>
                                                <div class="customization-input-group"
                                                    style="padding: 8px 12px; margin: 0;">
                                                    <label class="customization-input-label" for="linkTitle1">Link title
                                                        (required)</label>
                                                    <input type="text" class="customization-input" id="linkTitle1"
                                                        name="linkTitle[]" value="Instagram">
                                                </div>
                                                <div class="customization-input-group"
                                                    style="padding: 8px 12px; margin: 0;">
                                                    <label class="customization-input-label" for="linkUrl1">URL
                                                        (required)</label>
                                                    <input type="text" class="customization-input" id="linkUrl1"
                                                        name="linkUrl[]"
                                                        value="https://www.instagram.com/shreenath_biswas_jeet">
                                                </div>
                                                <button class="copy-url-btn" style="color: var(--error);"
                                                    onclick="this.closest('.customization-link-row').remove()">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>
                                            </div>
                                            <div class="customization-link-row">
                                                <div class="drag-handle"><i class="fas fa-equals"></i></div>
                                                <div class="customization-input-group"
                                                    style="padding: 8px 12px; margin: 0;">
                                                    <label class="customization-input-label" for="linkTitle2">Link title
                                                        (required)</label>
                                                    <input type="text" class="customization-input" id="linkTitle2"
                                                        name="linkTitle[]" value="Spotify">
                                                </div>
                                                <div class="customization-input-group"
                                                    style="padding: 8px 12px; margin: 0;">
                                                    <label class="customization-input-label" for="linkUrl2">URL
                                                        (required)</label>
                                                    <input type="text" class="customization-input" id="linkUrl2"
                                                        name="linkUrl[]"
                                                        value="https://open.spotify.com/artist/4FXIua5GnPvn03wxmr3v9E">
                                                </div>
                                                <button class="copy-url-btn" style="color: var(--error);"
                                                    onclick="this.closest('.customization-link-row').remove()">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <button class="add-link-btn" onclick="addCustomLink()">
                                            <i class="fas fa-plus"></i> Add link
                                        </button>
                                    </div>

                                    <div class="customization-section">
                                        <div class="customization-section-title">Contact info</div>
                                        <div class="customization-section-desc">Let people know how to contact you with
                                            business
                                            inquiries. The email address you enter may appear in the About section of
                                            your
                                            channel and be visible to viewers.</div>
                                        <div class="customization-input-group" style="max-width: 500px;">
                                            <div class="customization-input-label">Email</div>
                                            <input type="email" class="customization-input" placeholder="Email address"
                                                id="customContactEmail">
                                        </div>
                                    </div>

                                    <div class="customization-section">
                                        <div class="customization-section-title">Video watermark</div>
                                        <div class="customization-section-desc">The watermark will appear on your videos
                                            in
                                            the
                                            right-hand corner of the video player</div>
                                        <div class="watermark-upload-area">
                                            <div class="watermark-preview">
                                                <img id="watermarkPreviewImg" src="" style="display: none;">
                                                <div id="watermarkPlaceholder"
                                                    style="text-align: center; color: var(--text-muted);">
                                                    <i class="fas fa-image"
                                                        style="font-size: 32px; margin-bottom: 8px;"></i>
                                                    <div style="font-size: 10px;">PREVIEW</div>
                                                </div>
                                            </div>
                                            <div class="watermark-controls">
                                                <div class="watermark-hint">An image that's 150 x 150 pixels is
                                                    recommended.
                                                    Use
                                                    a PNG, GIF (no animations), BMP, or JPEG file that's 1MB or less.
                                                </div>
                                                <button class="btn btn-secondary btn-sm"
                                                    onclick="document.getElementById('watermarkInput').click()">Upload</button>
                                                <input type="file" id="watermarkInput" style="display: none;"
                                                    accept="image/*">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Home Tab (Placeholder) -->
                                <div class="customization-tab-content" id="customization-home" style="display: none;">
                                    <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                                        <i class="fas fa-home"
                                            style="font-size: 48px; margin-bottom: 16px; opacity: 0.2;"></i>
                                        <h3 style="color: var(--text-primary); margin-bottom: 12px;">Home Tab
                                            Customization
                                        </h3>
                                        <p>Coming soon: Organize your channel's home page with featured videos and
                                            sections.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subtitles Page -->
                        <div class="page-section" id="subtitles-page">
                            <div class="content-card">
                                <div class="content-header">
                                    <h3 class="content-title">Channel Subtitles</h3>
                                </div>
                                <div style="padding: 60px; text-align: center; color: var(--text-muted);">
                                    <i class="far fa-closed-captioning"
                                        style="font-size: 64px; margin-bottom: 24px; opacity: 0.1;"></i>
                                    <h3 style="color: var(--text-primary); margin-bottom: 12px;">Subtitles Management
                                    </h3>
                                    <p>Translate your content for global audiences. Managed subtitles will appear here.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Copyright Page -->
                        <div class="page-section" id="copyright-page">
                            <div class="content-card">
                                <div class="content-header">
                                    <h3 class="content-title">Channel Copyright</h3>
                                </div>
                                <div style="padding: 60px; text-align: center; color: var(--text-muted);">
                                    <i class="fas fa-gavel"
                                        style="font-size: 64px; margin-bottom: 24px; opacity: 0.1;"></i>
                                    <h3 style="color: var(--text-primary); margin-bottom: 12px;">Content Detection</h3>
                                    <p>Information about copyright takedowns and content ID matches will appear here.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Audio Library Page -->
                        <div class="page-section" id="audio-page">
                            <div class="content-card">
                                <div class="content-header">
                                    <h3 class="content-title">Audio Library</h3>
                                </div>
                                <div style="padding: 60px; text-align: center; color: var(--text-muted);">
                                    <i class="fas fa-music"
                                        style="font-size: 64px; margin-bottom: 24px; opacity: 0.2; color: #764ba2;"></i>
                                    <h3 style="color: var(--text-primary); margin-bottom: 12px;">Free Music & Sound
                                        Effects
                                    </h3>
                                    <p style="max-width: 400px; margin: 0 auto; line-height: 1.6;">Get high-quality
                                        audio
                                        for
                                        your videos without worrying about copyright. Coming soon!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Default Upload Settings -->
                    <div style="margin-top: 32px;">
                        <h4
                            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--accent-orange);">
                            <i class="fas fa-upload"></i> Default Upload Settings
                        </h4>

                        <div style="display: grid; gap: 20px;">
                            <div>
                                <label for="defaultPrivacy"
                                    style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Default
                                    Video Privacy</label>
                                <select id="defaultPrivacy"
                                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                    <option value="public">Public</option>
                                    <option value="unlisted">Unlisted</option>
                                    <option value="private">Private</option>
                                </select>
                            </div>

                            <div>
                                <label for="defaultCategory"
                                    style="display: block; font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">Default
                                    Category</label>
                                <select id="defaultCategory"
                                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); font-size: 14px;">
                                    <option value="">Select category...</option>
                                    <option value="gaming">Gaming</option>
                                    <option value="music">Music</option>
                                    <option value="education">Education</option>
                                    <option value="entertainment">Entertainment</option>
                                    <option value="tech">Technology</option>
                                    <option value="sports">Sports</option>
                                    <option value="vlog">Vlog</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <!-- AI Studio Page -->
    <div class="page-section" id="ai-studio-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-robot" style="color: var(--accent-orange);"></i> AI Studio
                    <span
                        style="margin-left: 12px; padding: 4px 12px; background: var(--accent-gradient); border-radius: 16px; font-size: 12px; font-weight: 700;">PRO</span>
                </h3>
            </div>

            <div style="padding: 24px;">
                <!-- AI Tools Grid -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 32px;">
                    <!-- Title Generator -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: var(--accent-gradient); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                ✨
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Title Generator</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">AI-powered titles</p>
                            </div>
                        </div>
                        <textarea id="aiTitleInput" placeholder="Describe your video..."
                            style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px; resize: vertical;"
                            rows="3"></textarea>
                        <button onclick="generateAITitles()" class="btn-primary" style="width: 100%; padding: 12px;">
                            <i class="fas fa-magic"></i> Generate Titles
                        </button>
                        <div id="aiTitleResults" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Tag Generator -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #10b981 0%, #34d399 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                🏷️
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Smart Tags</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">SEO-optimized tags</p>
                            </div>
                        </div>
                        <div class="customization-input-group">
                            <label class="customization-input-label" for="aiTagInput">Predict success based on
                                title</label>
                            <input type="text" id="aiTagInput" name="aiTagInput" placeholder="Video title..."
                                style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px;">
                        </div>
                        <button onclick="generateAITags()" class="btn-primary"
                            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #34d399 100%);">
                            <i class="fas fa-tags"></i> Generate Tags
                        </button>
                        <div id="aiTagResults" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Performance Predictor -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                📊
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Performance Predictor</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">Predict video success
                                </p>
                            </div>
                        </div>
                        <button onclick="predictPerformance()" class="btn-primary"
                            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);">
                            <i class="fas fa-chart-line"></i> Predict Performance
                        </button>
                        <div id="aiPredictionResults" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Thumbnail Analyzer -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                🖼️
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Thumbnail Analyzer</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">Optimize thumbnails
                                </p>
                            </div>
                        </div>
                        <div class="customization-input-group">
                            <label class="customization-input-label" for="thumbnailInput">Select thumbnail to
                                analyze</label>
                            <input type="file" id="thumbnailInput" name="thumbnailInput" accept="image/*"
                                style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px;">
                        </div>
                        <button onclick="analyzeThumbnail()" class="btn-primary"
                            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);">
                            <i class="fas fa-search"></i> Analyze Thumbnail
                        </button>
                        <div id="thumbnailAnalysisResults" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Trend Analyzer -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                🔥
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Trend Analyzer</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">Discover trending
                                    topics</p>
                            </div>
                        </div>
                        <button onclick="analyzeTrends()" class="btn-primary"
                            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);">
                            <i class="fas fa-fire"></i> Analyze Trends
                        </button>
                        <div id="trendAnalysisResults" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Description Optimizer -->
                    <div class="ai-tool-card"
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                📝
                            </div>
                            <div>
                                <h4 style="font-size: 16px; font-weight: 600;">Description Optimizer</h4>
                                <p style="font-size: 12px; color: var(--text-muted);">SEO-friendly
                                    descriptions</p>
                            </div>
                        </div>
                        <textarea id="descriptionInput" placeholder="Enter your description..."
                            style="width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 14px; margin-bottom: 12px; resize: vertical;"
                            rows="3"></textarea>
                        <button onclick="optimizeDescription()" class="btn-primary"
                            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%);">
                            <i class="fas fa-magic"></i> Optimize Description
                        </button>
                        <div id="descriptionOptimizationResults" style="margin-top: 16px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Smart Scheduler Page -->
    <div class="page-section" id="scheduler-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-calendar-alt" style="color: var(--accent-orange);"></i> Smart Scheduler
                </h3>
                <button class="btn-primary" onclick="showScheduleModal()">
                    <i class="fas fa-plus"></i> Schedule Video
                </button>
            </div>

            <div style="padding: 24px;">
                <!-- Optimal Times -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-clock" style="color: var(--accent-orange);"></i> Optimal Upload
                        Times
                    </h4>
                    <div id="optimalTimesGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Scheduled Videos -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-list" style="color: var(--accent-orange);"></i> Scheduled Videos
                    </h4>
                    <div id="scheduledVideosList">
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                            <i class="fas fa-calendar-check"
                                style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                            <p>No scheduled videos yet</p>
                            <p style="font-size: 13px; margin-top: 8px;">Schedule your first video to see it
                                here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Collaboration Page -->
    <div class="page-section" id="collaboration-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-users" style="color: var(--accent-orange);"></i> Collaboration
                </h3>
                <button class="btn-primary" onclick="showInviteModal()">
                    <i class="fas fa-user-plus"></i> Invite Collaborator
                </button>
            </div>

            <div style="padding: 24px;">
                <!-- Team Members -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-users-cog" style="color: var(--accent-orange);"></i> Team Members
                    </h4>
                    <div id="collaboratorsList">
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                            <i class="fas fa-user-friends"
                                style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                            <p>No collaborators yet</p>
                            <p style="font-size: 13px; margin-top: 8px;">Invite team members to collaborate
                                on your content</p>
                        </div>
                    </div>
                </div>

                <!-- Pending Invitations -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-envelope" style="color: var(--accent-orange);"></i> Pending
                        Invitations
                    </h4>
                    <div id="pendingInvitationsList">
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                            <i class="fas fa-paper-plane"
                                style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                            <p>No pending invitations</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Library Page -->
    <div class="page-section" id="library-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-folder-open" style="color: var(--accent-orange);"></i> Content Library
                </h3>
                <div style="display: flex; gap: 12px;">
                    <button class="btn-primary" onclick="showCreateFolderModal()">
                        <i class="fas fa-folder-plus"></i> New Folder
                    </button>
                    <button class="btn-primary" onclick="showUploadAssetModal()">
                        <i class="fas fa-upload"></i> Upload Asset
                    </button>
                </div>
            </div>

            <div style="padding: 24px;">
                <div id="libraryGrid"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-muted); grid-column: 1 / -1;">
                        <i class="fas fa-folder" style="font-size: 64px; margin-bottom: 16px; opacity: 0.3;"></i>
                        <p>Your content library is empty</p>
                        <p style="font-size: 13px; margin-top: 8px;">Upload images, videos, and other assets
                            to organize your content</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- A/B Testing Page -->
    <div class="page-section" id="ab-testing-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-flask" style="color: var(--accent-orange);"></i> A/B Testing
                </h3>
                <button class="btn-primary" onclick="showCreateTestModal()">
                    <i class="fas fa-plus"></i> Create Test
                </button>
            </div>

            <div style="padding: 24px;">
                <div id="abTestsList">
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-muted);">
                        <i class="fas fa-vial" style="font-size: 64px; margin-bottom: 16px; opacity: 0.3;"></i>
                        <p>No A/B tests running</p>
                        <p style="font-size: 13px; margin-top: 8px;">Test different titles, thumbnails, and
                            descriptions to optimize performance</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Monetization Pro Page -->
    <div class="page-section" id="monetization-page">
        <div class="content-card">
            <div class="content-header">
                <h3 class="content-title">
                    <i class="fas fa-chart-line" style="color: var(--accent-orange);"></i> Monetization Pro
                </h3>
            </div>

            <div style="padding: 24px;">
                <!-- Revenue Opportunities -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-lightbulb" style="color: var(--accent-orange);"></i> Revenue
                        Opportunities
                    </h4>
                    <div id="revenueOpportunities">
                        <button onclick="analyzeRevenueOpportunities()" class="btn-primary"
                            style="width: 100%; padding: 16px;">
                            <i class="fas fa-search-dollar"></i> Analyze Opportunities
                        </button>
                    </div>
                </div>

                <!-- Sponsorship Matches -->
                <div
                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px;">
                    <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">
                        <i class="fas fa-handshake" style="color: var(--accent-orange);"></i> Sponsorship
                        Matches
                    </h4>
                    <div id="sponsorshipMatches">
                        <button onclick="findSponsorships()" class="btn-primary" style="width: 100%; padding: 16px;">
                            <i class="fas fa-search"></i> Find Sponsorships
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </main>
    </div>

    <!-- Upload Modal -->
    <!-- Upload Modal - Simplified Working Version -->
    <div class="modal-overlay" id="uploadModal">
        <div class="upload-modal" style="max-width: 1000px;">
            <input type="hidden" id="uploadType" value="video">
            <div class="modal-header">
                <h2 class="modal-title" id="uploadModalTitle">Upload Video</h2>
                <div style="display: flex; gap: 16px; align-items: center;">
                    <span
                        style="font-size: 12px; color: var(--text-muted); background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px;">Saved
                        as private</span>
                    <button class="modal-close" onclick="closeUploadModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="modal-body">
                <!-- Multi-step Stepper -->
                <div class="upload-stepper">
                    <div class="stepper-track"></div>
                    <div class="stepper-item active" data-step="1">
                        <div class="stepper-circle">1</div>
                        <span class="stepper-label">Details</span>
                    </div>
                    <div class="stepper-item" data-step="2">
                        <div class="stepper-circle">2</div>
                        <span class="stepper-label">Video elements</span>
                    </div>
                    <div class="stepper-item" data-step="3">
                        <div class="stepper-circle">3</div>
                        <span class="stepper-label">Checks</span>
                    </div>
                    <div class="stepper-item" data-step="4">
                        <div class="stepper-circle">4</div>
                        <span class="stepper-label">Visibility</span>
                    </div>
                </div>

                <!-- Step 1: File Selection (Only shows if no file selected) -->
                <div id="fileSelectStep">
                    <div class="upload-dropzone" id="dropzone"
                        onclick="document.getElementById('videoFileInput').click()">
                        <div class="dropzone-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <h3 style="font-size: 20px; margin-bottom: 8px;">Select files to upload</h3>
                        <p style="color: var(--text-muted); font-size: 14px;">Your videos will be private until you
                            publish them.</p>
                        <button class="btn-primary" style="margin-top: 32px; padding: 12px 32px;">SELECT FILES</button>
                    </div>
                    <input type="file" id="videoFileInput" accept="video/*" style="display: none;">
                </div>

                <!-- Step 1: Details -->
                <div id="videoDetailsStep" style="display: none;">
                    <div class="upload-grid">
                        <div class="upload-left-col">
                            <!-- Details Content (Step 1) -->
                            <div class="upload-step-screen" id="step-1-content">
                                <div class="customization-section" style="margin-bottom: 24px;">
                                    <div class="customization-input-group">
                                        <div class="customization-input-label">Title (required) <i
                                                class="far fa-question-circle"></i></div>
                                        <input type="text" class="customization-input" id="uploadVideoTitle"
                                            placeholder="Add a title that describes your video" maxlength="100">
                                        <div class="char-count" id="uploadTitleCount">0/100</div>
                                    </div>
                                </div>

                                <div class="customization-section" style="margin-bottom: 32px;">
                                    <div class="customization-input-group" style="padding-bottom: 24px;">
                                        <div class="customization-input-label">Description <i
                                                class="far fa-question-circle"></i></div>
                                        <textarea class="customization-input" id="uploadVideoDesc"
                                            placeholder="Tell viewers about your video (type @ to mention a channel)"
                                            rows="6"></textarea>
                                        <div class="char-count" id="uploadDescCount">0/5000</div>
                                    </div>
                                </div>

                                <div class="customization-section">
                                    <div class="customization-section-title">Audience</div>
                                    <div class="customization-section-desc">Is this video made for kids? (required)
                                    </div>
                                    <div
                                        style="background: rgba(255,255,255,0.02); border-left: 3px solid #3ea6ff; padding: 12px 16px; border-radius: 4px; margin-bottom: 16px;">
                                        <div style="display: flex; gap: 12px; align-items: flex-start;">
                                            <i class="fas fa-info-circle" style="color: #3ea6ff; margin-top: 4px;"></i>
                                            <div style="font-size: 13px; color: var(--text-primary);">Features like
                                                personalized ads and notifications won't be available on videos made for
                                                kids. Videos that are set as made for kids by you are more likely to be
                                                recommended alongside other kids' videos. <a href="#"
                                                    style="color: #3ea6ff; text-decoration: none;">Learn more</a></div>
                                        </div>
                                    </div>
                                    <div class="upload-radio-group">
                                        <label class="upload-radio-item">
                                            <input type="radio" name="madeForKids" value="yes">
                                            <span class="upload-radio-label">Yes, it's made for kids</span>
                                        </label>
                                        <label class="upload-radio-item">
                                            <input type="radio" name="madeForKids" value="no" checked>
                                            <span class="upload-radio-label">No, it's not made for kids</span>
                                        </label>
                                    </div>
                                    <div
                                        style="margin-top: 24px; cursor: pointer; color: #3ea6ff; font-size: 14px; font-weight: 600;">
                                        <i class="fas fa-chevron-down"></i> Age restriction (advanced)
                                    </div>
                                </div>
                            </div>

                            <!-- Video Elements (Step 2) -->
                            <div class="upload-step-screen" id="step-2-content" style="display: none;">
                                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">Video elements</h3>
                                <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 32px;">Use cards and
                                    an end screen to show viewers related videos, websites, and calls to action.</p>

                                <div class="element-list" style="display: flex; flex-direction: column; gap: 16px;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 20px;">
                                        <div style="display: flex; gap: 20px; align-items: center;">
                                            <i class="far fa-closed-captioning"
                                                style="font-size: 24px; color: var(--text-muted);"></i>
                                            <div>
                                                <div style="font-weight: 600;">Add subtitles</div>
                                                <div style="font-size: 13px; color: var(--text-muted);">Reach a broader
                                                    audience by adding subtitles to your video</div>
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="color: #3ea6ff; font-weight: 700;">ADD</button>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 20px;">
                                        <div style="display: flex; gap: 20px; align-items: center;">
                                            <i class="fas fa-desktop"
                                                style="font-size: 24px; color: var(--text-muted);"></i>
                                            <div>
                                                <div style="font-weight: 600;">Add an end screen</div>
                                                <div style="font-size: 13px; color: var(--text-muted);">Promote related
                                                    content at the end of your video</div>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 12px;">
                                            <button class="btn btn-secondary btn-sm">IMPORT FROM VIDEO</button>
                                            <button class="btn btn-secondary btn-sm"
                                                style="color: #3ea6ff; font-weight: 700;">ADD</button>
                                        </div>
                                    </div>

                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 20px;">
                                        <div style="display: flex; gap: 20px; align-items: center;">
                                            <i class="fas fa-info-circle"
                                                style="font-size: 24px; color: var(--text-muted);"></i>
                                            <div>
                                                <div style="font-weight: 600;">Add cards</div>
                                                <div style="font-size: 13px; color: var(--text-muted);">Promote related
                                                    content during your video</div>
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="color: #3ea6ff; font-weight: 700;">ADD</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Checks (Step 3) -->
                            <div class="upload-step-screen" id="step-3-content" style="display: none;">
                                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">Checks</h3>
                                <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 32px;">We'll check
                                    your video for issues that may restrict its visibility and then you will have the
                                    opportunity to fix issues before publishing your video. Checks will not run until SD
                                    has finished processing. <a href="#"
                                        style="color: #3ea6ff; text-decoration: none;">Learn more</a></p>

                                <div style="margin-top: 40px;">
                                    <div style="font-weight: 700; margin-bottom: 12px;">Copyright</div>
                                    <div
                                        style="display: flex; gap: 16px; align-items: flex-start; margin-bottom: 24px;">
                                        <i class="fas fa-check-circle"
                                            style="color: #10b981; font-size: 18px; margin-top: 2px;"></i>
                                        <div>
                                            <div style="font-size: 14px;">No issues found</div>
                                        </div>
                                    </div>
                                    <div
                                        style="font-size: 12px; color: var(--text-muted); border-top: 1px solid var(--border-color); padding-top: 24px; display: flex; justify-content: space-between; align-items: flex-start;">
                                        <div style="max-width: 80%;">
                                            Remember: These check results aren't final. Issues may come up in the future
                                            that impact your video. <a href="#"
                                                style="color: #3ea6ff; text-decoration: none;">Learn more</a>
                                        </div>
                                        <button class="btn btn-secondary btn-sm"
                                            style="background: none; border: none; font-weight: 700; color: var(--text-muted);">SEND
                                            FEEDBACK</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Visibility (Step 4) -->
                            <div class="upload-step-screen" id="step-4-content" style="display: none;">
                                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">Visibility</h3>
                                <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 32px;">Choose when
                                    to publish and who can see your video</p>

                                <div
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 24px; margin-bottom: 20px;">
                                    <div style="font-weight: 700; margin-bottom: 4px;">Save or publish</div>
                                    <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 24px;">Make
                                        your video public, unlisted, or private</div>

                                    <div class="upload-radio-group"
                                        style="display: flex; flex-direction: column; gap: 24px;">
                                        <label class="upload-radio-item"
                                            style="display: flex; gap: 16px; cursor: pointer;">
                                            <input type="radio" name="videoVisibility" value="private" checked
                                                style="margin-top: 4px;">
                                            <div>
                                                <div style="font-weight: 600;">Private</div>
                                                <div
                                                    style="font-size: 13px; color: var(--text-muted); margin-top: 2px;">
                                                    Only you and people you choose can watch your video</div>
                                            </div>
                                        </label>
                                        <label class="upload-radio-item"
                                            style="display: flex; gap: 16px; cursor: pointer;">
                                            <input type="radio" name="videoVisibility" value="unlisted"
                                                style="margin-top: 4px;">
                                            <div>
                                                <div style="font-weight: 600;">Unlisted</div>
                                                <div
                                                    style="font-size: 13px; color: var(--text-muted); margin-top: 2px;">
                                                    Anyone with the video link can watch your video</div>
                                            </div>
                                        </label>
                                        <label class="upload-radio-item"
                                            style="display: flex; gap: 16px; cursor: pointer;">
                                            <input type="radio" name="videoVisibility" value="public"
                                                style="margin-top: 4px;">
                                            <div>
                                                <div style="font-weight: 600;">Public</div>
                                                <div
                                                    style="font-size: 13px; color: var(--text-muted); margin-top: 2px;">
                                                    Everyone can watch your video</div>
                                                <div
                                                    style="margin-top: 16px; display: flex; align-items: center; gap: 12px; background: rgba(255,255,255,0.03); padding: 12px; border-radius: 4px;">
                                                    <input type="checkbox" id="setPremiere">
                                                    <label for="setPremiere"
                                                        style="font-size: 13px; cursor: pointer;">Set as instant
                                                        Premiere <i class="far fa-question-circle"
                                                            style="color: var(--text-muted); font-size: 12px;"></i></label>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div
                                    style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 24px; opacity: 0.6; cursor: not-allowed;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-weight: 700; margin-bottom: 4px;">Schedule</div>
                                            <div style="font-size: 13px; color: var(--text-muted);">Select a date to
                                                make your video public</div>
                                        </div>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="upload-right-col">
                            <div class="upload-preview-card">
                                <div class="preview-video-container">
                                    <div style="text-align: center;">
                                        <i class="fas fa-spinner fa-spin"
                                            style="font-size: 24px; margin-bottom: 12px; color: var(--text-muted);"></i>
                                        <div style="font-size: 14px; color: var(--text-muted);">Uploading video...</div>
                                    </div>
                                </div>
                                <div class="preview-info">
                                    <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px;">Video
                                        link</div>
                                    <div class="preview-link-box">
                                        <a href="#" id="previewVideoUrl"
                                            style="font-size: 13px; color: #3ea6ff; text-decoration: none; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">https://bhuban.be/1IWY6z54qRI</a>
                                        <button class="copy-url-btn"
                                            onclick="copyToClipboard(document.getElementById('previewVideoUrl').innerText); showNotification('URL copied')">
                                            <i class="far fa-copy"></i>
                                        </button>
                                    </div>
                                    <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px;">Filename
                                    </div>
                                    <div style="font-size: 13px;" id="previewFilename">C0063.MP4</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer" style="flex-direction: column; padding: 12px 24px; align-items: stretch;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; width: 100%;">
                    <div style="display: flex; gap: 16px; align-items: center;">
                        <i class="fas fa-upload" style="color: var(--text-muted);"></i>
                        <span
                            style="font-size: 11px; font-weight: 700; background: var(--border-color); padding: 2px 6px; border-radius: 2px;">SD</span>
                        <i class="fas fa-check-circle" style="color: #3ea6ff; font-size: 14px;"></i>
                        <span style="font-size: 13px; color: var(--text-primary);" id="uploadStatusBarText">Uploading
                            13% ... 4 minutes left</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary"
                            style="background: none; border: none; font-weight: 700; display: none;"
                            id="backBtn">BACK</button>
                        <button class="btn btn-primary"
                            style="background: var(--text-primary); color: var(--bg-primary); border-radius: 20px; padding: 8px 24px; font-weight: 700;"
                            id="nextBtn">NEXT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Video Modal with Advanced Features -->
    <div class="modal-overlay" id="editVideoModal" style="display: none;">
        <div class="upload-modal" style="max-width: 900px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-edit" style="color: var(--accent-orange); margin-right: 12px;"></i>
                    Edit Video Details
                </h2>
                <button class="modal-close" onclick="closeEditVideoModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body" style="display: block; padding: 32px;">
                <input type="hidden" id="editVideoId">
                
                <!-- Basic Details Section -->
                <div style="margin-bottom: 32px;">
                    <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 20px; color: var(--accent-orange);">
                        <i class="fas fa-info-circle"></i> Basic Details
                    </h3>
                    
                    <!-- Thumbnail Section -->
                    <div style="margin-bottom: 24px;">
                        <label class="form-label" for="editThumbnailInput">
                            <i class="fas fa-image"></i>
                            Thumbnail
                        </label>
                        <div style="display: grid; grid-template-columns: 200px 1fr; gap: 20px; align-items: start;">
                            <!-- Thumbnail Preview -->
                            <div style="position: relative;">
                                <div id="editThumbnailPreview" style="width: 200px; height: 112px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-image" style="font-size: 32px; color: var(--text-muted); opacity: 0.3;"></i>
                                </div>
                                <input type="file" id="editThumbnailInput" accept="image/*" style="display: none;" onchange="handleThumbnailUpload(event)">
                            </div>
                            
                            <!-- Thumbnail Actions -->
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">
                                    Upload a picture that shows what's in your video. A good thumbnail stands out and draws viewers' attention.
                                </div>
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    <button type="button" class="btn-primary-outline" onclick="document.getElementById('editThumbnailInput').click()" style="padding: 8px 16px; font-size: 13px;">
                                        <i class="fas fa-upload"></i>
                                        Upload Thumbnail
                                    </button>
                                    <button type="button" class="btn-secondary" onclick="generateAutoThumbnail()" style="padding: 8px 16px; font-size: 13px;">
                                        <i class="fas fa-magic"></i>
                                        Auto-Generate
                                    </button>
                                    <button type="button" class="btn-secondary" onclick="removeThumbnail()" style="padding: 8px 16px; font-size: 13px; color: var(--error);">
                                        <i class="fas fa-trash"></i>
                                        Remove
                                    </button>
                                </div>
                                <div style="font-size: 11px; color: var(--text-muted);">
                                    Recommended: 1280x720 pixels (16:9 ratio) • Max 2MB • JPG, PNG, or GIF
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="editVideoTitle">
                            <i class="fas fa-heading"></i>
                            Title
                        </label>
                        <input type="text" id="editVideoTitle" class="form-input" placeholder="Enter video title" maxlength="100">
                        <span class="char-count"><span id="editTitleCount">0</span>/100</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editVideoDesc">
                            <i class="fas fa-align-left"></i>
                            Description
                        </label>
                        <textarea id="editVideoDesc" class="form-textarea" rows="4" placeholder="Tell viewers about your video" maxlength="5000"></textarea>
                        <span class="char-count"><span id="editDescCount">0</span>/5000</span>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="form-group">
                            <label class="form-label" for="editVideoVisibility">
                                <i class="fas fa-eye"></i>
                                Visibility
                            </label>
                            <select id="editVideoVisibility" class="form-input">
                                <option value="public">Public</option>
                                <option value="unlisted">Unlisted</option>
                                <option value="private">Private</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editVideoCategory">
                                <i class="fas fa-folder"></i>
                                Category
                            </label>
                            <select id="editVideoCategory" class="form-input">
                                <option value="Entertainment">Entertainment</option>
                                <option value="Education">Education</option>
                                <option value="Music">Music</option>
                                <option value="Tech">Tech</option>
                                <option value="Gaming">Gaming</option>
                                <option value="Sports">Sports</option>
                                <option value="News">News</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Advanced Features Section -->
                <div style="margin-bottom: 32px;">
                    <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 20px; color: var(--accent-orange);">
                        <i class="fas fa-magic"></i> Advanced Features
                    </h3>

                    <!-- Subtitles -->
                    <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="flex: 1;">
                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                    <i class="fas fa-closed-captioning" style="color: var(--accent-orange); margin-right: 8px;"></i>
                                    Add subtitles
                                </h4>
                                <p style="font-size: 12px; color: var(--text-muted); margin: 0;">
                                    Reach a broader audience by adding subtitles to your video
                                </p>
                            </div>
                            <button class="btn-primary-outline" onclick="openSubtitlesManager()" style="padding: 8px 16px; font-size: 13px;">
                                ADD
                            </button>
                        </div>
                    </div>

                    <!-- End Screen -->
                    <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="flex: 1;">
                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                    <i class="fas fa-film" style="color: var(--accent-orange); margin-right: 8px;"></i>
                                    Add an end screen
                                </h4>
                                <p style="font-size: 12px; color: var(--text-muted); margin: 0;">
                                    Promote related content at the end of your video
                                </p>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn-secondary" onclick="importEndScreenFromVideo()" style="padding: 8px 16px; font-size: 13px;">
                                    IMPORT FROM VIDEO
                                </button>
                                <button class="btn-primary-outline" onclick="openEndScreenEditor()" style="padding: 8px 16px; font-size: 13px;">
                                    ADD
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Cards -->
                    <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="flex: 1;">
                                <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
                                    <i class="fas fa-id-card" style="color: var(--accent-orange); margin-right: 8px;"></i>
                                    Add cards
                                </h4>
                                <p style="font-size: 12px; color: var(--text-muted); margin: 0;">
                                    Promote related content during your video
                                </p>
                            </div>
                            <button class="btn-primary-outline" onclick="openCardsEditor()" style="padding: 8px 16px; font-size: 13px;">
                                ADD
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 12px; margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border-color);">
                    <button class="btn-cancel" onclick="closeEditVideoModal()" style="flex: 1;">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <button class="btn-publish" onclick="saveVideoEdit()" style="flex: 1;">
                        <i class="fas fa-save"></i>
                        Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Modern Upload Modal Styles */
        .upload-dropzone {
            border: 3px dashed rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            background: var(--bg-card);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 24px;
        }

        .upload-dropzone:hover {
            border-color: var(--accent-orange);
            background: rgba(255, 107, 53, 0.05);
            transform: translateY(-2px);
        }

        .upload-dropzone.has-file {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .dropzone-icon {
            font-size: 64px;
            color: var(--accent-orange);
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .browse-btn {
            padding: 12px 32px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .browse-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .form-section {
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-label i {
            color: var(--accent-orange);
            margin-right: 8px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
        }

        .char-count {
            position: absolute;
            right: 12px;
            bottom: -20px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .upload-progress-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .progress-icon {
            width: 48px;
            height: 48px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--accent-orange);
        }

        .progress-details {
            flex: 1;
        }

        .progress-status {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .progress-percent {
            font-size: 24px;
            font-weight: 800;
            color: var(--accent-orange);
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--accent-gradient);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            padding: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn-cancel {
            flex: 1;
            padding: 14px 24px;
            background: var(--bg-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-publish {
            flex: 2;
            padding: 14px 32px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-publish:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.5);
        }

        .btn-publish:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-publish:active:not(:disabled) {
            transform: translateY(0);
        }
    </style>

    <script>
        console.log('🔧 Main script loading...');

        // ==========================================
        // UPLOAD STATE
        // ==========================================
        let uploadSelectedFile = null;

        // ==========================================
        // OPENING ANIMATION
        // ==========================================
        async function playOpeningAnimation() {
            console.log('🎬 Starting opening animation...');

            // Safety timeout - force hide overlay after 3 seconds
            const safetyTimeout = setTimeout(() => {
                console.warn('⚠️ Animation timeout - forcing overlay hide');
                const overlay = document.getElementById('openingOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }, 3000);

            try {
                const logo = document.getElementById('openingLogo');
                const title = document.getElementById('openingTitle');
                const subtitle = document.getElementById('openingSubtitle');
                const progress = document.getElementById('openingProgress');
                const progressBar = document.getElementById('openingProgressBar');
                const bootText = document.getElementById('bootText');
                const overlay = document.getElementById('openingOverlay');
                const orbitRings = document.querySelectorAll('.orbit-ring');

                // If overlay doesn't exist, skip animation
                if (!overlay) {
                    console.log('✅ No opening overlay found, skipping animation');
                    clearTimeout(safetyTimeout);
                    return;
                }

                console.log('🎨 Animating logo...');
                const bootMessages = [
                    'Initializing creative engine...',
                    'Loading studio modules...',
                    'Ready to create!'
                ];

                // Activate logo (faster)
                await new Promise(r => setTimeout(r, 200));
                if (logo) logo.classList.add('active');
                orbitRings.forEach((ring, i) => {
                    setTimeout(() => ring.classList.add('active'), i * 100);
                });

                // Activate title (faster)
                await new Promise(r => setTimeout(r, 400));
                if (title) title.classList.add('active');
                if (subtitle) subtitle.classList.add('active');
                if (progress) progress.classList.add('active');
                if (bootText) bootText.classList.add('active');

                console.log('⏳ Running progress animation...');
                // Progress animation (much faster)
                for (let i = 0; i <= 100; i += 20) {
                    await new Promise(r => setTimeout(r, 30));
                    if (progressBar) progressBar.style.width = i + '%';
                    const msgIndex = Math.min(Math.floor(i / 40), bootMessages.length - 1);
                    if (bootText) bootText.textContent = bootMessages[msgIndex];
                }

                // Exit animation (faster)
                console.log('✨ Completing animation...');
                await new Promise(r => setTimeout(r, 200));
                overlay.classList.add('hidden');
                await new Promise(r => setTimeout(r, 600));
                overlay.style.display = 'none';

                clearTimeout(safetyTimeout);
                console.log('✅ Opening animation complete!');
            } catch (error) {
                console.error('❌ Opening animation error:', error);
                clearTimeout(safetyTimeout);
                // Hide overlay immediately if there's an error
                const overlay = document.getElementById('openingOverlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
        }

        // ==========================================
        // NAVIGATION - SELF-HEALING SYSTEM
        // ==========================================
        window.navigateToPage = function (pageId) {
            const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
            if (navItem) {
                navItem.click();
            } else {
                // Direct activation fallback
                activatePage(pageId);
            }
        };

        // All known page IDs
        const ALL_PAGE_IDS = [
            'dashboard', 'content', 'analytics', 'comments', 'subtitles',
            'copyright', 'earn', 'customization', 'audio', 'settings',
            'ai-studio', 'scheduler', 'collaboration', 'library', 'ab-testing', 'monetization'
        ];

        function activatePage(pageId) {
            const contentArea = document.querySelector('.content-area');
            if (!contentArea) return;

            // Step 1: Move all page-sections to be direct children of content-area (flatten DOM)
            ALL_PAGE_IDS.forEach(id => {
                const el = document.getElementById(id + '-page');
                if (el && el.parentElement !== contentArea) {
                    contentArea.appendChild(el);
                }
            });

            // Step 2: Hide all known page sections
            ALL_PAGE_IDS.forEach(id => {
                const el = document.getElementById(id + '-page');
                if (el) {
                    el.style.display = 'none';
                    el.classList.remove('active');
                }
            });

            // Step 3: Show the target page
            const target = document.getElementById(pageId + '-page');
            if (target) {
                target.style.display = 'block';
                target.classList.add('active');
                console.log(`✅ Activated page: ${pageId}-page`);
            } else {
                console.error(`❌ Page not found: ${pageId}-page`);
            }
        }

        function initNavigation() {
            console.log('📍 Initializing navigation...');
            const navItems = document.querySelectorAll('.nav-item[data-page]');
            const pageTitle = document.getElementById('pageTitle');

            console.log(`Found ${navItems.length} nav items`);

            if (navItems.length === 0) {
                console.error('❌ No navigation items found!');
                return;
            }

            // Flatten all page sections at startup
            const contentArea = document.querySelector('.content-area');
            if (contentArea) {
                ALL_PAGE_IDS.forEach(id => {
                    const el = document.getElementById(id + '-page');
                    if (el && el.parentElement !== contentArea) {
                        console.log(`🔧 Relocating ${id}-page to content-area`);
                        contentArea.appendChild(el);
                    }
                });
                // Now activate only dashboard by default
                ALL_PAGE_IDS.forEach(id => {
                    const el = document.getElementById(id + '-page');
                    if (el) {
                        if (id === 'dashboard') {
                            el.style.display = 'block';
                            el.classList.add('active');
                        } else {
                            el.style.display = 'none';
                            el.classList.remove('active');
                        }
                    }
                });
            }

            navItems.forEach((item) => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    const page = item.dataset.page;
                    console.log(`📄 Navigating to: ${page}`);

                    // Update nav active state
                    navItems.forEach(n => n.classList.remove('active'));
                    item.classList.add('active');

                    // Activate the target page
                    activatePage(page);

                    // Update header title
                    if (pageTitle) {
                        const titleSpan = item.querySelector('span');
                        if (titleSpan) pageTitle.textContent = titleSpan.textContent;
                    }

                    // Trigger page-specific data loaders
                    if (page === 'content') {
                        if (typeof loadUserVideos === 'function') loadUserVideos();
                    } else if (page === 'analytics') {
                        if (typeof loadCreatorAnalytics === 'function') loadCreatorAnalytics();
                    } else if (page === 'comments') {
                        if (typeof loadComments === 'function') loadComments();
                    }
                });
            });

            console.log('✅ Navigation initialized');
        }

        // ==========================================
        // CHART DATA - REAL DATA ONLY
        // ==========================================
        function initCharts() {
            // NO FAKE DATA - Charts will be populated by loadCreatorAnalytics()
            // This function is called on page load but data comes from backend

            // Initialize empty chart containers
            const chartBars = document.getElementById('chartBars');
            const retentionBars = document.getElementById('retentionBars');

            if (chartBars) chartBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Loading chart data...</div>';
            if (retentionBars) retentionBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">Loading retention data...</div>';
        }

        // ==========================================
        // VIDEO LIST
        // ==========================================
        // VIDEO LIST - Will be loaded from API
        // ==========================================
        function renderVideoList() {
            const videoList = document.getElementById('videoList');
            const fullVideoList = document.getElementById('fullVideoList');

            // Clear existing content
            if (videoList) videoList.innerHTML = '';
            if (fullVideoList) fullVideoList.innerHTML = '';

            // Use videos from CreatorState (loaded from API)
            const videos = CreatorState.videos;

            if (videos.length === 0) {
                // Show empty state
                if (videoList) {
                    videoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                }
                if (fullVideoList) {
                    fullVideoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet. Upload your first video!</div>';
                }
                return;
            }

            videos.slice(0, 3).forEach(video => {
                if (videoList) videoList.appendChild(createVideoRow(video));
            });

            videos.forEach(video => {
                if (fullVideoList) fullVideoList.appendChild(createVideoRow(video, true));
            });
        }

        function refreshVideoLists() {
            renderVideoList();
        }

        function createVideoRow(video, full = false) {
            // Fallback thumbnail
            const FALLBACK_THUMBNAIL = 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22120%22 height=%2268%22%3E%3Crect fill=%22%23222%22 width=%22120%22 height=%2268%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%23666%22 font-size=%2212%22%3ENo Thumbnail%3C/text%3E%3C/svg%3E';

            // Validate thumbnail URL
            const thumbnailUrl = (video.thumbnail && video.thumbnail !== 'undefined' && video.thumbnail !== 'null')
                ? video.thumbnail
                : (video.thumbnailUrl && video.thumbnailUrl !== 'undefined' && video.thumbnailUrl !== 'null')
                    ? video.thumbnailUrl
                    : FALLBACK_THUMBNAIL;

            const row = document.createElement('div');
            row.className = 'video-row';

            // Calculate like percentage
            const likes = video.likes || 0;
            const dislikes = video.dislikes || 0;
            const total = likes + dislikes;
            const likePercent = total > 0 ? (likes / total * 100).toFixed(1) : '100.0';

            row.innerHTML = `
                <div class="video-checkbox-col">
                    <div class="custom-checkbox" onclick="this.classList.toggle('checked')"></div>
                </div>
                <div class="video-info" style="flex: 2.5;">
                    <div class="video-thumb">
                        <img src="${thumbnailUrl}" alt="${video.title}" onerror="this.src='${FALLBACK_THUMBNAIL}'">
                        <div class="video-thumb-overlay">
                            <i class="fas fa-edit" onclick="try { window.editVideo('${video._id || video.id}'); } catch(e) { console.error('Edit error:', e); alert('Edit functionality error: ' + e.message); }"></i>
                            <i class="fas fa-chart-bar" onclick="videoStats('${video._id || video.id}')"></i>
                        </div>
                    </div>
                    <div class="video-details">
                        <h4 style="font-size: 13px; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${video.title}</h4>
                        <p style="font-size: 11px; opacity: 0.6; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">${video.description || 'Add description...'}</p>
                    </div>
                </div>
                <div>
                    <span class="status-badge ${(video.visibility || video.status || 'public').toLowerCase()}">
                        <i class="fas fa-${(video.visibility || video.status || 'public').toLowerCase() === 'public' ? 'globe' : 'lock'}"></i>
                        ${video.visibility || video.status || 'Public'}
                    </span>
                </div>
                <div class="video-stats" style="color: var(--text-muted); font-size: 12px;">None</div>
                <div class="video-stats" style="font-size: 11px; color: var(--text-muted);">${video.createdAt ? new Date(video.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : 'Jan 25, 2026'}</div>
                <div class="video-stats">${(video.views || 0).toLocaleString()}</div>
                <div class="video-stats">${(video.commentsCount || 0).toLocaleString()}</div>
                <div class="video-stats">
                    <div style="font-size: 12px; font-weight: 700;">${likePercent}%</div>
                    <div class="like-bar-container" style="width: 60px; height: 3px; background: rgba(255,255,255,0.05); border-radius: 2px; margin: 4px 0;">
                        <div class="like-bar-fill" style="width: ${likePercent}%; height: 100%; background: var(--text-secondary); border-radius: 2px;"></div>
                    </div>
                    <div style="font-size: 10px; color: var(--text-muted);">${likes} likes</div>
                </div>
            `;
            return row;
        }

        // ==========================================
        // UPLOAD MODAL - WORKING VERSION (Keep this one only)
        // ==========================================
        
        // Toggle create dropdown
        function toggleCreateDropdown(event) {
            event.stopPropagation();
            const dropdown = document.getElementById('createDropdown');
            dropdown.style.display = dropdown.style.display === 'none' || !dropdown.style.display ? 'block' : 'none';
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('createDropdown');
            const createBtn = document.getElementById('createBtn');
            if (dropdown && !createBtn.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Close dropdown when clicking an item
        document.querySelectorAll('.create-dropdown-item').forEach(item => {
            item.addEventListener('click', function() {
                document.getElementById('createDropdown').style.display = 'none';
            });
        });
        
        function openUploadModal(type = 'video') {
            // Close the create dropdown
            const dropdown = document.getElementById('createDropdown');
            if (dropdown) dropdown.style.display = 'none';
            
            const modal = document.getElementById('uploadModal');
            if (modal) {
                modal.classList.add('active');
                modal.style.display = 'flex';
                
                // Set upload type
                const uploadTypeInput = document.getElementById('uploadType');
                if (uploadTypeInput) {
                    uploadTypeInput.value = type;
                }
                
                // Update modal title based on type
                const modalTitle = modal.querySelector('h2');
                if (modalTitle) {
                    modalTitle.textContent = type === 'short' ? 'Upload Short' : 'Upload Video';
                }
                
                // Add helper text for Shorts
                const fileSelectStep = document.getElementById('fileSelectStep');
                if (fileSelectStep && type === 'short') {
                    let helperText = fileSelectStep.querySelector('.shorts-helper');
                    if (!helperText) {
                        helperText = document.createElement('div');
                        helperText.className = 'shorts-helper';
                        helperText.style.cssText = 'margin-top: 12px; padding: 12px; background: rgba(255, 214, 10, 0.1); border: 1px solid rgba(255, 214, 10, 0.3); border-radius: 8px; font-size: 13px; color: #ffd60a;';
                        helperText.innerHTML = '<i class="fas fa-bolt"></i> <strong>Shorts requirements:</strong> 9:16 aspect ratio, max 60 seconds';
                        fileSelectStep.appendChild(helperText);
                    }
                    helperText.style.display = 'block';
                } else if (fileSelectStep) {
                    const helperText = fileSelectStep.querySelector('.shorts-helper');
                    if (helperText) helperText.style.display = 'none';
                }
                
                // Reset to file select
                document.getElementById('fileSelectStep').style.display = 'block';
                document.getElementById('videoDetailsStep').style.display = 'none';
                updateUploadStepper(1);
            }
        }

        // Close upload modal
        function closeUploadModal() {
            const modal = document.getElementById('uploadModal');
            if (modal) {
                modal.classList.remove('active');
                modal.style.display = 'none';
            }
        }

        // Start video upload
        async function startVideoUpload() {
            console.log('🎬 Starting video upload...');
            if (!uploadSelectedFile) {
                alert('Please select a video file first');
                return;
            }

            const validation = BhubanValidate.videoFile(uploadSelectedFile);
            if (!validation.valid) {
                alert(validation.error);
                return;
            }

            const title = document.getElementById('uploadVideoTitle').value.trim();
            if (!title) {
                alert('Please enter a title');
                updateUploadStepper(1);
                document.getElementById('uploadVideoTitle').focus();
                return;
            }

            const description = document.getElementById('uploadVideoDesc').value.trim() || 'No description provided';
            const statusText = document.getElementById('uploadStatusBarText');
            const nextBtn = document.getElementById('nextBtn');

            nextBtn.disabled = true;
            nextBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> PUBLISHING...';

            const formData = new FormData();
            formData.append('video', uploadSelectedFile);
            formData.append('title', title);
            formData.append('description', description);
            formData.append('isMadeForKids', document.querySelector('input[name="madeForKids"]:checked')?.value === 'yes');
            
            // Get upload type and set isShort flag
            const uploadType = document.getElementById('uploadType')?.value || 'video';
            formData.append('isShort', uploadType === 'short');

            const token = localStorage.getItem('bhuban_token') || localStorage.getItem('token');
            if (!token) {
                alert('⚠️ Please log in to upload videos');
                nextBtn.disabled = false;
                nextBtn.textContent = 'PUBLISH';
                return;
            }

            const xhr = new XMLHttpRequest();

            xhr.upload.addEventListener('progress', (e) => {
                if (e.lengthComputable) {
                    const percent = Math.round((e.loaded / e.total) * 100);
                    if (statusText) {
                        statusText.textContent = `Uploading ${percent}% ... ${uploadSelectedFile.name}`;
                    }
                }
            });

            xhr.addEventListener('load', () => {
                if (xhr.status === 201 || xhr.status === 200) {
                    if (statusText) statusText.textContent = 'Upload Complete!';

                    try {
                        const response = JSON.parse(xhr.responseText);
                        console.log('✅ Video created:', response.data);
                    } catch (e) {
                        console.error('Failed to parse response:', e);
                    }

                    // Broadcast video upload event to other tabs/apps
                    localStorage.setItem('videoUploaded', Date.now().toString());
                    console.log('📡 Broadcasting video upload event...');

                    alert('✅ Video uploaded successfully!');
                    setTimeout(() => {
                        closeUploadModal();
                        location.reload();
                    }, 1500);
                } else {
                    let errorMsg = 'Upload failed. Please try again.';
                    try {
                        const response = JSON.parse(xhr.responseText);
                        errorMsg = response.error || response.message || errorMsg;
                    } catch (e) { }
                    alert('❌ ' + errorMsg);
                    nextBtn.disabled = false;
                    nextBtn.textContent = 'PUBLISH';
                }
            });

            xhr.addEventListener('error', () => {
                console.error('❌ Upload network error');
                alert('❌ Upload failed. Check your connection and ensure backend is running.');
                nextBtn.disabled = false;
                nextBtn.textContent = 'PUBLISH';
            });

            // Use centralized API configuration
            const uploadUrl = 'http://localhost:5000/api/videos';
            console.log('📍 Upload URL:', uploadUrl);
            console.log('🔐 Using auth token:', token ? 'Yes' : 'No');
            xhr.open('POST', uploadUrl);
            xhr.setRequestHeader('Authorization', `Bearer ${token}`);
            xhr.send(formData);
        }

        // Handle file selection
        document.addEventListener('DOMContentLoaded', function () {
            const fileInput = document.getElementById('videoFileInput');
            if (fileInput) {
                fileInput.addEventListener('change', function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        console.log('📁 File selected:', file.name);
                        uploadSelectedFile = file;

                        // Switch to details step
                        document.getElementById('fileSelectStep').style.display = 'none';
                        document.getElementById('videoDetailsStep').style.display = 'block';

                        // Populate preview
                        document.getElementById('uploadModalTitle').textContent = file.name;
                        document.getElementById('uploadVideoTitle').value = file.name.split('.').slice(0, -1).join('.');
                        document.getElementById('previewFilename').textContent = file.name;
                        document.getElementById('uploadStatusBarText').textContent = `Uploading 0% ... ${file.name}`;

                        // Update char counts
                        const titleInput = document.getElementById('uploadVideoTitle');
                        const titleCount = document.getElementById('uploadTitleCount');
                        if (titleInput && titleCount) {
                            titleCount.textContent = `${titleInput.value.length}/100`;
                        }
                    }
                });
            }

            // Character counters
            const titleInput = document.getElementById('uploadVideoTitle');
            const descInput = document.getElementById('uploadVideoDesc');

            if (titleInput) {
                titleInput.addEventListener('input', function () {
                    document.getElementById('uploadTitleCount').textContent = this.value.length + '/100';
                });
            }

            if (descInput) {
                descInput.addEventListener('input', function () {
                    document.getElementById('uploadDescCount').textContent = this.value.length + '/500';
                });
            }
        });

        // ==========================================
        // GLOBAL STATE
        // ==========================================
        const CreatorState = {
            videos: [], // Will be loaded from API
            stats: {
                subscribers: 0,
                views28Days: 0,
                revenue: 0,
                earnings: 0,
                subGoal: 1000,
                watchHours: 0,
                watchGoal: 4000
            }
        };

        // ==========================================
        // VIDEO ACTIONS - FULLY FUNCTIONAL
        // ==========================================
        // The saveVideoEdit function is defined in creator-studio-main.js
        // It handles the full-featured edit modal with all advanced options.
        // DO NOT define it here to avoid conflicts.

        function videoStats(id) {
            const video = CreatorState.videos.find(v => v.id === id);
            if (!video) return;

            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px;';
            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 600px; width: 100%; animation: slideUp 0.3s ease;">
                    <h2 style="font-size: 20px; margin-bottom: 24px;"><i class="fas fa-chart-bar" style="color: var(--accent-orange);"></i> Video Analytics</h2>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--accent-orange);">${video.views.toLocaleString()}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Views</div>
                        </div>
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--success);">$${video.revenue.toFixed(2)}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Revenue</div>
                        </div>
                        <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; text-align: center;">
                            <div style="font-size: 24px; font-weight: 800; color: var(--accent-cyan);">${video.comments}</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Comments</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 20px; border-radius: 16px; margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Audience Retention</h4>
                        <div style="display: flex; align-items: flex-end; gap: 8px; height: 100px;">
                            ${[100, 85, 72, 68, 65, 62, 58, 55, 52, 48].map((h, i) => `
                                <div style="flex: 1; background: linear-gradient(to top, var(--accent-orange), var(--accent-orange-light)); height: ${h}%; border-radius: 4px; opacity: ${0.3 + (i * 0.07)};"></div>
                            `).join('')}
                        </div>
                    </div>
                    <button onclick="this.closest('.modal').remove()" style="width: 100%; padding: 14px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
            modal.className = 'modal';
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
        }

        // deleteVideo function is now in creator-studio-main.js

        // ==========================================
        // SEARCH & FILTER - FUNCTIONAL
        // ==========================================
        function initSearch() {
            const searchInputs = document.querySelectorAll('.search-box input, .content-filter input');
            searchInputs.forEach(input => {
                input.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    filterVideos(query);
                });
            });
        }

        function filterVideos(query) {
            const videoRows = document.querySelectorAll('#fullVideoList .video-row, #videoList .video-row');
            videoRows.forEach(row => {
                const title = row.querySelector('.video-details h4')?.textContent.toLowerCase() || '';
                row.style.display = title.includes(query) ? 'grid' : 'none';
            });
        }

        // ==========================================
        // FILTER BUTTONS - FUNCTIONAL
        // ==========================================
        function initFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn, .content-filter .filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const filter = btn.textContent.toLowerCase();

                    // Update active state
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // Filter videos
                    const videoRows = document.querySelectorAll('#fullVideoList .video-row, #videoList .video-row');
                    videoRows.forEach(row => {
                        const statusBadge = row.querySelector('.status-badge');
                        const status = statusBadge?.textContent.toLowerCase() || '';

                        if (filter === 'all') {
                            row.style.display = 'grid';
                        } else {
                            row.style.display = status.includes(filter) ? 'grid' : 'none';
                        }
                    });
                });
            });
        }

        // ==========================================
        // CONTENT TABS & SELECTION
        // ==========================================
        // Create Dropdown Toggle
        function toggleCreateDropdown(e) {
            e.stopPropagation();
            const dropdown = document.getElementById('createDropdown');
            dropdown.classList.toggle('active');
        }

        // Global click to close dropdowns
        document.addEventListener('click', () => {
            const createDropdown = document.getElementById('createDropdown');
            if (createDropdown) createDropdown.classList.remove('active');
        });

        // Multi-step Upload Modal Logic
        let currentUploadStep = 1;
        function updateUploadStepper(step) {
            currentUploadStep = step;
            const items = document.querySelectorAll('.stepper-item');
            items.forEach(item => {
                const s = parseInt(item.dataset.step);
                item.classList.remove('active', 'completed');
                if (s === step) item.classList.add('active');
                if (s < step) item.classList.add('completed');
            });

            // Toggle step screens
            document.querySelectorAll('.upload-step-screen').forEach(screen => {
                screen.style.display = 'none';
            });
            const activeScreen = document.getElementById(`step-${step}-content`);
            if (activeScreen) {
                activeScreen.style.display = 'block';
            }

            // Update button visibility
            const backBtn = document.getElementById('backBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (step > 1) {
                backBtn.style.display = 'block';
            } else {
                backBtn.style.display = 'none';
            }

            if (step === 4) {
                nextBtn.textContent = 'PUBLISH';
            } else {
                nextBtn.textContent = 'NEXT';
            }
        }

        // Initialize Upload Navigation
        document.getElementById('nextBtn')?.addEventListener('click', () => {
            if (currentUploadStep < 4) {
                updateUploadStepper(currentUploadStep + 1);
            } else {
                startVideoUpload();
            }
        });

        document.getElementById('backBtn')?.addEventListener('click', () => {
            if (currentUploadStep > 1) {
                updateUploadStepper(currentUploadStep - 1);
            }
        });

        // Title/Desc Character Counters
        const uploadTitleInput = document.getElementById('uploadVideoTitle');
        const uploadDescInput = document.getElementById('uploadVideoDesc');

        uploadTitleInput?.addEventListener('input', () => {
            document.getElementById('uploadTitleCount').textContent = `${uploadTitleInput.value.length}/100`;
        });

        uploadDescInput?.addEventListener('input', () => {
            document.getElementById('uploadDescCount').textContent = `${uploadDescInput.value.length}/5000`;
        });

        function initContentTabs() {
            const tabs = document.querySelectorAll('.content-tab');
            if (tabs.length === 0) return;

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update layout
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // Apply filter logic
                    const type = tab.dataset.type;
                    console.log(`📡 Filtering content by type: ${type}`);

                    // Filter and style based on content type
                    const videoRows = document.querySelectorAll('#fullVideoList .video-row');
                    videoRows.forEach(row => {
                        const videoData = row.dataset.videoData ? JSON.parse(row.dataset.videoData) : null;
                        const isShort = videoData && videoData.isShort;
                        
                        if (type === 'videos') {
                            // Show only regular videos
                            row.style.display = !isShort ? 'grid' : 'none';
                        } else if (type === 'shorts') {
                            // Show only Shorts with vertical thumbnail styling
                            if (isShort) {
                                row.style.display = 'grid';
                                const thumbnail = row.querySelector('.video-thumbnail');
                                if (thumbnail) {
                                    thumbnail.style.aspectRatio = '9 / 16';
                                    thumbnail.style.maxWidth = '180px';
                                    thumbnail.style.objectFit = 'cover';
                                }
                            } else {
                                row.style.display = 'none';
                            }
                        } else {
                            // Hide others for now as they are placeholders
                            row.style.display = 'none';
                        }
                    });

                    if (type !== 'videos' && type !== 'shorts') {
                        showNotification(`${tab.textContent} content is coming soon!`, 'info');
                    }
                });
            });
        }

        // ==========================================
        // ANALYTICS SUB-TABS
        // ==========================================
        function initCustomizationTabs() {
            const tabs = document.querySelectorAll('.customization-tab');
            const contents = document.querySelectorAll('.customization-tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.dataset.tab;
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    contents.forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(`customization-${target}`).style.display = 'block';
                });
            });
        }

        function addCustomLink() {
            const list = document.getElementById('customizationLinks');
            const row = document.createElement('div');
            row.className = 'customization-link-row';
            const linkId = Date.now();
            row.innerHTML = `
                <div class="drag-handle"><i class="fas fa-equals"></i></div>
                <div class="customization-input-group" style="padding: 8px 12px; margin: 0;">
                    <label class="customization-input-label" for="linkTitle_${linkId}">Link title (required)</label>
                    <input type="text" class="customization-input" id="linkTitle_${linkId}" name="linkTitle[]" placeholder="Title">
                </div>
                <div class="customization-input-group" style="padding: 8px 12px; margin: 0;">
                    <label class="customization-input-label" for="linkUrl_${linkId}">URL (required)</label>
                    <input type="text" class="customization-input" id="linkUrl_${linkId}" name="linkUrl[]" placeholder="https://...">
                </div>
                <button class="copy-url-btn" style="color: var(--error);" onclick="this.closest('.customization-link-row').remove()">
                    <i class="far fa-trash-alt"></i>
                </button>
            `;
            list.appendChild(row);
        }

        // Watermark preview logic
        const watermarkInput = document.getElementById('watermarkInput');
        if (watermarkInput) {
            watermarkInput.addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (event) {
                        const img = document.getElementById('watermarkPreviewImg');
                        img.src = event.target.result;
                        img.style.display = 'block';
                        document.getElementById('watermarkPlaceholder').style.display = 'none';
                        showNotification('Watermark preview updated');
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function initAnalyticsTabs() {
            const tabs = document.querySelectorAll('.analytics-tab');
            const sections = document.querySelectorAll('.analytics-sub-section');
            if (tabs.length === 0) return;

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.dataset.analyticsTab;
                    console.log(`📊 Switching analytics to: ${target}`);

                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // Show content section
                    sections.forEach(sec => {
                        sec.style.display = 'none';
                        sec.classList.remove('active');
                    });

                    const targetSection = document.getElementById(`analytics-${target}`);
                    if (targetSection) {
                        targetSection.style.display = 'block';
                        targetSection.classList.add('active');
                    }
                });
            });
        }

        function toggleAllVideoSelection() {
            const master = document.getElementById('masterVideoCheckbox');
            if (!master) return;

            master.classList.toggle('checked');
            const isChecked = master.classList.contains('checked');

            const checkboxes = document.querySelectorAll('#fullVideoList .custom-checkbox');
            checkboxes.forEach(cb => {
                if (isChecked) cb.classList.add('checked');
                else cb.classList.remove('checked');
            });

            console.log(`✅ ${isChecked ? 'Selected' : 'Deselected'} all visible videos`);
        }

        // ==========================================
        // CHART FILTERS - DISABLED (needs backend support for different periods)
        // ==========================================
        function initChartFilters() {
            const chartFilters = document.querySelectorAll('.chart-filter');
            chartFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    chartFilters.forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');

                    const period = filter.textContent;
                    // Show message that this feature needs backend implementation
                    const chartBars = document.getElementById('chartBars');
                    if (chartBars) {
                        chartBars.innerHTML = `
                            <div style="text-align:center; padding:40px; color:var(--text-muted);">
                                <i class="fas fa-info-circle" style="font-size:24px; margin-bottom:12px;"></i>
                                <div>Period filter "${period}" requires backend API support</div>
                                <div style="font-size:12px; margin-top:8px;">Currently showing last 7 days of real data</div>
                            </div>
                        `;
                    }
                });
            });
        }

        // ==========================================
        // EARN PAGE - EDITABLE GOALS
        // ==========================================
        function initEarnPage() {
            // Make earnings editable
            const earningsHero = document.querySelector('.earnings-amount');
            if (earningsHero) {
                earningsHero.style.cursor = 'pointer';
                earningsHero.title = 'Click to update';
                earningsHero.addEventListener('click', () => {
                    const newAmount = prompt('Update estimated balance:', CreatorState.stats.earnings);
                    if (newAmount && !isNaN(newAmount)) {
                        CreatorState.stats.earnings = parseFloat(newAmount);
                        earningsHero.textContent = '$' + CreatorState.stats.earnings.toLocaleString('en-US', { minimumFractionDigits: 2 });
                        saveStats();
                        showNotification('Earnings updated!', 'success');
                    }
                });
            }

            // Make goals editable
            const goalItems = document.querySelectorAll('.goal-item');
            goalItems.forEach((item, index) => {
                item.style.cursor = 'pointer';
                item.addEventListener('click', () => {
                    const isSubGoal = index === 0;
                    const current = isSubGoal ? CreatorState.stats.subscribers : CreatorState.stats.watchHours;
                    const goal = isSubGoal ? CreatorState.stats.subGoal : CreatorState.stats.watchGoal;

                    const newCurrent = prompt(`Update current ${isSubGoal ? 'subscribers' : 'watch hours'}:`, current);
                    if (newCurrent && !isNaN(newCurrent)) {
                        if (isSubGoal) {
                            CreatorState.stats.subscribers = parseInt(newCurrent);
                        } else {
                            CreatorState.stats.watchHours = parseInt(newCurrent);
                        }
                        updateGoalDisplay();
                        saveStats();
                        showNotification('Goal updated!', 'success');
                    }
                });
            });
        }

        function updateGoalDisplay() {
            const subPercentage = (CreatorState.stats.subscribers / CreatorState.stats.subGoal) * 100;
            const watchPercentage = (CreatorState.stats.watchHours / CreatorState.stats.watchGoal) * 100;

            const goalFills = document.querySelectorAll('.goal-fill');
            if (goalFills[0]) goalFills[0].style.width = Math.min(subPercentage, 100) + '%';
            if (goalFills[1]) goalFills[1].style.width = Math.min(watchPercentage, 100) + '%';

            const goalValues = document.querySelectorAll('.goal-value');
            if (goalValues[0]) goalValues[0].textContent = `${CreatorState.stats.subscribers} / ${CreatorState.stats.subGoal}`;
            if (goalValues[1]) goalValues[1].textContent = `${CreatorState.stats.watchHours} / ${CreatorState.stats.watchGoal}`;
        }

        // ==========================================
        // DRAG & DROP UPLOAD
        // ==========================================
        function initDragDrop() {
            const dropzone = document.getElementById('dropzone');
            if (!dropzone) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropzone.addEventListener(eventName, () => dropzone.classList.add('dragover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, () => dropzone.classList.remove('dragover'), false);
            });

            dropzone.addEventListener('drop', handleDrop, false);
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length) {
                handleFileSelect({ target: { files: files } });
            }
        }

        // ==========================================
        // NOTIFICATION SYSTEM
        // ==========================================
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--error)' : 'var(--accent-orange)'};
                color: white;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.4s ease;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'}-circle"></i> ${message}`;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        // ==========================================
        // STORAGE HELPERS
        // ==========================================
        function saveVideos() {
            localStorage.setItem('creator_videos', JSON.stringify(CreatorState.videos));
        }

        function saveStats() {
            localStorage.setItem('creator_stats', JSON.stringify(CreatorState.stats));
        }

        // Global Logout for SSO parity
        function handleGlobalLogout(e) {
            if (e) e.stopPropagation();
            localStorage.clear();
            window.location.href = '/Bhuban%20video%20stream%20app/login.html?logout=true';
        }

        // loadCreatorProfile moved to creator-studio-main.js

        function refreshVideoLists() {
            document.getElementById('videoList').innerHTML = '';
            document.getElementById('fullVideoList').innerHTML = '';
            renderVideoList();
        }

        // ==========================================
        // LOAD REAL ANALYTICS FROM BACKEND
        // ==========================================
        async function loadCreatorAnalytics() {
            try {
                // Get user ID from localStorage or use default
                const userId = localStorage.getItem('userId') || '507f1f77bcf86cd799439011';

                const response = await fetch(`http://localhost:5000/api/creator-analytics/dashboard/${userId}?period=30d`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success && result.data) {
                    const data = result.data;

                    // Update overview stats
                    const subscribers = data.overview.subscribers || 0;
                    const totalViews = data.overview.totalViews || 0;
                    const watchTime = data.watchTime?.total || 0;
                    const revenue = parseFloat(data.revenue.total) || 0;

                    // Dashboard stats
                    document.getElementById('subCount').textContent = subscribers.toLocaleString();
                    document.getElementById('viewCount').textContent = totalViews > 1000 ? (totalViews / 1000).toFixed(1) + 'K' : totalViews;
                    document.getElementById('revenueAmount').textContent = '$' + revenue.toFixed(2);

                    // Analytics Detailed Stats
                    const updateDetail = (id, val, textId, text) => {
                        const el = document.getElementById(id);
                        if (el) el.textContent = val;
                        const txtEl = document.getElementById(textId);
                        if (txtEl) txtEl.textContent = text;
                    };

                    updateDetail('analyticsOverviewViews', totalViews.toLocaleString(), 'analyticsOverviewViewsGrowth', 'Typical performance');
                    updateDetail('analyticsOverviewWatchTime', watchTime.toLocaleString(), 'analyticsOverviewWatchTimeGrowth', 'Typical performance');
                    updateDetail('analyticsOverviewSubs', '+' + subscribers, 'analyticsOverviewSubsGrowth', 'Healthy growth');
                    updateDetail('analyticsOverviewRevenue', '$' + revenue.toFixed(2), 'analyticsOverviewRevenueGrowth', 'Estimated revenue');

                    // Update growth indicators to neutral if no real dynamic growth data
                    ['subGrowth', 'viewGrowth', 'revenueGrowth'].forEach(id => {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = '<i class="fas fa-minus"></i> 0%';
                    });

                    // Update CreatorState
                    CreatorState.stats.subscribers = subscribers;
                    CreatorState.stats.views = totalViews;
                    CreatorState.stats.revenue = revenue;

                    // Update charts with real data
                    if (data.recentPerformance && data.recentPerformance.length > 0) {
                        updateChartsWithRealData(data.recentPerformance);
                    } else {
                        const chartBars = document.getElementById('chartBars');
                        if (chartBars) {
                            chartBars.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No performance data available yet</div>';
                        }
                    }

                    // Update video list
                    if (data.topVideos && data.topVideos.length > 0) {
                        CreatorState.videos = data.topVideos;
                        renderVideoList();
                    } else {
                        const videoList = document.getElementById('videoList');
                        const fullVideoList = document.getElementById('fullVideoList');
                        if (videoList) videoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet</div>';
                        if (fullVideoList) fullVideoList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-muted);">No videos yet</div>';
                    }
                }
            } catch (error) {
                console.error('Failed to load creator analytics:', error);
                const offlineMsg = 'Backend offline';
                ['subCount', 'viewCount', 'revenueAmount', 'analyticsOverviewViews', 'analyticsOverviewWatchTime', 'analyticsOverviewSubs', 'analyticsOverviewRevenue'].forEach(id => {
                    const el = document.getElementById(id);
                    if (el) el.textContent = '--';
                });

                const showOffline = (id) => {
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = `<div style="text-align: center; padding: 40px; color: var(--text-muted);"><i class="fas fa-plug-circle-xmark"></i> ${offlineMsg}</div>`;
                };
                showOffline('chartBars');
                showOffline('videoList');
                showOffline('fullVideoList');
            }
        }

        function updateChartsWithRealData(performanceData) {
            if (!performanceData || performanceData.length === 0) return;

            // Update views chart (Dashboard/Overview)
            const chartBars = document.getElementById('chartBars');
            // Update audience chart (Audience tab)
            const audienceBars = document.getElementById('audienceBars');

            if (chartBars || audienceBars) {
                const maxViews = Math.max(...performanceData.map(d => d.views));
                const recentData = performanceData.slice(-7);

                [chartBars, audienceBars].forEach(container => {
                    if (!container) return;
                    container.innerHTML = '';

                    recentData.forEach(day => {
                        const height = maxViews > 0 ? (day.views / maxViews) * 100 : 0;
                        const date = new Date(day.date);
                        const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });

                        const barWrapper = document.createElement('div');
                        barWrapper.className = 'chart-bar-wrapper';
                        barWrapper.innerHTML = `
                            <div class="chart-bar" style="height: ${height}%"></div>
                            <span class="chart-label">${dayName}</span>
                        `;
                        container.appendChild(barWrapper);
                    });
                });
            }
        }

        // ==========================================
        // REAL-TIME STATS - REAL DATA ONLY
        // ==========================================
        function initLiveStats() {
            // NO FAKE DATA - All stats come from backend
            // Initial load
            loadCreatorAnalytics();

            // Auto-refresh every 60 seconds
            setInterval(() => {
                loadCreatorAnalytics();
            }, 60000);
        }

        // ==========================================
        // HEALTH MONITORING
        // ==========================================
        function updateHealthStatus() {
            const healthData = {
                status: 'healthy',
                lastPing: Date.now(),
                activeUsers: 1,
                uploadsInProgress: CreatorState.videos.filter(v => v.status === 'Processing').length,
                totalVideos: CreatorState.videos.length
            };
            localStorage.setItem('bhuban_creator_health', JSON.stringify(healthData));
        }

        setInterval(updateHealthStatus, 10000);
        updateHealthStatus();

        // ==========================================
        // INITIALIZATION
        // ==========================================
        // ADVANCED FEATURES - AI STUDIO
        // ==========================================
        async function generateAITitles() {
            const input = document.getElementById('aiTitleInput').value;
            if (!input) {
                showNotification('Please enter a video description', 'error');
                return;
            }

            const resultsDiv = document.getElementById('aiTitleResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Generating titles...</div>';

            const titles = await aiAssistant.generateTitleSuggestions(input);

            resultsDiv.innerHTML = titles.map((title, i) => `
                <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between;">
                    <span style="font-size: 13px;">${title}</span>
                    <button onclick="copyToClipboard('${title.replace(/'/g, "\\'")}')" style="padding: 6px 12px; background: var(--accent-gradient); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 12px;">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            `).join('');
        }

        async function generateAITags() {
            const input = document.getElementById('aiTagInput').value;
            if (!input) {
                showNotification('Please enter a video title', 'error');
                return;
            }

            const resultsDiv = document.getElementById('aiTagResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Generating tags...</div>';

            const tags = await aiAssistant.generateTags(input, '');

            resultsDiv.innerHTML = `
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;">
                    ${tags.map(tag => `
                        <span style="padding: 6px 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; font-size: 12px;">
                            ${tag}
                        </span>
                    `).join('')}
                </div>
            `;
        }

        async function predictPerformance() {
            const resultsDiv = document.getElementById('aiPredictionResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing...</div>';

            const prediction = await aiAssistant.predictPerformance({});

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Estimated Views</div>
                        <div style="font-size: 18px; font-weight: 600; color: var(--accent-orange);">${prediction.estimatedViews.toLocaleString()}</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Engagement Rate</div>
                        <div style="font-size: 18px; font-weight: 600; color: #10b981;">${prediction.estimatedEngagement}%</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Confidence</div>
                        <div style="font-size: 18px; font-weight: 600;">${prediction.confidence}%</div>
                    </div>
                </div>
            `;
        }

        async function analyzeThumbnail() {
            const input = document.getElementById('thumbnailInput');
            if (!input.files || !input.files[0]) {
                showNotification('Please select a thumbnail image', 'error');
                return;
            }

            const resultsDiv = document.getElementById('thumbnailAnalysisResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing thumbnail...</div>';

            const analysis = await performanceOptimizer.analyzeThumbnail(input.files[0]);

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 12px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">Thumbnail Score</div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: ${analysis.score}%; height: 100%; background: var(--accent-gradient);"></div>
                            </div>
                            <span style="font-size: 18px; font-weight: 600;">${analysis.score}/100</span>
                        </div>
                    </div>
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Suggestions:</div>
                        ${analysis.suggestions.map(s => `
                            <div style="padding: 8px 0; font-size: 12px; color: var(--text-secondary);">
                                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-right: 8px;"></i>${s}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        async function analyzeTrends() {
            const resultsDiv = document.getElementById('trendAnalysisResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing trends...</div>';

            // Simulate AI analysis
            await new Promise(resolve => setTimeout(resolve, 1500));

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px;">🔥 Trending Topics</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            • AI & Machine Learning<br>
                            • Gaming Tutorials<br>
                            • Tech Reviews<br>
                            • Productivity Tips
                        </div>
                    </div>
                </div>
            `;
        }

        async function optimizeDescription() {
            const input = document.getElementById('descriptionInput').value;
            if (!input) {
                showNotification('Please enter a description', 'error');
                return;
            }

            const resultsDiv = document.getElementById('descriptionOptimizationResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Optimizing...</div>';

            const result = await aiAssistant.optimizeDescription(input);

            resultsDiv.innerHTML = `
                <div style="margin-top: 16px;">
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 12px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">SEO Score</div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                <div style="width: ${result.score}%; height: 100%; background: linear-gradient(135deg, #10b981 0%, #34d399 100%);"></div>
                            </div>
                            <span style="font-size: 18px; font-weight: 600;">${result.score}/100</span>
                        </div>
                    </div>
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Suggestions:</div>
                        ${result.suggestions.map(s => `
                            <div style="padding: 8px 0; font-size: 12px; color: var(--text-secondary);">
                                <i class="fas fa-lightbulb" style="color: #f59e0b; margin-right: 8px;"></i>${s}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copied to clipboard!', 'success');
            });
        }

        // ==========================================
        // SMART SCHEDULER
        // ==========================================
        async function loadOptimalTimes() {
            if (!window.smartScheduler) {
                console.warn('⚠️ Smart Scheduler not loaded yet');
                return;
            }

            const times = await window.smartScheduler.getOptimalUploadTimes();
            const grid = document.getElementById('optimalTimesGrid');

            grid.innerHTML = times.map(time => {
                const date = new Date(time.date);
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                return `
                    <div style="padding: 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px;">
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${dayName}</div>
                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 8px;">${timeStr}</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="flex: 1; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                                <div style="width: ${time.score}%; height: 100%; background: var(--accent-gradient);"></div>
                            </div>
                            <span style="font-size: 11px; font-weight: 600;">${time.score}%</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showScheduleModal() {
            showNotification('Schedule feature coming soon!', 'info');
        }

        // ==========================================
        // MONETIZATION PRO
        // ==========================================
        async function analyzeRevenueOpportunities() {
            const div = document.getElementById('revenueOpportunities');
            div.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Analyzing...</div>';

            try {
                // Check if monetizationOptimizer exists
                if (window.monetizationOptimizer && typeof window.monetizationOptimizer.analyzeRevenueOpportunities === 'function') {
                    const opportunities = await window.monetizationOptimizer.analyzeRevenueOpportunities();

                    div.innerHTML = opportunities.recommendations.map(opp => `
                        <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                                <div>
                                    <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px; text-transform: capitalize;">${opp.type}</h5>
                                    <p style="font-size: 12px; color: var(--text-muted);">${opp.description}</p>
                                </div>
                                <span style="padding: 4px 12px; background: var(--accent-gradient); border-radius: 12px; font-size: 11px; font-weight: 700; white-space: nowrap;">${opp.potential}</span>
                            </div>
                            <div style="display: flex; gap: 16px; font-size: 12px;">
                                <div>
                                    <span style="color: var(--text-muted);">Effort:</span>
                                    <span style="font-weight: 600; margin-left: 4px;">${opp.effort}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                } else {
                    // Mock implementation if monetizationOptimizer is not available
                    const mockOpportunities = [
                        { type: "Ad Revenue", description: "Increase ad revenue by optimizing video placement and viewer engagement", potential: "+$240/mo", effort: "Medium" },
                        { type: "Premium Content", description: "Create premium content for subscribers with exclusive access", potential: "+$420/mo", effort: "High" },
                        { type: "Affiliate Marketing", description: "Partner with relevant brands and promote products in your content", potential: "+$180/mo", effort: "Low" }
                    ];

                    div.innerHTML = mockOpportunities.map(opp => `
                        <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                                <div>
                                    <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px; text-transform: capitalize;">${opp.type}</h5>
                                    <p style="font-size: 12px; color: var(--text-muted);">${opp.description}</p>
                                </div>
                                <span style="padding: 4px 12px; background: var(--accent-gradient); border-radius: 12px; font-size: 11px; font-weight: 700; white-space: nowrap;">${opp.potential}</span>
                            </div>
                            <div style="display: flex; gap: 16px; font-size: 12px;">
                                <div>
                                    <span style="color: var(--text-muted);">Effort:</span>
                                    <span style="font-weight: 600; margin-left: 4px;">${opp.effort}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error analyzing revenue opportunities:', error);
                div.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--error);">Failed to analyze revenue opportunities. Please try again later.</div>';
            }
        }

        async function findSponsorships() {
            const div = document.getElementById('sponsorshipMatches');
            div.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Finding matches...</div>';

            try {
                // Check if monetizationOptimizer exists
                if (window.monetizationOptimizer && typeof window.monetizationOptimizer.getSponsorshipMatches === 'function') {
                    const matches = await window.monetizationOptimizer.getSponsorshipMatches();

                    div.innerHTML = matches.map(match => `
                        <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                                <div>
                                    <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">${match.brand}</h5>
                                    <p style="font-size: 12px; color: var(--text-muted);">${match.category}</p>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 14px; font-weight: 600; color: var(--accent-orange);">${match.budget}</div>
                                    <div style="font-size: 11px; color: var(--text-muted);">Match: ${match.match}%</div>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 12px;">${match.requirements}</div>
                            <button class="btn-primary" style="width: 100%; padding: 10px; font-size: 13px;">
                                <i class="fas fa-handshake"></i> Apply Now
                            </button>
                        </div>
                    `).join('');
                } else {
                    // Mock implementation if monetizationOptimizer is not available
                    const mockMatches = [
                        { brand: "TechGadgets Pro", category: "Electronics & Tech Reviews", budget: "$500", match: "92", requirements: "Must have 10k+ subscribers and 5% engagement rate" },
                        { brand: "EcoFriendly Brands", category: "Sustainable Living", budget: "$300", match: "87", requirements: "Content focused on eco-friendly products and lifestyle" },
                        { brand: "FitnessGear Plus", category: "Health & Fitness", budget: "$400", match: "85", requirements: "Regular fitness content with workout routines" }
                    ];

                    div.innerHTML = mockMatches.map(match => `
                        <div style="padding: 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 12px;">
                                <div>
                                    <h5 style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">${match.brand}</h5>
                                    <p style="font-size: 12px; color: var(--text-muted);">${match.category}</p>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 14px; font-weight: 600; color: var(--accent-orange);">${match.budget}</div>
                                    <div style="font-size: 11px; color: var(--text-muted);">Match: ${match.match}%</div>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 12px;">${match.requirements}</div>
                            <button class="btn-primary" style="width: 100%; padding: 10px; font-size: 13px;">
                                <i class="fas fa-handshake"></i> Apply Now
                            </button>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error finding sponsorships:', error);
                div.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--error);">Failed to find sponsorships. Please try again later.</div>';
            }
        }

        // ==========================================
        // COLLABORATION & LIBRARY PLACEHOLDERS
        // ==========================================
        function showInviteModal() {
            showNotification('Collaboration feature coming soon!', 'info');
        }

        function showCreateFolderModal() {
            showNotification('Folder creation coming soon!', 'info');
        }

        function showUploadAssetModal() {
            showNotification('Asset upload coming soon!', 'info');
        }

        function showCreateTestModal() {
            showNotification('A/B testing feature coming soon!', 'info');
        }

        // ==========================================
        // CHANNEL SETTINGS FUNCTIONS
        // ==========================================
        function saveChannelSettings() {
            console.log('💾 Saving channel settings...');

            try {
                const settings = {
                    channelName: document.getElementById('channelName').value,
                    channelDescription: document.getElementById('channelDescription').value,
                    channelEmail: document.getElementById('channelEmail').value,
                    channelPublic: document.getElementById('channelPublic').checked,
                    allowComments: document.getElementById('allowComments').checked,
                    showSubscribers: document.getElementById('showSubscribers').checked,
                    emailNotifications: document.getElementById('emailNotifications').checked,
                    commentAlerts: document.getElementById('commentAlerts').checked,
                    subscriberAlerts: document.getElementById('subscriberAlerts').checked,
                    defaultPrivacy: document.getElementById('defaultPrivacy').value,
                    defaultCategory: document.getElementById('defaultCategory').value
                };

                // Save to localStorage
                localStorage.setItem('bhuban_channel_settings', JSON.stringify(settings));

                // Show success message
                showNotification('Settings saved successfully!', 'success');

                console.log('✅ Channel settings saved:', settings);
            } catch (error) {
                console.error('❌ Error saving settings:', error);
                showNotification('Failed to save settings', 'error');
            }
        }

        function loadChannelSettings() {
            console.log('📥 Loading channel settings...');

            try {
                const savedSettings = localStorage.getItem('bhuban_channel_settings');

                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);

                    // Load text inputs
                    if (settings.channelName) document.getElementById('channelName').value = settings.channelName;
                    if (settings.channelDescription) document.getElementById('channelDescription').value = settings.channelDescription;
                    if (settings.channelEmail) document.getElementById('channelEmail').value = settings.channelEmail;

                    // Load checkboxes
                    document.getElementById('channelPublic').checked = settings.channelPublic !== false;
                    document.getElementById('allowComments').checked = settings.allowComments !== false;
                    document.getElementById('showSubscribers').checked = settings.showSubscribers !== false;
                    document.getElementById('emailNotifications').checked = settings.emailNotifications !== false;
                    document.getElementById('commentAlerts').checked = settings.commentAlerts !== false;
                    document.getElementById('subscriberAlerts').checked = settings.subscriberAlerts !== false;

                    // Load selects
                    if (settings.defaultPrivacy) document.getElementById('defaultPrivacy').value = settings.defaultPrivacy;
                    if (settings.defaultCategory) document.getElementById('defaultCategory').value = settings.defaultCategory;

                    console.log('✅ Channel settings loaded:', settings);
                } else {
                    console.log('ℹ️ No saved settings found, checking Google Account fallback...');
                    const userJson = localStorage.getItem('user');
                    if (userJson) {
                        const user = JSON.parse(userJson);
                        if (user.name || user.displayName) document.getElementById('channelName').value = user.name || user.displayName;
                        if (user.email) document.getElementById('channelEmail').value = user.email;
                    }
                }
            } catch (error) {
                console.error('❌ Error loading settings:', error);
            }
        }

        // ==========================================
        // INITIALIZATION
        // ==========================================
        console.log('📦 Defining initializeApp function...');

        function initializeApp() {
            console.log('🚀 Creator Studio initializing...');

            try {
                loadCreatorProfile(); // SSO Automatic Login
                initNavigation();
                initCharts();
                initChartFilters();
                renderVideoList();
                initSearch();
                initFilters();
                initContentTabs();
                initAnalyticsTabs();
                initCustomizationTabs(); // <-- Added this
                initEarnPage();
                initDragDrop();
                initLiveStats();
                updateGoalDisplay();
                loadChannelSettings(); // Load saved channel settings

                // Load optimal times with delay to ensure advanced features are loaded
                setTimeout(() => {
                    try {
                        loadOptimalTimes();
                    } catch (err) {
                        console.warn('⚠️ Could not load optimal times:', err);
                    }
                }, 500);
            } catch (error) {
                console.error('❌ Initialization error:', error);
            }
        }

        // Try both DOMContentLoaded and immediate execution
        console.log('🔍 Checking document.readyState:', document.readyState);

        if (document.readyState === 'loading') {
            console.log('⏳ Document still loading, waiting for DOMContentLoaded...');
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            // DOM already loaded, run immediately
            console.log('⚡ DOM already loaded, initializing immediately...');
            initializeApp();
        }

        // Close modals on backdrop click
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.remove();
            }
        });

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>